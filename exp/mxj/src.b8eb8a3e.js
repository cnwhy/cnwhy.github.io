parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l="f(t[t.length-1]);"object"==typeof" exports&&"undefined"!="typeof" module?module.exports="l:"function"==typeof" define&&define.amd?define(function(){return="" l}):n&&(this[n]="l)}if(parcelRequire=f,i)throw" i;return="" f}({"ebpe":[function(require,module,exports)="" {="" },{}],"ktmo":[function(require,module,exports)="" },{".="" img="" icon="" 图标-61.png":[["图标-61.37a8a18d.png","clos"],"图标-61.37a8a18d.js","clos"],".="" banner.png":[["banner.fe098d1e.png","u97x"],"banner.fe098d1e.js","u97x"],".="" 生成图片.png":[["生成图片.765faf68.png","ds9a"],"生成图片.765faf68.js","ds9a"],".="" 返回编辑.png":[["返回编辑.1fdb7551.png","wvqv"],"返回编辑.1fdb7551.js","wvqv"],".="" 长按保存.png":[["长按保存.76dcff09.png","9s2u"],"长按保存.76dcff09.js","9s2u"],".="" 马上分享.png":[["马上分享.991c8063.png","rszb"],"马上分享.991c8063.js","rszb"],".="" 01.png":[["01.4c99acd6.png","bod8"],"01.4c99acd6.js","bod8"],".="" 02.png":[["02.5aea645a.png","ibmg"],"02.5aea645a.js","ibmg"],".="" 05.png":[["05.d0968702.png","otrq"],"05.d0968702.js","otrq"],".="" 04.png":[["04.ffd23078.png","gxkl"],"04.ffd23078.js","gxkl"],".="" 03.png":[["03.551ac1ad.png","p6qv"],"03.551ac1ad.js","p6qv"]}],"yh9p":[function(require,module,exports)="" "use="" strict";exports.bytelength="u,exports.toByteArray=i,exports.fromByteArray=d;for(var" r="[],t=[],e="undefined"!=typeof" uint8array?uint8array:array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/" ,o="0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function" h(r){var="" t="r.length;if(t%4">0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){for(var n,o=h(r),a=o[0],u=o[1],i=new e(c(r,a,u)),f=0,A=u>0?a-4:a,d=0;d<a;d+=4)n=t[r.charcodeat(d)]<<18|t[r.charcodeat(d+1)]<<12|t[r.charcodeat(d+2)]<<6|t[r.charcodeat(d+3)],i[f++]=n>>16&255,i[f++]=n>>8&255,i[f++]=255&n;return 2===u&&(n=t[r.charCodeAt(d)]<<2|t[r.charcodeat(d+1)]>>4,i[f++]=255&n),1===u&&(n=t[r.charCodeAt(d)]<<10|t[r.charcodeat(d+1)]<<4|t[r.charcodeat(d+2)]>>2,i[f++]=n>>8&255,i[f++]=255&n),i}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function="" d(t){for(var="" e,n="t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383">u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charcodeat(0)]=62,t["_".charcodeat(0)]=63; },{}],"jgnj":[function(require,module,exports)="" {="" exports.read="function(a,o,t,r,h){var" m,p,w="8*h-r-1,f=(1<<w)-1,e=f">>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,m>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,n=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1 o<0?1:0;for(o="Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N">=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"REa7":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"dskh":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw 0="==e&&void" new="" rangeerror("invalid="" typed="" array="" length");return="" f.typed_array_support?(t="new" uint8array(r)).__proto__="f.prototype:(null===t&&(t=new" f(r)),t.length="r),t}function" f(t,r,e){if(!(f.typed_array_support||this="" instanceof="" f))return="" f(t,r,e);if("number"="=typeof" t){if("string"="=typeof" r)throw="" error("if="" encoding="" is="" specified="" then="" the="" first="" argument="" must="" be="" a="" string");return="" c(this,t)}return="" s(this,t,r,e)}function="" s(t,r,e,n){if("number"="=typeof" typeerror('"value"="" not="" number');return"undefined"!="typeof" arraybuffer&&r="" arraybuffer?g(t,r,e,n):"string"="=typeof" r?l(t,r,e):y(t,r)}function="" h(t){if("number"!="typeof" t)throw="" typeerror('"size"="" number');if(t<0)throw="" rangeerror('"size"="" negative')}function="" a(t,r,e,n){return="" h(r),r<="0?u(t,r):void" 0!="=e?"string"==typeof" n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function="" c(t,r){if(h(r),t="u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var" e="0;e<r;++e)t[e]=0;return" t}function="" l(t,r,e){if("string"="=typeof" e&&""!="=e||(e="utf8"),!f.isEncoding(e))throw" typeerror('"encoding"="" valid="" string="" encoding');var="" n="0|v(r,e),i=(t=u(t,n)).write(r,e);return" i!="=n&&(t=t.slice(0,i)),t}function" p(t,r){var="" g(t,r,e,n){if(r.bytelength,e<0||r.bytelength<e)throw="" rangeerror("'offset'="" out="" of="" bounds");if(r.bytelength<e+(n||0))throw="" rangeerror("'length'="" bounds");return="" r="void" uint8array(r):void="" uint8array(r,e):new="" uint8array(r,e,n),f.typed_array_support?(t="r).__proto__=f.prototype:t=p(t,r),t}function" y(t,r){if(f.isbuffer(r)){var="" arraybuffer&&r.buffer="" arraybuffer||"length"in="" r)return"number"!="typeof" r.length||w(r.length)?u(t,0):p(t,r);if("buffer"="==r.type&&n(r.data))return" p(t,r.data)}throw="" typeerror("first="" string,="" buffer,="" arraybuffer,="" array,="" or="" array-like="" object.")}function="" w(t){if(t="">=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isnan(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof 0="==r.length?-1:_(t,r,e,n,i);if("number"==typeof" 1="==u?t[r]:t.readUInt16BE(r*u)}if(i){var" r&&(r="f.from(r,n)),f.isBuffer(r))return" r)return="" r&="255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof" uint8array.prototype.indexof?i?uint8array.prototype.indexof.call(t,r,e):uint8array.prototype.lastindexof.call(t,r,e):_(t,[r],e,n,i);throw="" new="" typeerror("val="" must="" be="" string,="" number="" or="" buffer")}function="" _(t,r,e,n,i){var="" o,u="1,f=t.length,s=r.length;if(void" 0!="=n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function" h(t,r){return="" a="-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return" a*u}else-1!="=a&&(o-=o-a),a=-1}else" for(e+s="">f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function="" a(t,r,e,n){e="Number(e)||0;var" i="t.length-e;n?(n=Number(n))">i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var 0="==e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function" f="parseInt(r.substr(2*u,2),16);if(isNaN(f))return" u;t[e+u]="f}return" u}function="" m(t,r,e,n){return="" q($(r,t.length-e),t,e,n)}function="" p(t,r,e,n){return="" q(g(r),t,e,n)}function="" t(t,r,e,n){return="" p(t,r,e,n)}function="" b(t,r,e,n){return="" q(k(r),t,e,n)}function="" u(t,r,e,n){return="" q(h(r,t.length-e),t,e,n)}function="" s(t,e,n){return="" y(t,r,e){e="Math.min(t.length,e);for(var" n="[],i=r;i<e;){var" o,u,f,s,h="t[i],a=null,c=h">239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a="h);break;case" 2:128="=(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)">127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return 0="==r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var" e<n?-1:n<e?1:0},f.isencoding="function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw" new="" typeerror('"list"="" argument="" must="" be="" an="" array="" of="" buffers');if(0="==t.length)return" f.alloc(0);var="" e;if(void="" i="f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var" u="t[e];if(!f.isBuffer(u))throw" buffers');u.copy(i,o),o+="u.length}return" i},f.bytelength="v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var" t="this.length;if(t%2!=0)throw" rangeerror("buffer="" size="" a="" multiple 16-bits");for(var="" r="0;r<t;r+=2)b(this,r,r+1);return" this},f.prototype.swap32="function(){var" 32-bits");for(var="" this},f.prototype.swap64="function(){var" 64-bits");for(var="" this},f.prototype.tostring="function(){var" typeerror("argument="" buffer");return="" this="==t||0===f.compare(this,t)},f.prototype.inspect=function(){var" ,r="exports.INSPECT_MAX_BYTES;return" this.length="">0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<buffer "+t+"="">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return 0="==r)n="utf8",e=this.length,r=0;else" o<u?-1:u<o?1:0},f.prototype.includes="function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return" r(this,t,r,e,!0)},f.prototype.lastindexof="function(t,r,e){return" r(this,t,r,e,!1)},f.prototype.write="function(t,r,e,n){if(void" if(void="" r)n="r,e=this.length,r=0;else{if(!isFinite(r))throw" new="" error("buffer.write(string,="" encoding,="" offset[,="" length])="" is="" no="" longer="" supported");r|="0,isFinite(e)?(e|=0,void" 0)}var="" i="this.length-r;if((void">i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=i)return string.fromcharcode.apply(string,t);for(var="" e="" ,n="0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return" e}function="" l(t,r,e){var="" n="" ;e="Math.min(t.length,e);for(var" i="r;i<e;++i)n+=String.fromCharCode(127&t[i]);return" n}function="" d(t,r,e){var="" x(t,r,e){var="">n)&&(e=n);for(var i="",o=r;o<e;++o)i+=z(t[o]);return i}function="" c(t,r,e){for(var="" n="t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return" m(t,r,e){if(t%1!="0||t<0)throw" new="" rangeerror("offset="" is="" not="" uint");if(t+r="">e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new="" rangeerror('"value"="" argument="" is="" out="" of="" bounds');if(e+n="">t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i="0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))">>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i="0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r">>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new="" rangeerror("index="" out="" of="" range")}function="" j(t,r,n,i,o){return="" o||f(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function="" q(t,r,n,i,o){return="" o||f(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice="function(t,r){var" e,n="this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t">n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.typed_array_support)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i="r-t;e=new" f(i,void="" 0);for(var="" o="0;o<i;++o)e[o]=this[o+t]}return" e},f.prototype.readuintle="function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var" n="this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return" n},f.prototype.readuintbe="function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var">0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readuint16be=function(t,r){return r||m(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readuint32le="function(t,r){return" r||m(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readuint32be="function(t,r){return" r||m(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readintle="function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var" n="this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return">=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readint16be="function(t,r){r||M(t,2,this.length);var" e="this[t+1]|this[t]<<8;return" 32768&e?4294901760|e:e},f.prototype.readint32le="function(t,r){return" r||m(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readint32be="function(t,r){return" r||m(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readfloatle="function(t,r){return" r||m(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readfloatbe="function(t,r){return" r||m(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readdoublele="function(t,r){return" r||m(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readdoublebe="function(t,r){return" r||m(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeuintle="function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var" i="1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return" r+e},f.prototype.writeuintbe="function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var">=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t u="">>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t u="">>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeint16le=function(t,r,e){return t="+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t">>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.typed_array_support?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0="==t.length||0===this.length)return" 0;if(r<0)throw="" new="" rangeerror("targetstart="" out="" of="" bounds");if(e<0||e="">=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new="" rangeerror("sourceend="" out="" of="" bounds");n="">this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o="n-e;if(this===t&&e<r&&r<n)for(i=o-1;i">=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.typed_array_support)for(i=0;i<o;++i)t[i+r]=this[i+e];else uint8array.prototype.set.call(t,this.subarray(e,e+o),r);return="" o},f.prototype.fill="function(t,r,e,n){if("string"==typeof" t){if("string"="=typeof" r?(n="r,r=0,e=this.length):"string"==typeof" e&&(n="e,e=this.length),1===t.length){var" i="t.charCodeAt(0);i<256&&(t=i)}if(void" 0!="=n&&"string"!=typeof" n)throw="" new="" typeerror("encoding="" must="" be="" a="" string");if("string"="=typeof" n&&!f.isencoding(n))throw="" typeerror("unknown="" encoding:="" "+n)}else"number"="=typeof" t&&(t&="255);if(r<0||this.length<r||this.length<e)throw" rangeerror("out="" of="" range="" index");if(e<="r)return" this;var="" o;if(r="">>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u="f.isBuffer(t)?t:$(new" f(t,n).tostring()),s="u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return" this};var="" v="/[^+\/0-9A-Za-z-_]/g;function" x(t){if((t="J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return" t}function="" j(t){return="" t.trim?t.trim():t.replace(="" ^\s+|\s+$="" g,"")}function="" z(t){return="" t<16?"0"+t.tostring(16):t.tostring(16)}function="" $(t,r){var="" e;r="r||1/0;for(var" n="t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))">55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-="3)">-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-="2)<0)break;o.push(e">>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new="" error("invalid="" code="" point");if((r-="4)<0)break;o.push(e">>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charcodeat(e));return r}function="" h(t,r){for(var="" e,n,i,o="[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))">>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"yh9p","ieee754":"JgNJ","isarray":"REa7","buffer":"dskh"}],"pBGv":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun="t,this.array=e}function" p(){}n.nexttick="function(t){var" e="new" array(arguments.length-1);if(arguments.length="">1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!="=s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw" new="" error("process.binding="" is="" not="" supported")},n.cwd="function(){return"/"},n.chdir=function(t){throw" error("process.chdir="" supported")},n.umask="function(){return" 0};="" },{}],"9k6g":[function(require,module,exports)="" {="" var="" define;="" buffer="require("buffer").Buffer;" global="arguments[3];" process="require("process");" t,e="require("buffer").Buffer,i=arguments[3],r=require("process");function" n(t){return(n="function" =="typeof" symbol&&"symbol"="=typeof" symbol.iterator?function(t){return="" typeof="" t}:function(t){return="" t&&"function"="=typeof" symbol&&t.constructor="==Symbol&&t!==Symbol.prototype?"symbol":typeof" t})(t)}var="" s="s||{version:"3.3.0"};if("undefined"!=typeof" exports?exports.fabric="s:"function"==typeof" t&&t.amd&&t([],function(){return="" s}),"undefined"!="typeof" document&&"undefined"!="typeof" window)document="" instanceof("undefined"!="typeof" htmldocument?htmldocument:document)?s.document="document:s.document=document.implementation.createHTMLDocument(""),s.window=window;else{var" o="require("jsdom"),a=new" o.jsdom(decodeuricomponent("%3c!doctype%20html%3e%3chtml%3e%3chead%3e%3c%2fhead%3e%3cbody%3e%3c%2fbody%3e%3c%2fhtml%3e"),{features:{fetchexternalresources:["img"]},resources:"usable"}).window;s.document="a.document,s.jsdomImplForWrapper=require("jsdom/lib/jsdom/living/generated/utils").implForWrapper,s.nodeCanvas=require("jsdom/lib/jsdom/utils").Canvas,s.window=a,DOMParser=s.window.DOMParser}if(s.isTouchSupported="ontouchstart"in" s.window||"ontouchstart"in="" s.document||s.window&&s.window.navigator&&s.window.navigator.maxtouchpoints="">0,s.isLikelyNode=void 0!==e&&"undefined"==typeof window,s.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],s.DPI=96,s.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",s.fontPaths={},s.iMatrix=[1,0,0,1,0,0],s.perfLimitSizeTotal=2097152,s.maxCacheSideLimit=4096,s.minCacheSideLimit=256,s.charWidthsCache={},s.textureSize=2048,s.disableStyleCopyPaste=!1,s.enableGLFiltering=!0,s.devicePixelRatio=s.window.devicePixelRatio||s.window.webkitDevicePixelRatio||s.window.mozDevicePixelRatio||1,s.browserShadowBlurConstant=1,s.arcToSegmentsCache={},s.boundsOfCurveCache={},s.cachesBoundsOfCurve=!0,s.forceGLPutImageData=!1,s.initFilterBackend=function(){return s.enableGLFiltering&&s.isWebglSupported&&s.isWebglSupported(s.textureSize)?(console.log("max texture size: "+s.maxTextureSize),new s.WebglFilterBackend({tileSize:s.textureSize})):s.Canvas2dFilterBackend?new s.Canvas2dFilterBackend:void 0},"undefined"!=typeof document&&"undefined"!=typeof window&&(window.fabric=s),void 0===h)var h={};if(function(t){"use strict";t.modifyEventListener=!1,t.modifySelectors=!1,t.configure=function(e){isFinite(e.modifyEventListener)&&(t.modifyEventListener=e.modifyEventListener),isFinite(e.modifySelectors)&&(t.modifySelectors=e.modifySelectors),!1===p&&t.modifyEventListener&&v(),!1===m&&t.modifySelectors&&y()},t.add=function(t,e,r,n){return i(t,e,r,n,"add")},t.remove=function(t,e,r,n){return i(t,e,r,n,"remove")},t.returnFalse=function(t){return!1},t.stop=function(t){t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.cancelBubbleCount=0)},t.prevent=function(t){t&&(t.preventDefault?t.preventDefault():t.preventManipulation?t.preventManipulation():t.returnValue=!1)},t.cancel=function(e){t.stop(e),t.prevent(e)},t.blur=function(){var t=document.activeElement;if(t){var e=document.activeElement.nodeName;"INPUT"!==e&&"TEXTAREA"!==e&&"true"!==t.contentEditable||t.blur&&t.blur()}},t.getEventSupport=function(t,e){if("string"==typeof t&&(e=t,t=window),(e="on"+e)in t)return!0;if(t.setAttribute||(t=document.createElement("div")),t.setAttribute&&t.removeAttribute){t.setAttribute(e,"");var i="function"==typeof t[e];return void 0!==t[e]&&(t[e]=null),t.removeAttribute(e),i}};var e=function t(e){if(!e||"object"!==n(e))return e;var i=new e.constructor;for(var r in e)e[r]&&"object"===n(e[r])?i[r]=t(e[r]):i[r]=e[r];return i},i=function i(o,a,u,p,v,m){if(p=p||{},"[object Object]"===String(o)){var y=o;if(o=y.target,delete y.target,!y.type||!y.listener){for(var _ in y){var x=y[_];"function"!=typeof x&&(p[_]=x)}var b={};for(var C in y){_=C.split(",");var S=y[C],w={};for(var T in p)w[T]=p[T];if("function"==typeof S)u=S;else{if("function"!=typeof S.listener)continue;u=S.listener;for(var T in S)"function"!=typeof S[T]&&(w[T]=S[T])}for(var O=0;O<_.length;o++)b[c]=h.add(o,_[o],u,w,v)}return b}for(var="" c="" in="" a="y.type,delete" y.type,u="y.listener,delete" y.listener,y)p[c]="y[C]}if(o&&a&&u){if("string"==typeof" o&&"ready"="==a){if(!window.eventjs_stallOnReady){var" p="(new" date).gettime(),k="p.timeout,E=p.interval||1e3/60,D=window.setInterval(function(){(new" date).gettime()-p="">k&&window.clearInterval(D),document.querySelector(o)&&(window.clearInterval(D),setTimeout(u,1))},E);return}a="load",o=window}if("string"==typeof o){if(0===(o=document.querySelectorAll(o)).length)return s("Missing target on listener!",arguments);1===o.length&&(o=o[0])}var M,j={};if(o.length>0&&o!==window){for(var A=0,F=o.length;A<f;a++)(m=i(o[a],a,u,e(p),v))&&(j[a]=m);return 0="==h)h={};if(void" r(j)}if("string"="=typeof" a&&(-1!="=(a=a.toLowerCase()).indexOf("" ")?a="a.split("" "):-1!="=a.indexOf(",")&&(a=a.split(","))),"string"!=typeof" a){if("number"="=typeof" a.length)for(var="" l="0,I=a.length;L<I;L++)(M=i(o,a[L],u,e(p),v))&&(j[a[L]]=M);else" for(var="" c="" in="" a)(m="function" =="typeof" a[c]?i(o,c,a[c],e(p),v):i(o,c,a[c].listener,e(a[c]),v))&&(j[c]="M);return" r(j)}if(0="==a.indexOf("on")&&(a=a.substr(2)),"object"!==n(o))return" s("target="" is="" not="" defined!",arguments);if("function"!="typeof" u)return="" s("listener="" a="" function!",arguments);var="" b="p.useCapture||!1,R=f(o)+"."+f(u)+"."+(B?1:0);if(t.Gesture&&t.Gesture._gestureHandlers[a]){if(R=a+R,"remove"===v){if(!l[R])return;l[R].remove(),delete" l[r]}else="" if("add"="==v){if(l[R])return" l[r].add(),l[r];if(p.usecall&&!t.modifyeventlistener){var="" x="u;u=function(t,e){for(var" i="" e)t[i]="e[i];return" x.call(o,t)}}p.gesture="a,p.target=o,p.listener=u,p.fromOverwrite=m,l[R]=t.proxy[a](p)}return" l[r]}var="" y,g="c(a);for(O=0;O<G.length;O++)if(Y=(a=G[O])+"."+R,"remove"===v){if(!l[Y])continue;o[g](a,u,B),delete" l[y]}else="" l[y];o[d](a,u,b),l[y]="{id:Y,type:a,target:o,listener:u,remove:function(){for(var" e="0;e<G.length;e++)t.remove(o,G[e],u,p)}}}return" l[y]}},r="function(t){return{remove:function(){for(var" t)t[e].remove()},add:function(){for(var="" t)t[e].add()}}},s="function(t,e){"undefined"!=typeof" console&&void="" 0!="=console.error&&console.error(t,e)},o={msPointer:["MSPointerDown","MSPointerMove","MSPointerUp"],touch:["touchstart","touchmove","touchend"],mouse:["mousedown","mousemove","mouseup"]},a={MSPointerDown:0,MSPointerMove:1,MSPointerUp:2,touchstart:0,touchmove:1,touchend:2,mousedown:0,mousemove:1,mouseup:2},c=(t.supports={},window.navigator.msPointerEnabled&&(t.supports.msPointer=!0),t.getEventSupport("touchstart")&&(t.supports.touch=!0),t.getEventSupport("mousedown")&&(t.supports.mouse=!0),function(e){var" n="[];for(var" s="" t.supports)n.push(i+o[s][r]);return="" n}return[i+e]}),l="{},u=0,f=function(t){return" t="==window?"#window":t===document?"#document":(t.uniqueID||(t.uniqueID="e"+u++),t.uniqueID)},d=document.addEventListener?"addEventListener":"attachEvent",g=document.removeEventListener?"removeEventListener":"detachEvent";t.createPointerEvent=function(e,i,r){var" h="document.createEvent("Event");for(var" h.initevent(n,!0,!0),h.originalevent="e,i)"target"!==c&&(h[c]=i[c]);var" p="!1,v=function(){if(window.HTMLElement){var" r="function(r){var" strict";t.pointersetup="function(t,e){t.target=t.target||window,t.doc=t.target.ownerDocument||t.target,t.minFingers=t.minFingers||t.fingers||1,t.maxFingers=t.maxFingers||t.fingers||1/0,t.position=t.position||"relative",delete" t.fingers,(e="e||{}).enabled=!0,e.gesture=t.gesture,e.target=t.target,e.env=t.env,h.modifyEventListener&&t.fromOverwrite&&(t.oldListener=t.listener,t.listener=h.createPointerEvent);var" t.oldlistener&&(e.oldlistener="t.oldListener),e.listener=t.listener,e.proxy=function(i){e.defaultListener=t.listener,t.listener=i,i(t.event,e)},e.add=function(){!0!==e.enabled&&(t.onPointerDown&&h.add(t.target,r+"down",t.onPointerDown),t.onPointerMove&&h.add(t.doc,r+"move",t.onPointerMove),t.onPointerUp&&h.add(t.doc,r+"up",t.onPointerUp),e.enabled=!0)},e.remove=function(){!1!==e.enabled&&(t.onPointerDown&&h.remove(t.target,r+"down",t.onPointerDown),t.onPointerMove&&h.remove(t.doc,r+"move",t.onPointerMove),t.onPointerUp&&h.remove(t.doc,r+"up",t.onPointerUp),e.reset(),e.enabled=!1)},e.pause=function(e){!t.onPointerMove||e&&!e.move||h.remove(t.doc,r+"move",t.onPointerMove),!t.onPointerUp||e&&!e.up||h.remove(t.doc,r+"up",t.onPointerUp),i=t.fingers,t.fingers=0},e.resume=function(e){!t.onPointerMove||e&&!e.move||h.add(t.doc,r+"move",t.onPointerMove),!t.onPointerUp||e&&!e.up||h.add(t.doc,r+"up",t.onPointerUp),t.fingers=i},e.reset=function(){t.tracker={},t.fingers=0},e};var" date).gettime(),n.move="{x:s,y:o},n.start={x:s,y:o},r.fingers++};r.event=e,i.defaultListener&&(r.listener=i.defaultListener,delete" i.defaultlistener);for(var="" o="!r.fingers,a=r.tracker,c=e.changedTouches||t.getCoords(e),l=c.length,u=0;u<l;u++){var" f="c[u],d=f.identifier||1/0;if(r.fingers){if(r.fingers">=r.maxFingers){var g=[];for(var d in r.tracker)g.push(d);return i.identifier=g.join(","),o}for(var p in a){if(a[p].up){delete a[p],s(f,d),r.cancel=!0;break}0}if(a[d])continue;s(f,d)}else a=r.tracker={},i.bbox=r.bbox=t.getBoundingBox(r.target),r.fingers=0,r.cancel=!1,s(f,d)}g=[];for(var d in r.tracker)g.push(d);return i.identifier=g.join(","),o},t.pointerEnd=function(t,e,i,r){for(var n=t.touches||[],s=n.length,o={},a=0;a<s;a++){o[(h=n[a].identifier)||1 0="==h)h={};if(h.MutationObserver=function(){var" 0]="!0}for(var" h="" in="" i.tracker){var="" c="i.tracker[h];o[h]||c.up||(r&&r({pageX:c.pageX,pageY:c.pageY,changedTouches:[{pageX:c.pageX,pageY:c.pageY,identifier:"Infinity"===h?1/0:h}]},"up"),c.up=!0,i.fingers--)}if(0!==i.fingers)return!1;var" l="[];for(var" i.gesturefingers="0,i.tracker)i.gestureFingers++,l.push(h);return" e.identifier="l.join(","),!0},t.getCoords=function(e){return" void="" 0!="=e.pageX?t.getCoords=function(t){return" array({type:"mouse",x:t.pagex,y:t.pagey,pagex:t.pagex,pagey:t.pagey,identifier:t.pointerid||1="" 0})}:t.getcoords="function(t){var" e="document.documentElement;return" t="t||window.event,Array({type:"mouse",x:t.clientX+e.scrollLeft,y:t.clientY+e.scrollTop,pageX:t.clientX+e.scrollLeft,pageY:t.clientY+e.scrollTop,identifier:1/0})},t.getCoords(e)},t.getCoord=function(e){if("ontouchstart"in" window){var="" i="0,r=0;t.getCoord=function(t){var" e&&e.length?{x:i="e[0].pageX,y:r=e[0].pageY}:{x:i,y:r}}}else" t.getcoord(e)};var="" i,r,n,s="function(t,e){var" isfinite(i)?i:0};return="" t.getboundingbox="function(t){t!==window&&t!==document||(t=document.body);var" r="s(c,"border-left-width"),n=s(c,"border-right-width"),o=s(c,"border-bottom-width"),a=s(c,"border-top-width");e.border=[r,n,a,o],e.x1+=r,e.y1+=a,e.width-=n+r,e.height-=o+a}e.x2=e.x1+e.width,e.y2=e.y1+e.height;for(var" =="=(l=c.getPropertyValue("position"))?t:t.parentNode;null!==h&&h!==document.body&&void" c,l;if("absolute"="==(l=(c=window.getComputedStyle(h)).getPropertyValue("position")));else{if("fixed"===l){e.scrollTop-=h.parentNode.scrollTop,e.scrollLeft-=h.parentNode.scrollLeft;break}e.scrollLeft+=h.scrollLeft,e.scrollTop+=h.scrollTop}h=h.parentNode}return" e.scrollbodyleft="void" t.setattribute("id","target"),e}();return="" function(i,r){if(t){new="" t(function(t){t.foreach(function(t){r.call(t.target,t.attributename)})}).observe(i,{subtree:!1,attributes:!0})}else="" e?h.add(i,"domattrmodified",function(t){r.call(i,t.attrname)}):"onpropertychange"in="" document.body&&h.add(i,"propertychange",function(t){r.call(i,window.event.propertyname)})}}(),void="" strict";return="" t.click="function(e){e.gesture=e.gesture||"click",e.maxFingers=e.maxFingers||e.fingers||1,e.onPointerDown=function(r){t.pointerStart(r,i,e)&&h.add(e.target,"mouseup",e.onPointerUp)},e.onPointerUp=function(r){if(t.pointerEnd(r,i,e)){h.remove(e.target,"mouseup",e.onPointerUp);var" n="(r.changedTouches||t.getCoords(r))[0],s=e.bbox,o=t.getBoundingBox(e.target),a=n.pageY-o.scrollBodyTop,c=n.pageX-o.scrollBodyLeft;if(c">s.x1&&a>s.y1&&c<s.x2&&a<s.y2&&s.scrolltop===o.scrolltop){for(var 0="==h)h={};if(void" l="" in="" e.tracker)break;var="" u="e.tracker[l];i.x=u.start.x,i.y=u.start.y,e.listener(r,i)}}};var" i="t.pointerSetup(e);return" i.state="click" ,h.add(e.target,"mousedown",e.onpointerdown),i},h.gesture="h.Gesture||{},h.Gesture._gestureHandlers=h.Gesture._gestureHandlers||{},h.Gesture._gestureHandlers.click=t.click,t}(h.proxy),void" strict";return="" t.dbltap="t.dblclick=function(e){e.gesture=e.gesture||"dbltap",e.maxFingers=e.maxFingers||e.fingers||1;var" i,r,n,s,o;e.onpointerdown="function(c){var" date).gettime()-i):(s="l[0],i=(new" date).gettime(),r="0,clearTimeout(n),n=setTimeout(function(){i=0},700)),t.pointerStart(c,a,e)&&(h.add(e.target,"mousemove",e.onPointerMove).listener(c),h.add(e.target,"mouseup",e.onPointerUp))},e.onPointerMove=function(a){if(i&&!r){var" c="a.changedTouches||t.getCoords(a);o=c[0]}var">0&&u<l.width&&f>0&&f<l.height&&math.abs(o.pagex-s.pagex)<=25&&math.abs(o.pagey-s.pagey)<=25||(h.remove(e.target,"mousemove",e.onpointermove),cleartimeout(n),i=r=0)},e.onpointerup=function(s){if(t.pointerend(s,a,e)&&(h.remove(e.target,"mousemove",e.onpointermove),h.remove(e.target,"mouseup",e.onpointerup)),i&&r){if(r<=700){for(var 0="==h)h={};if(void" o="" in="" a.state="e.gesture,e.tracker)break;var" c="e.tracker[o];a.x=c.start.x,a.y=c.start.y,e.listener(s,a)}clearTimeout(n),i=r=0}};var" a="t.pointerSetup(e);return" ,h.add(e.target,"mousedown",e.onpointerdown),a},h.gesture="h.Gesture||{},h.Gesture._gestureHandlers=h.Gesture._gestureHandlers||{},h.Gesture._gestureHandlers.dbltap=t.dbltap,h.Gesture._gestureHandlers.dblclick=t.dblclick,t}(h.proxy),void" strict";return="" t.dragelement="function(e,i){t.drag({event:i,target:e,position:"move",listener:function(t,i){e.style.left=i.x+"px",e.style.top=i.y+"px",h.prevent(t)}})},t.drag=function(e){e.gesture="drag",e.onPointerDown=function(r){t.pointerStart(r,i,e)&&(e.monitor||(h.add(e.doc,"mousemove",e.onPointerMove),h.add(e.doc,"mouseup",e.onPointerUp))),e.onPointerMove(r,"down")},e.onPointerMove=function(r,n){if(!e.tracker)return" e.onpointerdown(r);e.bbox;for(var="" s="r.changedTouches||t.getCoords(r),o=s.length,a=0;a<o;a++){var" h="s[a],c=h.identifier||1/0,l=e.tracker[c];l&&(l.pageX=h.pageX,l.pageY=h.pageY,i.state=n||"move",i.identifier=c,i.start=l.start,i.fingers=e.fingers,"differenceFromLast"===e.position?(i.x=l.pageX-l.offsetX,i.y=l.pageY-l.offsetY,l.offsetX=l.pageX,l.offsetY=l.pageY):(i.x=l.pageX-l.offsetX,i.y=l.pageY-l.offsetY),e.listener(r,i))}},e.onPointerUp=function(r){t.pointerEnd(r,i,e,e.onPointerMove)&&(e.monitor||(h.remove(e.doc,"mousemove",e.onPointerMove),h.remove(e.doc,"mouseup",e.onPointerUp)))};var" i="t.pointerSetup(e);return" e.event?e.onpointerdown(e.event):(h.add(e.target,"mousedown",e.onpointerdown),e.monitor&&(h.add(e.doc,"mousemove",e.onpointermove),h.add(e.doc,"mouseup",e.onpointerup))),i},h.gesture="h.Gesture||{},h.Gesture._gestureHandlers=h.Gesture._gestureHandlers||{},h.Gesture._gestureHandlers.drag=t.drag,t}(h.proxy),void" strict";var="" e="Math.PI/180,i=function(t,e){var" e){var="" t.x="i/=n,t.y=r/=n,t};return" t.gesture="function(r){r.gesture=r.gesture||"gesture",r.minFingers=r.minFingers||r.fingers||2,r.onPointerDown=function(e){var" ;for(var="" r.tracker)o+="a;n.identifier=parseInt(o),i(n,r.tracker),r.listener(e,n)}},r.onPointerMove=function(s,o){for(var" u="h[p=(v=f[l]).identifier||1/0];u&&(u.move.x=v.pageX-a.x1,u.move.y=v.pageY-a.y1)}if(!(r.fingers<r.minFingers)){var" f="[],d=0,g=0;for(var" p="" i(n,h),h){var="" v;if(!(v="h[p]).up){var" m="v.start;if(!m.distance){var" y="m.x-n.x,_=m.y-n.y;m.distance=Math.sqrt(y*y+_*_),m.angle=Math.atan2(y,_)/e}y=v.move.x-n.x,_=v.move.y-n.y;d+=Math.sqrt(y*y+_*_)/m.distance;var" x="Math.atan2(y,_)/e,b=(m.angle-x+360)%360-180;v.DEG2=v.DEG1,v.DEG1=b">0?b:-b,void 0!==v.DEG2&&(b>0?v.rotation+=v.DEG1-v.DEG2:v.rotation-=v.DEG1-v.DEG2,g+=v.rotation),f.push(v.move)}}n.touches=f,n.fingers=r.fingers,n.scale=d/r.fingers,n.rotation=g/r.fingers,n.state="change",r.listener(s,n)}},r.onPointerUp=function(e){var i=r.fingers;t.pointerEnd(e,n,r)&&(h.remove(r.doc,"mousemove",r.onPointerMove),h.remove(r.doc,"mouseup",r.onPointerUp)),i===r.minFingers&&r.fingers<r.minfingers&&(n.fingers=r.fingers,n.state="end",r.listener(e,n))};var 0="==h)h={};if(void" n="t.pointerSetup(r);return" h.add(r.target,"mousedown",r.onpointerdown),n},h.gesture="h.Gesture||{},h.Gesture._gestureHandlers=h.Gesture._gestureHandlers||{},h.Gesture._gestureHandlers.gesture=t.gesture,t}(h.proxy),void" strict";return="" t.pointerdown="t.pointermove=t.pointerup=function(e){if(e.gesture=e.gesture||"pointer",!e.target.isPointerEmitter){var" i="!0;e.onPointerDown=function(t){i=!1,r.gesture="pointerdown",e.listener(t,r)},e.onPointerMove=function(t){r.gesture="pointermove",e.listener(t,r,i)},e.onPointerUp=function(t){i=!0,r.gesture="pointerup",e.listener(t,r,!0)};var" r="t.pointerSetup(e);return" h.add(e.target,"mousedown",e.onpointerdown),h.add(e.target,"mousemove",e.onpointermove),h.add(e.doc,"mouseup",e.onpointerup),e.target.ispointeremitter="!0,r}},h.Gesture=h.Gesture||{},h.Gesture._gestureHandlers=h.Gesture._gestureHandlers||{},h.Gesture._gestureHandlers.pointerdown=t.pointerdown,h.Gesture._gestureHandlers.pointermove=t.pointermove,h.Gesture._gestureHandlers.pointerup=t.pointerup,t}(h.proxy),void" t.shake="function(t){var" e="{gesture:"devicemotion",acceleration:{},accelerationIncludingGravity:{},target:t.target,listener:t.listener,remove:function(){window.removeEventListener("devicemotion",s,!1)}},i=(new" date).gettime(),r="{x:0,y:0,z:0},n={x:{count:0,value:0},y:{count:0,value:0},z:{count:0,value:0}},s=function(s){var" o="s.accelerationIncludingGravity;if(r.x=.8*r.x+(1-.8)*o.x,r.y=.8*r.y+(1-.8)*o.y,r.z=.8*r.z+(1-.8)*o.z,e.accelerationIncludingGravity=r,e.acceleration.x=o.x-r.x,e.acceleration.y=o.y-r.y,e.acceleration.z=o.z-r.z,"devicemotion"!==t.gesture)for(var" a="(new" date).gettime(),h="0,c="xyz".length;h<c;h++){var" l="xyz" [h],u="e.acceleration[l],f=n[l],d=Math.abs(u);if(!(a-i<1e3)&&d">4){var g=a*u/d,p=Math.abs(g+f.value);f.value&&p<200?(f.value=g,f.count++,3===f.count&&(t.listener(s,e),i=a,f.value=0,f.count=0)):(f.value=g,f.count=1)}}else 0="==h)h={};if(void" t.listener(s,e)};if(window.addeventlistener)return="" window.addeventlistener("devicemotion",s,!1),e},h.gesture="h.Gesture||{},h.Gesture._gestureHandlers=h.Gesture._gestureHandlers||{},h.Gesture._gestureHandlers.shake=t.shake,t}(h.proxy),void" strict";var="" e="Math.PI/180;return" t.swipe="function(i){i.snap=i.snap||90,i.threshold=i.threshold||1,i.gesture=i.gesture||"swipe",i.onPointerDown=function(e){t.pointerStart(e,r,i)&&(h.add(i.doc,"mousemove",i.onPointerMove).listener(e),h.add(i.doc,"mouseup",i.onPointerUp))},i.onPointerMove=function(e){for(var" r="e.changedTouches||t.getCoords(e),n=r.length,s=0;s<n;s++){var" o="r[s],a=o.identifier||1/0,h=i.tracker[a];h&&(h.move.x=o.pageX,h.move.y=o.pageY,h.moveTime=(new" date).gettime())}},i.onpointerup="function(n){if(t.pointerEnd(n,r,i)){var" s,o;h.remove(i.doc,"mousemove",i.onpointermove),h.remove(i.doc,"mouseup",i.onpointerup);var="" a="{x:0,y:0},c=0,l=0,u=0;for(var" f="" in="" i.tracker){var="" d="i.tracker[f],g=d.move.x-d.start.x,p=d.move.y-d.start.y;c+=d.move.x,l+=d.move.y,a.x+=d.start.x,a.y+=d.start.y,u++;var" v="Math.sqrt(g*g+p*p),m=d.moveTime-d.startTime,y=Math.atan2(g,p)/e+180,_=m?v/m:0;if(void" x="i.gestureFingers;i.minFingers<=x&&i.maxFingers">=x&&s>i.threshold&&(a.x/=u,a.y/=u,r.start=a,r.x=c/u,r.y=l/u,r.angle=-(((o/i.snap+.5>>0)*i.snap||360)-360),r.velocity=s,r.fingers=x,r.state="swipe",i.listener(n,r))}};var r=t.pointerSetup(i);return h.add(i.target,"mousedown",i.onPointerDown),r},h.Gesture=h.Gesture||{},h.Gesture._gestureHandlers=h.Gesture._gestureHandlers||{},h.Gesture._gestureHandlers.swipe=t.swipe,t}(h.proxy),void 0===h)h={};if(void 0===h.proxy&&(h.proxy={}),h.proxy=function(t){"use strict";return t.longpress=function(e){return e.gesture="longpress",t.tap(e)},t.tap=function(e){var i,r;e.delay=e.delay||500,e.timeout=e.timeout||250,e.driftDeviance=e.driftDeviance||10,e.gesture=e.gesture||"tap",e.onPointerDown=function(s){if(t.pointerStart(s,n,e)){if(i=(new Date).getTime(),h.add(e.doc,"mousemove",e.onPointerMove).listener(s),h.add(e.doc,"mouseup",e.onPointerUp),"longpress"!==e.gesture)return;r=setTimeout(function(){if(!(s.cancelBubble&&++s.cancelBubbleCount>1)){var t=0;for(var i in e.tracker){var r=e.tracker[i];if(!0===r.end)return;if(e.cancel)return;t++}e.minFingers<=t&&e.maxfingers>=t&&(n.state="start",n.fingers=t,n.x=r.start.x,n.y=r.start.y,e.listener(s,n))}},e.delay)}},e.onPointerMove=function(i){for(var r=e.bbox,n=i.changedTouches||t.getCoords(i),s=n.length,o=0;o<s;o++){var a="n[o],c=a.identifier||1/0,l=e.tracker[c];if(l){var" u="a.pageX-r.x1,f=a.pageY-r.y1,d=u-l.start.x,g=f-l.start.y,p=Math.sqrt(d*d+g*g);if(!(u">0&&u<r.width&&f>0&&f<r.height&&p<=e.driftdeviance))return h.remove(e.doc,"mousemove",e.onpointermove),void(e.cancel="!0)}}},e.onPointerUp=function(s){if(t.pointerEnd(s,n,e)){if(clearTimeout(r),h.remove(e.doc,"mousemove",e.onPointerMove),h.remove(e.doc,"mouseup",e.onPointerUp),s.cancelBubble&&++s.cancelBubbleCount">1)return;if("longpress"===e.gesture)return void("start"===n.state&&(n.state="end",e.listener(s,n)));if(e.cancel)return;if((new Date).getTime()-i>e.timeout)return;var o=e.gestureFingers;e.minFingers<=o&&e.maxfingers>=o&&(n.state="tap",n.fingers=e.gestureFingers,e.listener(s,n))}};var n=t.pointerSetup(e);return h.add(e.target,"mousedown",e.onPointerDown),n},h.Gesture=h.Gesture||{},h.Gesture._gestureHandlers=h.Gesture._gestureHandlers||{},h.Gesture._gestureHandlers.tap=t.tap,h.Gesture._gestureHandlers.longpress=t.longpress,t}(h.proxy),void 0===h)h={};if(void 0===h.proxy&&(h.proxy={}),h.proxy=function(t){"use strict";return t.wheelPreventElasticBounce=function(t){t&&("string"==typeof t&&(t=document.querySelector(t)),h.add(t,"wheel",function(t,e){e.preventElasticBounce(),h.stop(t)}))},t.wheel=function(t){var e,i=t.timeout||150,r=0,n={gesture:"wheel",state:"start",wheelDelta:0,target:t.target,listener:t.listener,preventElasticBounce:function(t){var e=this.target,i=e.scrollTop;i+e.offsetHeight===e.scrollHeight&&this.wheelDelta<=0?h.cancel(t):0===i&&this.wheeldelta>=0&&h.cancel(t),h.stop(t)},add:function(){t.target[o](c,s,!1)},remove:function(){t.target[a](c,s,!1)}},s=function(s){s=s||window.event,n.state=r++?"change":"start",n.wheelDelta=s.detail?-20*s.detail:s.wheelDelta,t.listener(s,n),clearTimeout(e),e=setTimeout(function(){r=0,n.state="end",n.wheelDelta=0,t.listener(s,n)},i)},o=document.addEventListener?"addEventListener":"attachEvent",a=document.removeEventListener?"removeEventListener":"detachEvent",c=h.getEventSupport("mousewheel")?"mousewheel":"DOMMouseScroll";return t.target[o](c,s,!1),n},h.Gesture=h.Gesture||{},h.Gesture._gestureHandlers=h.Gesture._gestureHandlers||{},h.Gesture._gestureHandlers.wheel=t.wheel,t}(h.proxy),void 0===c)var c={};function l(t){var e=t.targetCanvas,i=e.width,r=e.height,n=t.destinationWidth,s=t.destinationHeight;i===n&&r===s||(e.width=n,e.height=s)}function u(t,e){var i=t.canvas,r=e.targetCanvas,n=r.getContext("2d");n.translate(0,r.height),n.scale(1,-1);var s=i.height-r.height;n.drawImage(i,0,s,r.width,r.height,0,0,r.width,r.height)}function f(t,e){var i=e.targetCanvas.getContext("2d"),r=e.destinationWidth,n=e.destinationHeight,s=r*n*4,o=new Uint8Array(this.imageBuffer,0,s),a=new Uint8ClampedArray(this.imageBuffer,0,s);t.readPixels(0,0,r,n,t.RGBA,t.UNSIGNED_BYTE,o);var h=new ImageData(a,r,n);i.putImageData(h,0,0)}void 0===c.proxy&&(c.proxy={}),c.proxy=function(t){"use strict";return t.orientation=function(t){var e={gesture:"orientationchange",previous:null,current:window.orientation,target:t.target,listener:t.listener,remove:function(){window.removeEventListener("orientationchange",i,!1)}},i=function(i){e.previous=e.current,e.current=window.orientation,null===e.previous||e.previous==e.current||t.listener(i,e)};return window.DeviceOrientationEvent&&window.addEventListener("orientationchange",i,!1),e},c.Gesture=c.Gesture||{},c.Gesture._gestureHandlers=c.Gesture._gestureHandlers||{},c.Gesture._gestureHandlers.orientation=t.orientation,t}(c.proxy),function(){function t(t,e){if(this.__eventListeners[t]){var i=this.__eventListeners[t];e?i[i.indexOf(e)]=!1:s.util.array.fill(i,!1)}}function e(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in t)this.on(i,t[i]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function i(e,i){if(!this.__eventListeners)return this;if(0===arguments.length)for(e in this.__eventListeners)t.call(this,e);else if(1===arguments.length&&"object"===n(arguments[0]))for(var r in e)t.call(this,r,e[r]);else t.call(this,e,i);return this}function r(t,e){if(!this.__eventListeners)return this;var i=this.__eventListeners[t];if(!i)return this;for(var r=0,n=i.length;r<n;r++)i[r]&&i[r].call(this,e||{});return 0="==t?this._objects.concat():this._objects.filter(function(e){return" this.__eventlisteners[t]="i.filter(function(t){return!1!==t}),this}s.Observable={observe:e,stopObserving:i,fire:r,on:e,off:i,trigger:r}}(),s.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var" t="0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return" this.renderonaddremove&&this.requestrenderall(),this},insertat:function(t,e,i){var="" r="this._objects;return" i?r[e]="t:r.splice(e,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var" t,e="this._objects,i=!1,r=0,n=arguments.length;r<n;r++)-1!==(t=e.indexOf(arguments[r]))&&(i=!0,e.splice(t,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[r]));return" this.renderonaddremove&&i&&this.requestrenderall(),this},foreachobject:function(t,e){for(var="" i="this.getObjects(),r=0,n=i.length;r<n;r++)t.call(e,i[r],r,i);return" this},getobjects:function(t){return="" void="" e.type="==t})},item:function(t){return" this._objects[t]},isempty:function(){return="" this._objects.length},contains:function(t){return="" this._objects.indexof(t)="">-1},complexity:function(){return this._objects.reduce(function(t,e){return t+=e.complexity?e.complexity():0},0)}},s.CommonMethods={_setOptions:function(t){for(var e in t)this.set(e,t[e])},_initGradient:function(t,e){!t||!t.colorStops||t instanceof s.Gradient||this.set(e,new s.Gradient(t))},_initPattern:function(t,e,i){!t||!t.source||t instanceof s.Pattern?i&&i():this.set(e,new s.Pattern(t,i))},_initClipping:function(t){if(t.clipTo&&"string"==typeof t.clipTo){var e=s.util.getFunctionBody(t.clipTo);void 0!==e&&(this.clipTo=new Function("ctx",e))}},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"===n(t)?this._setObject(t):"function"==typeof e&&"clipTo"!==t?this._set(t,e(this.get(t))):this._set(t,e),this},_set:function(t,e){this[t]=e},toggle:function(t){var e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this},get:function(t){return this[t]}},function(t){var e=Math.sqrt,i=Math.atan2,r=Math.pow,n=Math.abs,o=Math.PI/180,a=Math.PI/2;s.util={cos:function(t){if(0===t)return 1;switch(t<0&&(t=-t),t a){case="" 1:case="" 3:return="" 0;case="" 2:return-1}return="" math.cos(t)},sin:function(t){if(0="==t)return" 0;var="" e="1;switch(t<0&&(e=-1),t/a){case" 1:return="" e;case="" 2:return="" 3:return-e}return="" math.sin(t)},removefromarray:function(t,e){var="" i="t.indexOf(e);return-1!==i&&t.splice(i,1),t},getRandomInt:function(t,e){return" math.floor(math.random()*(e-t+1))+t},degreestoradians:function(t){return="" t*o},radianstodegrees:function(t){return="" t="" o},rotatepoint:function(t,e,i){t.subtractequals(e);var="" r="s.util.rotateVector(t,i);return" new="" s.point(r.x,r.y).addequals(e)},rotatevector:function(t,e){var="" i?new="" s.point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new="" s.point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeboundingboxfrompoints:function(t){var="" i[4]="-r.x,i[5]=-r.y,i},toFixed:function(t,e){return" parsefloat(number(t).tofixed(e))},parseunit:function(t,e){var="" r*s.dpi="" 25.4;case"cm":return="" 2.54;case"in":return="" r*s.dpi;case"pt":return="" 72;case"pc":return="" 72*12;case"em":return="" r*e;default:return="" r}},falsefunction:function(){return!1},getklass:function(t,e){return="" e},resolvenamespace:function(e){if(!e)return="" s;var="" i,r="e.split("."),n=r.length,o=t||s.window;for(i=0;i<n;++i)o=o[r[i]];return" o},loadimage:function(t,e,i,r){if(t){var="" n="s.util.createImage(),o=function(){e&&e.call(i,n),n=n.onload=n.onerror=null};n.onload=o,n.onerror=function(){s.log("Error" loading="" "+n.src),e&&e.call(i,null,!0),n="n.onload=n.onerror=null},0!==t.indexOf("data")&&r&&(n.crossOrigin=r),"data:image/svg"===t.substring(0,14)&&(n.onload=null,s.util.loadImageInDom(n,o)),n.src=t}else" e&&e.call(i,t)},loadimageindom:function(t,e){var="" h(){++o="==a&&e&&e(n.filter(function(t){return" t}))}a?t.foreach(function(t,e){t&&t.type?s.util.getklass(t.type,i).fromobject(t,function(i,s){s||(n[e]="i),r&&r(t,i,s),h()}):h()}):e&&e(n)},enlivenPatterns:function(t,e){function" i(){++n="==o&&e&&e(r)}var" s.pattern(t,function(t){r[e]="t,i()}):(r[e]=t,i())}):e&&e(r)},groupSVGElements:function(t,e,i){var" r;return="" t&&1="==t.length?t[0]:(e&&(e.width&&e.height?e.centerPoint={x:e.width/2,y:e.height/2}:(delete" e.width,delete="" e.height)),r="new" s.group(t,e),void="" 0!="=i&&(r.sourcePath=i),r)},populateWithProperties:function(t,e,i){if(i&&"[object" array]"="==Object.prototype.toString.call(i))for(var" t&&(e[i[r]]="t[i[r]])},drawDashedLine:function(t,r,n,s,o,a){var" h="s-r,c=o-n,l=e(h*h+c*c),u=i(c,h),f=a.length,d=0,g=!0;for(t.save(),t.translate(r,n),t.moveTo(0,0),t.rotate(u),r=0;l">r;)(r+=a[d++%f])>l&&(r=l),t[g?"lineTo":"moveTo"](r,0),g=!g;t.restore()},createCanvasElement:function(){return s.document.createElement("canvas")},copyCanvasElement:function(t){var e=s.util.createCanvasElement();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e},toDataURL:function(t,e,i){return t.toDataURL("image/"+e,i)},createImage:function(){return s.document.createElement("img")},clipContext:function(t,e){e.save(),e.beginPath(),t.clipTo(e),e.clip()},multiplyTransformMatrices:function(t,e,i){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],i?0:t[0]*e[4]+t[2]*e[5]+t[4],i?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var n=i(t[1],t[0]),s=r(t[0],2)+r(t[1],2),a=e(s),h=(t[0]*t[3]-t[2]*t[1])/a,c=i(t[0]*t[2]+t[1]*t[3],s);return{angle:n/o,scaleX:a,scaleY:h,skewX:c/o,skewY:0,translateX:t[4],translateY:t[5]}},customTransformMatrix:function(t,e,i){var r=[1,0,n(Math.tan(i*o)),1],a=[n(t),0,0,n(e)];return s.util.multiplyTransformMatrices(a,r,!0)},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},saveObjectTransform:function(t){return{scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}},getFunctionBody:function(t){return(String(t).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(t,e,i,r){r>0&&(e>r?e-=r:e=0,i>r?i-=r:i=0);var n,s=!0,o=t.getImageData(e,i,2*r||1,2*r||1),a=o.data.length;for(n=3;n<a&&!1!==(s=o.data[n]<=0);n+=4);return o="null,s},parsePreserveAspectRatioAttribute:function(t){var" e,i="meet" ,r="t.split("" ");return="" r&&r.length&&("meet"!="=(i=r.pop())&&"slice"!==i?(e=i,i="meet"):r.length&&(e=r.pop())),{meetOrSlice:i,alignX:"none"!==e?e.slice(1,4):"none",alignY:"none"!==e?e.slice(5,8):"none"}},clearFabricFontCache:function(t){(t=(t||"").toLowerCase())?s.charWidthsCache[t]&&delete" s.charwidthscache[t]:s.charwidthscache="{}},limitDimsByArea:function(t,e){var" i="Math.sqrt(e*t),r=Math.floor(e/i);return{x:Math.floor(i),y:r}},capValue:function(t,e,i){return" math.max(t,math.min(e,i))},findscaletofit:function(t,e){return="" math.min(e.width="" t.width,e.height="" t.height)},findscaletocover:function(t,e){return="" math.max(e.width="" t.height)},matrixtosvg:function(t){return"matrix("+t.map(function(t){return="" s.util.tofixed(t,s.object.num_fraction_digits)}).join("="" ")+")"}}}("undefined"!="typeof" exports?exports:this),function(){var="" t="Array.prototype.join;function" e(e,n,o,a,h,c,l){var="" u="t.call(arguments);if(s.arcToSegmentsCache[u])return" s.arctosegmentscache[u];var="" f="Math.PI,d=l*f/180,g=s.util.sin(d),p=s.util.cos(d),v=0,m=0,y=-p*e*.5-g*n*.5,_=-p*n*.5+g*e*.5,x=(o=Math.abs(o))*o,b=(a=Math.abs(a))*a,C=_*_,S=y*y,w=x*b-x*C-b*S,T=0;if(w<0){var" p="T*o*_/a,k=-T*a*y/o,E=p*P-g*k+.5*e,D=g*P+p*k+.5*n,M=r(1,0,(y-P)/o,(_-k)/a),j=r((y-P)/o,(_-k)/a,(-y-P)/o,(-_-k)/a);0===c&&j">0?j-=2*f:1===c&&j<0&&(j+=2*f);for(var a="Math.ceil(Math.abs(j/f*2)),F=[],L=j/A,I=8/3*Math.sin(L/4)*Math.sin(L/4)/Math.sin(L/2),B=M+L,R=0;R<A;R++)F[R]=i(M,B,p,g,o,a,E,D,I,v,m),v=F[R][4],m=F[R][5],M=B,B+=L;return" s.arctosegmentscache[u]="F,F}function" i(t,e,i,r,n,o,a,h,c,l,u){var="" f="s.util.cos(t),d=s.util.sin(t),g=s.util.cos(e),p=s.util.sin(e),v=i*n*g-r*o*p+a,m=r*n*g+i*o*p+h;return[l+c*(-i*n*d-r*o*f),u+c*(-r*n*d+i*o*f),v+c*(i*n*p+r*o*g),m+c*(r*n*p-i*o*g),v,m]}function" r(t,e,i,r){var="" n="Math.atan2(e,t),s=Math.atan2(r,i);return" s="">=n?s-n:2*Math.PI-(n-s)}function n(e,i,r,n,o,a,h,c){var l;if(s.cachesBoundsOfCurve&&(l=t.call(arguments),s.boundsOfCurveCache[l]))return s.boundsOfCurveCache[l];var u,f,d,g,p,v,m,y,_=Math.sqrt,x=Math.min,b=Math.max,C=Math.abs,S=[],w=[[],[]];f=6*e-12*r+6*o,u=-3*e+9*r-9*o+3*h,d=3*r-3*e;for(var T=0;T<2;++t)if(t>0&&(f=6*i-12*n+6*a,u=-3*i+9*n-9*a+3*c,d=3*n-3*i),C(u)<1e-12){if(c(f)<1e-12)continue;0<(g=-d f)&&g<1&&s.push(g)}else(m="f*f-4*d*u)<0||(0<(p=(-f+(y=_(m)))/(2*u))&&p<1&&S.push(p),0<(v=(-f-y)/(2*u))&&v<1&&S.push(v));for(var" o,p,k,e="S.length,D=E;E--;)O=(k=1-(g=S[E]))*k*k*e+3*k*k*g*r+3*k*g*g*o+g*g*g*h,w[0][E]=O,P=k*k*k*i+3*k*k*g*n+3*k*g*g*a+g*g*g*c,w[1][E]=P;w[0][D]=e,w[1][D]=i,w[0][D+1]=h,w[1][D+1]=c;var" m="[{x:x.apply(null,w[0]),y:x.apply(null,w[1])},{x:b.apply(null,w[0]),y:b.apply(null,w[1])}];return" s.cachesboundsofcurve&&(s.boundsofcurvecache[l]="M),M}s.util.drawArc=function(t,i,r,n){for(var" s="n[0],o=n[1],a=n[2],h=n[3],c=n[4],l=[[],[],[],[]],u=e(n[5]-i,n[6]-r,s,o,h,c,a),f=0,d=u.length;f<d;f++)l[f][0]=u[f][0]+i,l[f][1]=u[f][1]+r,l[f][2]=u[f][2]+i,l[f][3]=u[f][3]+r,l[f][4]=u[f][4]+i,l[f][5]=u[f][5]+r,t.bezierCurveTo.apply(t,l[f])},s.util.getBoundsOfArc=function(t,i,r,s,o,a,h,c,l){for(var" u,f="0,d=0,g=[],p=e(c-t,l-i,r,s,a,h,o),v=0,m=p.length;v<m;v++)u=n(f,d,p[v][0],p[v][1],p[v][2],p[v][3],p[v][4],p[v][5]),g.push({x:u[0].x+t,y:u[0].y+i}),g.push({x:u[1].x+t,y:u[1].y+i}),f=p[v][4],d=p[v][5];return" g},s.util.getboundsofcurve="n}(),function(){var" t="Array.prototype.slice;function" e(t,e,i){if(t&&0!="=t.length){var" r="t.length-1,n=e?t[r][e]:t[r];if(e)for(;r--;)i(t[r][e],n)&&(n=t[r][e]);else" for(;r--;)i(t[r],n)&&(n="t[r]);return" n}}s.util.array="{fill:function(t,e){for(var" i="t.length;i--;)t[i]=e;return" t},invoke:function(e,i){for(var="" n},min:function(t,i){return="" e(t,i,function(t,e){return="" t<e})},max:function(t,i){return="">=e})}}}(),function(){function t(e,i,r){if(r)if(!s.isLikelyNode&&i instanceof Element)e=i;else if(i instanceof Array){e=[];for(var o=0,a=i.length;o<a;o++)e[o]=t({},i[o],r)}else if(i&&"object"="==n(i))for(var" h="" in="" i)"canvas"="==h?e[h]=t({},i[h]):i.hasOwnProperty(h)&&(e[h]=t({},i[h],r));else" e="i;else" for(var="" i)e[h]="i[h];return" e}s.util.object="{extend:t,clone:function(e,i){return" t({},e,i)}},s.util.object.extend(s.util,s.observable)}(),function(){function="" t(t,e){var="" i="t.charCodeAt(e);if(isNaN(i))return"";if(i<55296||i">57343)return t.charAt(e);if(55296<=i&&i<=56319){if(t.length<=e+1)throw"high surrogate="" without="" following="" low="" surrogate";var="" r="t.charCodeAt(e+1);if(56320">r||r>57343)throw"High surrogate without following low surrogate";return t.charAt(e)+t.charAt(e+1)}if(0===e)throw"Low surrogate without preceding high surrogate";var n=t.charCodeAt(e-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1}s.util.string={camelize:function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},capitalize:function(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())},escapeXml:function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(//g,"&gt;")},graphemeSplit:function(e){var i,r=0,n=[];for(r=0;r<e.length;r++)!1!==(i=t(e,r))&&n.push(i);return n}}}(),function(){var="" t="Array.prototype.slice,e=function(){},i=function(){for(var" in{tostring:1})if("tostring"="==t)return!1;return!0}(),r=function(t,e,r){for(var" n="" in="" e)n="" t.prototype&&"function"="=typeof" t.prototype[n]&&(e[n]+"").indexof("callsuper")="">-1?t.prototype[n]=function(t){return function(){var i=this.constructor.superclass;this.constructor.superclass=r;var n=e[t].apply(this,arguments);if(this.constructor.superclass=i,"initialize"!==t)return n}}(n):t.prototype[n]=e[n],i&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};function n(){}function o(e){for(var i=null,r=this;r.constructor.superclass;){var n=r.constructor.superclass.prototype[e];if(r[e]!==n){i=n;break}r=r.constructor.superclass.prototype}return i?arguments.length>1?i.apply(this,t.call(arguments,1)):i.call(this):console.log("tried to callSuper "+e+", method not found in prototype chain",this)}s.util.createClass=function(){var i=null,s=t.call(arguments,0);function a(){this.initialize.apply(this,arguments)}"function"==typeof s[0]&&(i=s.shift()),a.superclass=i,a.subclasses=[],i&&(n.prototype=i.prototype,a.prototype=new n,i.subclasses.push(a));for(var h=0,c=s.length;h<c;h++)r(a,s[h],i);return a.prototype.initialize||(a.prototype.initialize="e),a.prototype.constructor=a,a.prototype.callSuper=o,a}}(),function(){var" t="!!s.document.createElement("div").attachEvent;s.util.addListener=function(e,i,r,n){e&&e.addEventListener(i,r,!t&&n)},s.util.removeListener=function(e,i,r,n){e&&e.removeEventListener(i,r,!t&&n)},s.util.getPointer=function(t){var" e="t.target,i=s.util.getScrollLeftTop(e),r=function(t){var" e&&e[0]?e[0]:t}(t);return{x:r.clientx+i.left,y:r.clienty+i.top}}}(),function(){var="" t.style.opacity,i="string" =="typeof" t.style.filter,r="/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,n=function(t){return" t};e?n="function(t,e){return" t.style.opacity="e,t}:i&&(n=function(t,e){var" i="t.style;return" t.currentstyle&&!t.currentstyle.haslayout&&(i.zoom="1),r.test(i.filter)?(e=e">=.9999?"":"alpha(opacity="+100*e+")",i.filter=i.filter.replace(r,e)):i.filter+=" alpha(opacity="+100*e+")",t}),s.util.setStyle=function(t,e){var i=t.style;if(!i)return t;if("string"==typeof e)return t.style.cssText+=";"+e,e.indexOf("opacity")>-1?n(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var r in e)"opacity"===r?n(t,e[r]):i["float"===r||"cssFloat"===r?void 0===i.styleFloat?"cssFloat":"styleFloat":r]=e[r];return t}}(),function(){var t=Array.prototype.slice;var e,i,r=function(e){return t.call(e,0)};try{e=r(s.document.childNodes)instanceof Array}catch(a){}function n(t,e){var i=s.document.createElement(t);for(var r in e)"class"===r?i.className=e[r]:"for"===r?i.htmlFor=e[r]:i.setAttribute(r,e[r]);return i}function o(t){for(var e=0,i=0,r=s.document.documentElement,n=s.document.body||{scrollLeft:0,scrollTop:0};t&&(t.parentNode||t.host)&&((t=t.parentNode||t.host)===s.document?(e=n.scrollLeft||r.scrollLeft||0,i=n.scrollTop||r.scrollTop||0):(e+=t.scrollLeft||0,i+=t.scrollTop||0),1!==t.nodeType||"fixed"!==t.style.position););return{left:e,top:i}}e||(r=function(t){for(var e=new Array(t.length),i=t.length;i--;)e[i]=t[i];return e}),i=s.document.defaultView&&s.document.defaultView.getComputedStyle?function(t,e){var i=s.document.defaultView.getComputedStyle(t,null);return i?i[e]:void 0}:function(t,e){var i=t.style[e];return!i&&t.currentStyle&&(i=t.currentStyle[e]),i},function(){var t=s.document.documentElement.style,e="userSelect"in t?"userSelect":"MozUserSelect"in t?"MozUserSelect":"WebkitUserSelect"in t?"WebkitUserSelect":"KhtmlUserSelect"in t?"KhtmlUserSelect":"";s.util.makeElementUnselectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=s.util.falseFunction),e?t.style[e]="none":"string"==typeof t.unselectable&&(t.unselectable="on"),t},s.util.makeElementSelectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=null),e?t.style[e]="":"string"==typeof t.unselectable&&(t.unselectable=""),t}}(),function(){s.util.getScript=function(t,e){var i=s.document.getElementsByTagName("head")[0],r=s.document.createElement("script"),n=!0;r.onload=r.onreadystatechange=function(t){if(n){if("string"==typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)return;n=!1,e(t||s.window.event),r=r.onload=r.onreadystatechange=null}},r.src=t,i.appendChild(r)}}(),s.util.getById=function(t){return"string"==typeof t?s.document.getElementById(t):t},s.util.toArray=r,s.util.makeElement=n,s.util.addClass=function(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)},s.util.wrapElement=function(t,e,i){return"string"==typeof e&&(e=n(e,i)),t.parentNode&&t.parentNode.replaceChild(e,t),e.appendChild(t),e},s.util.getScrollLeftTop=o,s.util.getElementOffset=function(t){var e,r,n=t&&t.ownerDocument,s={left:0,top:0},a={left:0,top:0},h={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!n)return a;for(var c in h)a[h[c]]+=parseInt(i(t,c),10)||0;return e=n.documentElement,void 0!==t.getBoundingClientRect&&(s=t.getBoundingClientRect()),r=o(t),{left:s.left+r.left-(e.clientLeft||0)+a.left,top:s.top+r.top-(e.clientTop||0)+a.top}},s.util.getElementStyle=i,s.util.getNodeCanvas=function(t){var e=s.jsdomImplForWrapper(t);return e._canvas||e._image},s.util.cleanUpJsdomNode=function(t){if(s.isLikelyNode){var e=s.jsdomImplForWrapper(t);e&&(e._image=null,e._canvas=null,e._currentSrc=null,e._attributes=null,e._classList=null)}}}(),function(){function t(){}s.util.request=function(e,i){i||(i={});var r=i.method?i.method.toUpperCase():"GET",n=i.onComplete||function(){},o=new s.window.XMLHttpRequest,a=i.body||i.parameters;return o.onreadystatechange=function(){4===o.readyState&&(n(o),o.onreadystatechange=t)},"GET"===r&&(a=null,"string"==typeof i.parameters&&(e=function(t,e){return t+(/\?/.test(t)?"&":"?")+e}(e,i.parameters))),o.open(r,e,!0),"POST"!==r&&"PUT"!==r||o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(a),o}}(),s.log=function(){},s.warn=function(){},"undefined"!=typeof console&&["log","warn"].forEach(function(t){void 0!==console[t]&&"function"==typeof console[t].apply&&(s[t]=function(){return console[t].apply(console,arguments)})}),function(){function t(){return!1}var e=s.window.requestAnimationFrame||s.window.webkitRequestAnimationFrame||s.window.mozRequestAnimationFrame||s.window.oRequestAnimationFrame||s.window.msRequestAnimationFrame||function(t){return s.window.setTimeout(t,1e3/60)},i=s.window.cancelAnimationFrame||s.window.clearTimeout;function r(){return e.apply(s.window,arguments)}s.util.animate=function(e){r(function(i){e||(e={});var n,s=i||+new Date,o=e.duration||500,a=s+o,h=e.onChange||t,c=e.abort||t,l=e.onComplete||t,u=e.easing||function(t,e,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+e},f="startValue"in e?e.startValue:0,d="endValue"in e?e.endValue:100,g=e.byValue||d-f;e.onStart&&e.onStart(),function t(i){if(c())l(d,1,1);else{var p=(n=i||+new Date)>a?o:n-s,v=p/o,m=u(p,f,g,o),y=Math.abs((m-f)/g);h(m,y,v),n>a?e.onComplete&&e.onComplete():r(t)}}(s)})},s.util.requestAnimFrame=r,s.util.cancelAnimFrame=function(){return i.apply(s.window,arguments)}}(),function(){s.util.animateColor=function(t,e,i,r){var n=new s.Color(t).getSource(),o=new s.Color(e).getSource();r=r||{},s.util.animate(s.util.object.extend(r,{duration:i||500,startValue:n,endValue:o,byValue:o,easing:function(t,e,i,n){var s,o,a,h,c=r.colorEasing?r.colorEasing(t,n):1-Math.cos(t/n*(Math.PI/2));return s=e,o=i,a=c,h="rgba("+parseInt(s[0]+a*(o[0]-s[0]),10)+","+parseInt(s[1]+a*(o[1]-s[1]),10)+","+parseInt(s[2]+a*(o[2]-s[2]),10),h+=","+(s&&o?parseFloat(s[3]+a*(o[3]-s[3])):1),h+=")"}}))}}(),function(){function t(t,e,i,r){return t<math.abs(e)?(t=e,r=i 0="==t?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,i,r){return" 4):r="0===e&&0===t?i/(2*Math.PI)*Math.asin(1):i/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:i,s:r}}function" e(t,e,i){return="" t.a*math.pow(2,10*(e-="1))*Math.sin((e*i-t.s)*(2*Math.PI)/t.p)}function" i(t,e,i,n){return="" i-r(n-t,0,i,n)+e}function="" r(t,e,i,r){return(t="" =r)<1="" 2.75?i*(7.5625*t*t)+e:t<2="" 2.75?i*(7.5625*(t-="1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}s.util.ease={easeInQuad:function(t,e,i,r){return" i*(t="" =r)*t+e},easeoutquad:function(t,e,i,r){return-i*(t="" =r)*(t-2)+e},easeinoutquad:function(t,e,i,r){return(t="" =r="" 2)<1?i="" 2*t*t+e:-i="" 2*(--t*(t-2)-1)+e},easeincubic:function(t,e,i,r){return="" =r)*t*t+e},easeoutcubic:function(t,e,i,r){return="" i*((t="t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,r){return" =r)*t*t*t+e},easeoutquart:function(t,e,i,r){return-i*((t="t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,r){return" =r)*t*t*t*t+e},easeoutquint:function(t,e,i,r){return="" i*math.sin(t="" r*(math.pi="" 2))+e},easeinoutsine:function(t,e,i,r){return-i="" 2*(math.cos(math.pi*t="" r)-1)+e},easeinexpo:function(t,e,i,r){return="" t="==r?e+i:i*(1-Math.pow(2,-10*t/r))+e},easeInOutExpo:function(t,e,i,r){return" i*math.sqrt(1-(t="t/r-1)*t)+e},easeInOutCirc:function(t,e,i,r){return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(i,r,n,s){var" o="0;return" s="0;if(0===e)return" i;if(1="=(e/=n))return" i+r;s||(s=".3*n);var" o.a*math.pow(2,-10*e)*math.sin((e*n-o.s)*(2*math.pi)="" o.p)+o.c+i},easeinoutelastic:function(i,r,n,s){var="" r;if(2="=(i/=s/2))return" r+n;o||(o="s*(.3*1.5));var" a="t(n,n,o,1.70158);return" i<1?-.5*e(a,i,s)+r:a.a*math.pow(2,-10*(i-="1))*Math.sin((i*s-a.s)*(2*Math.PI)/a.p)*.5+a.c+r},easeInBack:function(t,e,i,r,n){return" void="" t<s="" 2?.5*i(2*t,0,n,s)+e:.5*r(2*t-s,0,n,s)+.5*n+e}}}(),function(t){"use="" strict";var="" e="t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.util.object.clone,n=e.util.toFixed,s=e.util.parseUnit,o=e.util.multiplyTransformMatrices,a={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform"},h={stroke:"strokeOpacity",fill:"fillOpacity"};function" c(t){return="" in="" a?a[t]:t}function="" l(t,i,r,n){var="" a,h="[object Array]" =="=Object.prototype.toString.call(i);if("fill"!==t&&"stroke"!==t||"none"!==i)if("vector-effect"===t)i="non-scaling-stroke"===i;else" if("strokedasharray"="==t)i="none"===i?null:i.replace(/,/g,"" ").split(="" \s+="" ).map(parsefloat);else="" if("transformmatrix"="==t)i=r&&r.transformMatrix?o(r.transformMatrix,e.parseTransformAttribute(i)):e.parseTransformAttribute(i);else" if("visible"="==t)i="none"!==i&&"hidden"!==i,r&&!1===r.visible&&(i=!1);else" if("opacity"="==t)i=parseFloat(i),r&&void" 0!="=r.opacity&&(i*=r.opacity);else" if("textanchor"="==t)i="start"===i?"left":"end"===i?"right":"center";else" if("charspacing"="==t)a=s(i,n)/n*1e3;else" if("paintfirst"="==t){var" c="i.indexOf("fill"),l=i.indexOf("stroke");i="fill";c">-1&&l>-1&&l<c?i="stroke":-1===c&&l>-1&&(i="stroke")}else{if("href"===t||"xlink:href"===t)return i;a=h?i.map(s):s(i,n)}else i="";return!h&&isNaN(a)?i:a}function u(t){return new RegExp("^("+t.join("|")+")\\b","i")}function f(t,e){var i,r,n,s,o=[];for(n=0,s=e.length;n<s;n++)i=e[n],r=t.getelementsbytagname(i),o=o.concat(array.prototype.slice.call(r));return 0="==e.length}(t,e)),i&&r&&0===e.length}function" o}function="" d(t,e){var="" i,r="!0;return(i=g(t,e.pop()))&&e.length&&(r=function(t,e){var" g(t,e){var="" i,r,n="t.nodeName,s=t.getAttribute("class"),o=t.getAttribute("id");if(i=new" regexp("^"+n,"i"),e="e.replace(i,""),o&&e.length&&(i=new" regexp("#"+o+"(?![a-za-z\\-]+)","i"),e="e.replace(i,"")),s&&e.length)for(r=(s=s.split("" ")).length;r--;)i="new" regexp("\\."+s[r]+"(?![a-za-z\\-]+)","i"),e="e.replace(i,"");return" p(t,e){var="" i;if(t.getelementbyid&&(i="t.getElementById(e)),i)return" i;var="" r,n,s,o="t.getElementsByTagName("*");for(n=0,s=o.length;n<s;n++)if(e===(r=o[n]).getAttribute("id"))return" r}e.svgvalidtagnamesregex="u(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),e.svgViewBoxElementsRegEx=u(["symbol","image","marker","pattern","view","svg"]),e.svgInvalidAncestorsRegEx=u(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),e.svgValidParentsRegEx=u(["symbol","g","a","svg","clipPath","defs"]),e.cssRules={},e.gradientDefs={},e.clipPaths={},e.parseTransformAttribute=function(){function" t(t,i,r){t[r]="Math.tan(e.util.degreesToRadians(i[0]))}var" i="e.iMatrix,r=e.reNum,n="(?:\\s+,?\\s*|,\\s*)",s="(?:"+("(?:(matrix)\\s*\\(\\s*("+r+")"+n+"("+r+")"+n+"("+r+")"+n+"("+r+")"+n+"("+r+")"+n+"("+r+")\\s*\\))")+"|"+("(?:(translate)\\s*\\(\\s*("+r+")(?:"+n+"("+r+"))?\\s*\\))")+"|"+("(?:(scale)\\s*\\(\\s*("+r+")(?:"+n+"("+r+"))?\\s*\\))")+"|"+("(?:(rotate)\\s*\\(\\s*("+r+")(?:"+n+"("+r+")"+n+"("+r+"))?\\s*\\))")+"|"+("(?:(skewX)\\s*\\(\\s*("+r+")\\s*\\))")+"|"+("(?:(skewY)\\s*\\(\\s*("+r+")\\s*\\))")+")",o=new" regexp("^\\s*(?:"+("(?:"+s+"(?:"+n+"*"+s+")*)")+"?)\\s*$"),a="new" regexp(s,"g");return="" function(r){var="" n="i.concat(),h=[];if(!r||r&&!o.test(r))return" n;r.replace(a,function(r){var="" o="new" regexp(s).exec(r).filter(function(t){return!!t}),a="o[1],c=o.slice(2).map(parseFloat);switch(a){case"translate":!function(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}(n,c);break;case"rotate":c[0]=e.util.degreesToRadians(c[0]),function(t,i){var" r="e.util.cos(i[0]),n=e.util.sin(i[0]),s=0,o=0;3===i.length&&(s=i[1],o=i[2]),t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=s-(r*s-n*o),t[5]=o-(n*s+r*o)}(n,c);break;case"scale":!function(t,e){var" c="h[0];h.length">1;)h.shift(),c=e.util.multiplyTransformMatrices(c,h[0]);return c}}();var v=new RegExp("^\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*$");function m(t){var i,r,n,o,a,h,c=t.getAttribute("viewBox"),l=1,u=1,f=t.getAttribute("width"),d=t.getAttribute("height"),g=t.getAttribute("x")||0,p=t.getAttribute("y")||0,m=t.getAttribute("preserveAspectRatio")||"",y=!c||!e.svgViewBoxElementsRegEx.test(t.nodeName)||!(c=c.match(v)),_=!f||!d||"100%"===f||"100%"===d,x=y&&_,b={},C="",S=0,w=0;if(b.width=0,b.height=0,b.toBeParsed=x,x)return b;if(y)return b.width=s(f),b.height=s(d),b;if(i=-parseFloat(c[1]),r=-parseFloat(c[2]),n=parseFloat(c[3]),o=parseFloat(c[4]),_?(b.width=n,b.height=o):(b.width=s(f),b.height=s(d),l=b.width/n,u=b.height/o),"none"!==(m=e.util.parsePreserveAspectRatioAttribute(m)).alignX&&("meet"===m.meetOrSlice&&(u=l=l>u?u:l),"slice"===m.meetOrSlice&&(u=l=l>u?l:u),S=b.width-n*l,w=b.height-o*l,"Mid"===m.alignX&&(S/=2),"Mid"===m.alignY&&(w/=2),"Min"===m.alignX&&(S=0),"Min"===m.alignY&&(w=0)),1===l&&1===u&&0===i&&0===r&&0===g&&0===p)return b;if((g||p)&&(C=" translate("+s(g)+" "+s(p)+") "),a=C+" matrix("+l+" 0 0 "+u+" "+(i*l+S)+" "+(r*u+w)+") ",b.viewboxTransform=e.parseTransformAttribute(a),"svg"===t.nodeName){for(h=t.ownerDocument.createElement("g");t.firstChild;)h.appendChild(t.firstChild);t.appendChild(h)}else a=(h=t).getAttribute("transform")+a;return h.setAttribute("transform",a),b}function y(t,e){var i=p(t,e.getAttribute("xlink:href").substr(1));if(i&&i.getAttribute("xlink:href")&&y(t,i),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach(function(t){e.hasAttribute(t)||e.setAttribute(t,i.getAttribute(t))}),!e.children.length)for(var r=i.cloneNode(!0);r.firstChild;)e.appendChild(r.firstChild);e.removeAttribute("xlink:href")}e.parseSVGDocument=function(t,i,n,s){if(t){!function(t){for(var e=f(t,["use","svg:use"]),i=0;e.length&&i<e.length;){var 0="==o&&(o=t.getAttribute("svgUid")),t.parentNode&&e.svgValidParentsRegEx.test(t.parentNode.nodeName)&&(g=e.parseAttributes(t.parentNode,r,o));var" r,n,s,o,a="e[i],h=(a.getAttribute("xlink:href")||a.getAttribute("href")).substr(1),c=a.getAttribute("x")||0,l=a.getAttribute("y")||0,u=p(t,h).cloneNode(!0),d=(u.getAttribute("transform")||"")+"" translate("+c+",="" "+l+")",g="e.length;if(m(u),/^svg$/i.test(u.nodeName)){var" v="u.ownerDocument.createElement("g");for(n=0,o=(s=u.attributes).length;n<o;n++)r=s.item(n),v.setAttribute(r.nodeName,r.nodeValue);for(;u.firstChild;)v.appendChild(u.firstChild);u=v}for(n=0,o=(s=a.attributes).length;n<o;n++)"x"!==(r=s.item(n)).nodeName&&"y"!==r.nodeName&&"xlink:href"!==r.nodeName&&"href"!==r.nodeName&&("transform"===r.nodeName?d=r.nodeValue+"" "+d:u.setattribute(r.nodename,r.nodevalue));u.setattribute("transform",d),u.setattribute("instantiated_by_use","1"),u.removeattribute("id"),a.parentnode.replacechild(u,a),e.length="==g&&i++}}(t);var" o,a,h="e.Object.__uid++,c=m(t),l=e.util.toArray(t.getElementsByTagName("*"));if(c.crossOrigin=s&&s.crossOrigin,c.svgUid=h,0===l.length&&e.isLikelyNode){var" u="[];for(o=0,a=(l=t.selectNodes('//*[name(.)!="svg"]')).length;o<a;o++)u[o]=l[o];l=u}var" d="l.filter(function(t){return" m(t),e.svgvalidtagnamesregex.test(t.nodename.replace("svg:",""))&&!function(t,e){for(;t&&(t="t.parentNode);)if(t.nodeName&&e.test(t.nodeName.replace("svg:",""))&&!t.getAttribute("instantiated_by_use"))return!0;return!1}(t,e.svgInvalidAncestorsRegEx)});if(!d||d&&!d.length)i&&i([],{});else{var" g="{};l.filter(function(t){return"clipPath"===t.nodeName.replace("svg:","")}).forEach(function(t){var" i="t.getAttribute("id");g[i]=e.util.toArray(t.getElementsByTagName("*")).filter(function(t){return" e.svgvalidtagnamesregex.test(t.nodename.replace("svg:",""))})}),e.gradientdefs[h]="e.getGradientDefs(t),e.cssRules[h]=e.getCSSRules(t),e.clipPaths[h]=g,e.parseElements(d,function(t,r){i&&(i(t,c,r,l),delete" e.gradientdefs[h],delete="" e.cssrules[h],delete="" e.clippaths[h])},r(c),n,s)}}};var="" _="new" regexp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+e.renum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\="" (normal|"+e.renum+"))?\\s+(.*)");i(e,{parsefontdeclaration:function(t,e){var="" r="i[1],n=i[3],o=i[4],a=i[5],h=i[6];r&&(e.fontStyle=r),n&&(e.fontWeight=isNaN(parseFloat(n))?n:parseFloat(n)),o&&(e.fontSize=s(o)),h&&(e.fontFamily=h),a&&(e.lineHeight="normal"===a?1:a)}},getGradientDefs:function(t){var" e,i="f(t,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),r=0,n={};for(r=i.length;r--;)(e=i[r]).getAttribute("xlink:href")&&y(t,e),n[e.getAttribute("id")]=e;return" n},parseattributes:function(t,r,o){if(t){var="" a,u,f,g="{};void" p="r.reduce(function(e,i){return(a=t.getAttribute(i))&&(e[i]=a),e},{});p=i(p,i(function(t,i){var" n="" in="" e.cssrules[i])if(d(t,n.split("="" ")))for(var="" s="" e.cssrules[i][n])r[s]="e.cssRules[i][n][s];return" r}(t,o),e.parsestyleattribute(t))),u="f=g.fontSize||e.Text.DEFAULT_SVG_FONT_SIZE,p["font-size"]&&(p["font-size"]=u=s(p["font-size"],f));var" v,m,y="{};for(var" p)m="l(v=c(_),p[_],g,u),y[v]=m;y&&y.font&&e.parseFontDeclaration(y.font,y);var" x="i(g,y);return" e.svgvalidparentsregex.test(t.nodename)?x:function(t){for(var="" h)if(void="" 0!="=t[h[i]]&&""!==t[i]){if(void" e.color(t[i]);t[i]="r.setAlpha(n(r.getAlpha()*t[h[i]],2)).toRgba()}}return" t}(x)}},parseelements:function(t,i,r,n,s){new="" e.elementsparser(t,i,r,n,s).parse()},parsestyleattribute:function(t){var="" e="{},i=t.getAttribute("style");return" i?("string"="=typeof" i?function(t,e){var="" i,r;t.replace(="" ;\s*$="" ,"").split(";").foreach(function(t){var="" i,r;for(var="" t)void="" null;var="" e,i,r="[];for(e=0,i=(t=(t=t.replace(/,/g,"" ").trim()).split(="" \s+="" )).length;e<i;e+="2)r.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return" r},getcssrules:function(t){var="" i,r,n="t.getElementsByTagName("style"),s={};for(i=0,r=n.length;i<r;i++){var" o="n[i].textContent||n[i].text;""!==(o=o.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&o.match(/[^{]*\{[\s\S]*?\}/g).map(function(t){return" t.trim()}).foreach(function(t){var="" h="a[i].split(/\s*:\s*/),c=h[0],l=h[1];o[c]=l}(t=n[1]).split(",").forEach(function(t){""!==(t=t.replace(/^svg/i,"").trim())&&(s[t]?e.util.object.extend(s[t],o):s[t]=e.util.object.clone(o))})})}return" s},loadsvgfromurl:function(t,i,r,n){t="t.replace(/^\n\s*/,"").trim(),new" e.util.request(t,{method:"get",oncomplete:function(t){var="" activexobject("microsoft.xmldom")).async="false" ,s.loadxml(t.responsetext.replace(="" <!doctype[\s\s]*?(\[[\s\s]*\])*?="">/i,"")));if(!s||!s.documentElement)return i&&i(null),!1;e.parseSVGDocument(s.documentElement,function(t,e,r,n){i&&i(t,e,r,n)},r,n)}})},loadSVGFromString:function(t,i,r,n){var s;if(t=t.trim(),void 0!==e.window.DOMParser){var o=new e.window.DOMParser;o&&o.parseFromString&&(s=o.parseFromString(t,"text/xml"))}else e.window.ActiveXObject&&((s=new ActiveXObject("Microsoft.XMLDOM")).async="false",s.loadXML(t.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));e.parseSVGDocument(s.documentElement,function(t,e,r,n){i(t,e,r,n)},r,n)}})}("undefined"!=typeof exports?exports:this),s.ElementsParser=function(t,e,i,r,n){this.elements=t,this.callback=e,this.options=i,this.reviver=r,this.svgUid=i&&i.svgUid||0,this.parsingOptions=n,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g},function(t){t.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},t.createObjects=function(){var t=this;this.elements.forEach(function(e,i){e.setAttribute("svgUid",t.svgUid),t.createObject(e,i)})},t.findTag=function(t){return s[s.util.string.capitalize(t.tagName.replace("svg:",""))]},t.createObject=function(t,e){var i=this.findTag(t);if(i&&i.fromElement)try{i.fromElement(t,this.createCallback(e,t),this.options)}catch(r){s.log(r)}else this.checkIfDone()},t.createCallback=function(t,e){var i=this;return function(r){var n;i.resolveGradient(r,"fill"),i.resolveGradient(r,"stroke"),r instanceof s.Image&&r._originalElement&&(n=r.parsePreserveAspectRatioAttribute(e)),r._removeTransformMatrix(n),i.resolveClipPath(r),i.reviver&&i.reviver(e,r),i.instances[t]=r,i.checkIfDone()}},t.extractPropertyDefinition=function(t,e,i){var r=t[e];if(/^url\(/.test(r)){var n=this.regexUrl.exec(r)[1];return this.regexUrl.lastIndex=0,s[i][this.svgUid][n]}},t.resolveGradient=function(t,e){var i=this.extractPropertyDefinition(t,e,"gradientDefs");i&&t.set(e,s.Gradient.fromElement(i,t))},t.createClipPathCallback=function(t,e){return function(t){t._removeTransformMatrix(),t.fillRule=t.clipRule,e.push(t)}},t.resolveClipPath=function(t){var e,i,r,n,o=this.extractPropertyDefinition(t,"clipPath","clipPaths");if(o){r=[],i=s.util.invertTransform(t.calcTransformMatrix());for(var a=0;a<o.length;a++)e=o[a],this.findtag(e).fromelement(e,this.createclippathcallback(t,r),this.options);o=1===r.length?r[0]:new s.group(r),n="s.util.multiplyTransformMatrices(i,o.calcTransformMatrix());var" h="s.util.qrDecompose(n);o.flipX=!1,o.flipY=!1,o.set("scaleX",h.scaleX),o.set("scaleY",h.scaleY),o.angle=h.angle,o.skewX=h.skewX,o.skewY=0,o.setPositionByOrigin({x:h.translateX,y:h.translateY},"center","center"),t.clipPath=o}},t.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(t){return" null!="t}),this.callback(this.instances,this.elements))}}(s.ElementsParser.prototype),function(t){"use" strict";var="" e="t.fabric||(t.fabric={});function" i(t,e){this.x="t,this.y=e}e.Point?e.warn("fabric.Point" is="" already="" defined"):(e.point="i,i.prototype={type:"point",constructor:i,add:function(t){return" new="" i(this.x+t.x,this.y+t.y)},addequals:function(t){return="" this.x+="t.x,this.y+=t.y,this},scalarAdd:function(t){return" i(this.x+t,this.y+t)},scalaraddequals:function(t){return="" i(this.x-t.x,this.y-t.y)},subtractequals:function(t){return="" this.x-="t.x,this.y-=t.y,this},scalarSubtract:function(t){return" i(this.x-t,this.y-t)},scalarsubtractequals:function(t){return="" i(this.x*t,this.y*t)},multiplyequals:function(t){return="" this.x*="t,this.y*=t,this},divide:function(t){return" i(this.x="" t,this.y="" t)},divideequals:function(t){return="" this.x="" =t,this.y="" =t,this},eq:function(t){return="" this.x<t.x&&this.y<t.y},lte:function(t){return="" this.x<="t.x&&this.y<=t.y},gt:function(t){return">t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,e){return void 0===e&&(e=.5),e=Math.max(Math.min(1,e),0),new i(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},distanceFrom:function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},midPointFrom:function(t){return this.lerp(t)},min:function(t){return new i(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new i(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setFromPoint:function(t){return this.x=t.x,this.y=t.y,this},swap:function(t){var e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i},clone:function(){return new i(this.x,this.y)}})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});function i(t){this.status=t,this.points=[]}e.Intersection?e.warn("fabric.Intersection is already defined"):(e.Intersection=i,e.Intersection.prototype={constructor:i,appendPoint:function(t){return this.points.push(t),this},appendPoints:function(t){return this.points=this.points.concat(t),this}},e.Intersection.intersectLineLine=function(t,r,n,s){var o,a=(s.x-n.x)*(t.y-n.y)-(s.y-n.y)*(t.x-n.x),h=(r.x-t.x)*(t.y-n.y)-(r.y-t.y)*(t.x-n.x),c=(s.y-n.y)*(r.x-t.x)-(s.x-n.x)*(r.y-t.y);if(0!==c){var l=a/c,u=h/c;0<=l&&l<=1&&0<=u&&u<=1?(o=new i("intersection")).appendpoint(new="" e.point(t.x+l*(r.x-t.x),t.y+l*(r.y-t.y))):o="new" i}else="" o="new" i(0="==a||0===h?"Coincident":"Parallel");return" o},e.intersection.intersectlinepolygon="function(t,e,r){var" n,s,o,a,h="new" i,c="r.length;for(a=0;a<c;a++)n=r[a],s=r[(a+1)%c],o=i.intersectLineLine(t,e,n,s),h.appendPoints(o.points);return" h.points.length="">0&&(h.status="Intersection"),h},e.Intersection.intersectPolygonPolygon=function(t,e){var r,n=new i,s=t.length;for(r=0;r<s;r++){var o="t[r],a=t[(r+1)%s],h=i.intersectLinePolygon(o,a,e);n.appendPoints(h.points)}return" n.points.length="">0&&(n.status="Intersection"),n},e.Intersection.intersectPolygonRectangle=function(t,r,n){var s=r.min(n),o=r.max(n),a=new e.Point(o.x,s.y),h=new e.Point(s.x,o.y),c=i.intersectLinePolygon(s,a,t),l=i.intersectLinePolygon(a,o,t),u=i.intersectLinePolygon(o,h,t),f=i.intersectLinePolygon(h,s,t),d=new i;return d.appendPoints(c.points),d.appendPoints(l.points),d.appendPoints(u.points),d.appendPoints(f.points),d.points.length>0&&(d.status="Intersection"),d})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});function i(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function r(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1 6?t+6*(e-t)*i:i<.5?e:i<2="" 3?t+(e-t)*(2="" 3-i)*6:t}e.color?e.warn("fabric.color="" is="" already="" defined."):(e.color="i,e.Color.prototype={_tryParsingColor:function(t){var" e;t="" in="" i.colornamemap&&(t="i.colorNameMap[t]),"transparent"===t&&(e=[255,255,255,0]),e||(e=i.sourceFromHex(t)),e||(e=i.sourceFromRgb(t)),e||(e=i.sourceFromHsl(t)),e||(e=[0,0,0,1]),e&&this.setSource(e)},_rgbToHsl:function(t,i,r){t/=255,i/=255,r/=255;var" n,s,o,a="e.util.array.max([t,i,r]),h=e.util.array.min([t,i,r]);if(o=(a+h)/2,a===h)n=s=0;else{var" c="a-h;switch(s=o">.5?c/(2-a-h):c/(a+h),a){case t:n=(i-r)/c+(i<r?6:0);break;case i:n="(r-t)/c+2;break;case" r:n="(t-i)/c+4}n/=6}return[Math.round(360*n),Math.round(100*s),Math.round(100*o)]},getSource:function(){return" this._source},setsource:function(t){this._source="t},toRgb:function(){var" t="this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var" t,e,i,r="this.getSource();return" t,e="this.getSource();return" this.getsource()[3]},setalpha:function(t){var="" e="this.getSource();return" e[3]="t,this.setSource(e),this},toGrayscale:function(){var" this.setsource([e,e,e,i]),this},toblackwhite:function(t){var="" instanceof="" i||(t="new" i(t));var="" e,r="[],n=this.getAlpha(),s=this.getSource(),o=t.getSource();for(e=0;e<3;e++)r.push(Math.round(.5*s[e]+.5*o[e]));return" r[3]="n,this.setSource(r),this}},e.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,e.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,e.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,e.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},e.Color.fromRgb=function(t){return" i.fromsource(i.sourcefromrgb(t))},e.color.sourcefromrgb="function(t){var" r="parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),n=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),s=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(r,10),parseInt(n,10),parseInt(s,10),e[4]?parseFloat(e[4]):1]}},e.Color.fromRgba=i.fromRgb,e.Color.fromHsl=function(t){return" i.fromsource(i.sourcefromhsl(t))},e.color.sourcefromhsl="function(t){var" n,s,o,a="(parseFloat(e[1])%360+360)%360/360,h=parseFloat(e[2])/(/%$/.test(e[2])?100:1),c=parseFloat(e[3])/(/%$/.test(e[3])?100:1);if(0===h)n=s=o=c;else{var" l="c<=.5?c*(h+1):c+h-c*h,u=2*c-l;n=r(u,l,a+1/3),s=r(u,l,a),o=r(u,l,a-1/3)}return[Math.round(255*n),Math.round(255*s),Math.round(255*o),e[4]?parseFloat(e[4]):1]}},e.Color.fromHsla=i.fromHsl,e.Color.fromHex=function(t){return" i.fromsource(i.sourcefromhex(t))},e.color.sourcefromhex="function(t){if(t.match(i.reHex)){var" i;return="" e.setsource(t),e})}("undefined"!="typeof" exports?exports:this),function(){function="" t(t){var="" e,i,r,n,o="t.getAttribute("style"),a=t.getAttribute("offset")||0;if(a=(a=parseFloat(a)/(/%$/.test(a)?100:1))<0?0:a">1?1:a,o){var h=o.split(/\s*;\s*/);for(""===h[h.length-1]&&h.pop(),n=h.length;n--;){var c=h[n].split(/\s*:\s*/),l=c[0].trim(),u=c[1].trim();"stop-color"===l?e=u:"stop-opacity"===l&&(r=u)}}return e||(e=t.getAttribute("stop-color")||"rgb(0,0,0)"),r||(r=t.getAttribute("stop-opacity")),i=(e=new s.Color(e)).getAlpha(),r=isNaN(parseFloat(r))?1:parseFloat(r),r*=i,{offset:a,color:e.toRgb(),opacity:r}}var e=s.util.object.clone;function i(t,e,i){var r,n=0,s=1,o="";for(var a in e)"Infinity"===e[a]?e[a]=1:"-Infinity"===e[a]&&(e[a]=0),r=parseFloat(e[a],10),s="string"==typeof e[a]&&/^(\d+\.\d+)%|(\d+)%$/.test(e[a])?.01:1,"x1"===a||"x2"===a||"r2"===a?(s*="objectBoundingBox"===i?t.width:1,n="objectBoundingBox"===i&&t.left||0):"y1"!==a&&"y2"!==a||(s*="objectBoundingBox"===i?t.height:1,n="objectBoundingBox"===i&&t.top||0),e[a]=r*s+n;if("ellipse"===t.type&&null!==e.r2&&"objectBoundingBox"===i&&t.rx!==t.ry){var h=t.ry/t.rx;o=" scale(1, "+h+")",e.y1&&(e.y1/=h),e.y2&&(e.y2/=h)}return o}s.Gradient=s.util.createClass({offsetX:0,offsetY:0,initialize:function(t){t||(t={});var e={};this.id=s.Object.__uid++,this.type=t.type||"linear",e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice(),t.gradientTransform&&(this.gradientTransform=t.gradientTransform),this.offsetX=t.offsetX||this.offsetX,this.offsetY=t.offsetY||this.offsetY},addColorStop:function(t){for(var e in t){var i=new s.Color(t[e]);this.colorStops.push({offset:parseFloat(e),color:i.toRgb(),opacity:i.getAlpha()})}return this},toObject:function(t){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return s.util.populateWithProperties(this,e,t),e},toSVG:function(t,i){var r,n,o,a,h=e(this.coords,!0),c=(i=i||{},e(this.colorStops,!0)),l=h.r1>h.r2,u=this.gradientTransform?this.gradientTransform.concat():s.iMatrix.concat(),f=t.width/2-this.offsetX,d=t.height/2-this.offsetY,g=!!i.additionalTransform;if(c.sort(function(t,e){return t.offset-e.offset}),"path"===t.type&&(f-=t.pathOffset.x,d-=t.pathOffset.y),u[4]-=f,u[5]-=d,a='id="SVGID_'+this.id+'" gradientUnits="userSpaceOnUse"',a+=' gradientTransform="'+(g?i.additionalTransform+" ":"")+s.util.matrixToSVG(u)+'" ',"linear"===this.type?o=["<lineargradient ",a,'="" x1="',h.x1,'" y1="',h.y1,'" x2="',h.x2,'" y2="',h.y2,'">\n']:"radial"===this.type&&(o=["<radialgradient ",a,'="" cx="',l?h.x1:h.x2,'" cy="',l?h.y1:h.y2,'" r="',l?h.r1:h.r2,'" fx="',l?h.x2:h.x1,'" fy="',l?h.y2:h.y1,'">\n']),"radial"===this.type){if(l)for((c=c.concat()).reverse(),r=0,n=c.length;r<n;r++)c[r].offset=1-c[r].offset;var p="Math.min(h.r1,h.r2);if(p">0){var v=p/Math.max(h.r1,h.r2);for(r=0,n=c.length;r<n;r++)c[r].offset+=v*(1-c[r].offset)}}for(r=0,n=c.length;r<n;r++){var m="c[r];o.push("<stop" ",'offset="',100*m.offset+" %",'"="" style="stop-color:',m.color,void 0!==m.opacity?" ;stop-opacity:="" "+m.opacity:";",'"="">\n')}return o.push("linear"===this.type?"</n;r++)c[r].offset+=v*(1-c[r].offset)}}for(r=0,n=c.length;r<n;r++){var></n;r++)c[r].offset=1-c[r].offset;var></radialgradient></lineargradient>\n":"\n"),o.join("")},toLive:function(t){var e,i,r,n=s.util.object.clone(this.coords);if(this.type){for("linear"===this.type?e=t.createLinearGradient(n.x1,n.y1,n.x2,n.y2):"radial"===this.type&&(e=t.createRadialGradient(n.x1,n.y1,n.r1,n.x2,n.y2,n.r2)),i=0,r=this.colorStops.length;i<r;i++){var o="this.colorStops[i].color,a=this.colorStops[i].opacity,h=this.colorStops[i].offset;void" 0!="=a&&(o=new" s.color(o).setalpha(a).torgba()),e.addcolorstop(h,o)}return="" e}}}),s.util.object.extend(s.gradient,{fromelement:function(e,r){var="" n,o,a,h,c="e.getElementsByTagName("stop"),l=e.getAttribute("gradientUnits")||"objectBoundingBox",u=e.getAttribute("gradientTransform"),f=[];for("linear"===(n="linearGradient"===e.nodeName||"LINEARGRADIENT"===e.nodeName?"linear":"radial")?o=function(t){return{x1:t.getAttribute("x1")||0,y1:t.getAttribute("y1")||0,x2:t.getAttribute("x2")||"100%",y2:t.getAttribute("y2")||0}}(e):"radial"===n&&(o=function(t){return{x1:t.getAttribute("fx")||t.getAttribute("cx")||"50%",y1:t.getAttribute("fy")||t.getAttribute("cy")||"50%",r1:0,x2:t.getAttribute("cx")||"50%",y2:t.getAttribute("cy")||"50%",r2:t.getAttribute("r")||"50%"}}(e)),h=c.length;h--;)f.push(t(c[h]));a=i(r,o,l);var" d="new" s.gradient({type:n,coords:o,colorstops:f,offsetx:-r.left,offsety:-r.top});return(u||""!="=a)&&(d.gradientTransform=s.parseTransformAttribute((u||"")+a)),d},forObject:function(t,e){return" e||(e="{}),i(t,e.coords,"userSpaceOnUse"),new" s.gradient(e)}})}(),function(){"use="" strict";var="" t="s.util.toFixed;s.Pattern=s.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(t,e){if(t||(t={}),this.id=s.Object.__uid++,this.setOptions(t),!t.source||t.source&&"string"!=typeof" t.source)e&&e(this);else="" if(void="" function(s.util.getfunctionbody(t.source)),e&&e(this);else{var="" i="this;this.source=s.util.createImage(),s.util.loadImage(t.source,function(t){i.source=t,e&&e(i)},null,this.crossOrigin)}},toObject:function(e){var" i,r,o="s.Object.NUM_FRACTION_DIGITS;return"function"==typeof" this.source?i="String(this.source):"string"==typeof" this.source.src?i="this.source.src:"object"===n(this.source)&&this.source.toDataURL&&(i=this.source.toDataURL()),r={type:"pattern",source:i,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:t(this.offsetX,o),offsetY:t(this.offsetY,o),patternTransform:this.patternTransform?this.patternTransform.concat():null},s.util.populateWithProperties(this,r,e),r},toSVG:function(t){var" e="function" =="typeof" this.source?this.source():this.source,i="e.width/t.width,r=e.height/t.height,n=this.offsetX/t.width,s=this.offsetY/t.height,o="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(r=1,s&&(r+=Math.abs(s))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(i=1,n&&(i+=Math.abs(n))),e.src?o=e.src:e.toDataURL&&(o=e.toDataURL()),'<pattern" id="SVGID_'+this.id+'" x="'+n+'" y="'+s+'" width="'+i+'" height="'+r+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+o+'"></image>\n\n'},setOptions:function(t){for(var e in t)this[e]=t[e]},toLive:function(t){var e="function"==typeof this.source?this.source():this.source;if(!e)return"";if(void 0!==e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.toFixed;e.Shadow?e.warn("fabric.Shadow is already defined."):(e.Shadow=e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(t){for(var i in"string"==typeof t&&(t=this._parseShadow(t)),t)this[i]=t[i];this.id=e.Object.__uid++},_parseShadow:function(t){var i=t.trim(),r=e.Shadow.reOffsetsAndBlur.exec(i)||[];return{color:(i.replace(e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseInt(r[1],10)||0,offsetY:parseInt(r[2],10)||0,blur:parseInt(r[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var r=40,n=40,s=e.Object.NUM_FRACTION_DIGITS,o=e.util.rotateVector({x:this.offsetX,y:this.offsetY},e.util.degreesToRadians(-t.angle)),a=new e.Color(this.color);return t.width&&t.height&&(r=100*i((Math.abs(o.x)+this.blur)/t.width,s)+20,n=100*i((Math.abs(o.y)+this.blur)/t.height,s)+20),t.flipX&&(o.x*=-1),t.flipY&&(o.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+n+'%" height="'+(100+2*n)+'%" x="-'+r+'%" width="'+(100+2*r)+'%">\n\t<fegaussianblur in="SourceAlpha" stddeviation="'+i(this.blur?this.blur/2:0,s)+'"></fegaussianblur>\n\t<feoffset dx="'+i(o.x,s)+'" dy="'+i(o.y,s)+'" result="oBlur"></feoffset>\n\t<feflood flood-color="'+a.toRgb()+'" flood-opacity="'+a.getAlpha()+'">\n\t<fecomposite in2="oBlur" operator="in">\n\t<femerge>\n\t\t<femergenode></femergenode>\n\t\t<femergenode in="SourceGraphic"></femergenode>\n\t</femerge>\n</fecomposite></feflood></filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var t={},i=e.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(e){this[e]!==i[e]&&(t[e]=this[e])},this),t}}),e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/)}("undefined"!=typeof exports?exports:this),function(){"use strict";if(s.StaticCanvas)s.warn("fabric.StaticCanvas is already defined.");else{var t=s.util.object.extend,e=s.util.getElementOffset,i=s.util.removeFromArray,r=s.util.toFixed,n=s.util.transformPoint,o=s.util.invertTransform,a=s.util.getNodeCanvas,h=s.util.createCanvasElement,c=new Error("Could not initialize `canvas` element");s.StaticCanvas=s.util.createClass(s.CommonMethods,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:s.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,onBeforeScaleRotate:function(){},enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(t,e){var i=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this._setImageSmoothing(),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,i),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,i),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,i),e.overlayColor&&this.setOverlayColor(e.overlayColor,i),this.calcOffset()},_isRetinaScaling:function(){return 1!==s.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?s.devicePixelRatio:1},_initRetinaScaling:function(){this._isRetinaScaling()&&(this.lowerCanvasEl.setAttribute("width",this.width*s.devicePixelRatio),this.lowerCanvasEl.setAttribute("height",this.height*s.devicePixelRatio),this.contextContainer.scale(s.devicePixelRatio,s.devicePixelRatio))},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,i){return this.__setBgOverlayImage("overlayImage",t,e,i)},setBackgroundImage:function(t,e,i){return this.__setBgOverlayImage("backgroundImage",t,e,i)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},_setImageSmoothing:function(){var t=this.getContext();t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(t,e,i,r){return"string"==typeof e?s.util.loadImage(e,function(e){if(e){var n=new s.Image(e,r);this[t]=n,n.canvas=this}i&&i(e)},this,r&&r.crossOrigin):(r&&e.setOptions(r),this[t]=e,e&&(e.canvas=this),i&&i(e)),this},__setBgOverlayColor:function(t,e,i){return this[t]=e,this._initGradient(e,t),this._initPattern(e,t,i),this},_createCanvasElement:function(){var t=h();if(!t)throw c;if(t.style||(t.style={}),void 0===t.getContext)throw c;return t},_initOptions:function(t){var e=this.lowerCanvasEl;this._setOptions(t),this.width=this.width||parseInt(e.width,10)||0,this.height=this.height||parseInt(e.height,10)||0,this.lowerCanvasEl.style&&(e.width=this.width,e.height=this.height,e.style.width=this.width+"px",e.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){t&&t.getContext?this.lowerCanvasEl=t:this.lowerCanvasEl=s.util.getById(t)||this._createCanvasElement(),s.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var i;for(var r in e=e||{},t)i=t[r],e.cssOnly||(this._setBackstoreDimension(r,t[r]),i+="px",this.hasLostContext=!0),e.backstoreOnly||this._setCssDimension(r,i);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this._setImageSmoothing(),this.calcOffset(),e.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(t){var e,i,r,n=this._activeObject;for(this.viewportTransform=t,i=0,r=this._objects.length;i<r;i++)(e=this._objects[i]).group||e.setcoords(!1,!0);return n&&"activeselection"="==n.type&&n.setCoords(!1,!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(t,e){var" i="t,r=this.viewportTransform.slice(0);t=n(t,o(this.viewportTransform)),r[0]=e,r[3]=e;var" s="n(t,r);return" r[4]+="i.x-s.x,r[5]+=i.y-s.y,this.setViewportTransform(r)},setZoom:function(t){return" this.zoomtopoint(new="" s.point(0,0),t),this},absolutepan:function(t){var="" e="this.viewportTransform.slice(0);return" e[4]="-t.x,e[5]=-t.y,this.setViewportTransform(e)},relativePan:function(t){return" this.absolutepan(new="" s.point(-t.x-this.viewporttransform[4],-t.y-this.viewporttransform[5]))},getelement:function(){return="" this.lowercanvasel},_onobjectadded:function(t){this.stateful&&t.setupstate(),t._set("canvas",this),t.setcoords(),this.fire("object:added",{target:t}),t.fire("added")},_onobjectremoved:function(t){this.fire("object:removed",{target:t}),t.fire("removed"),delete="" t.canvas},clearcontext:function(t){return="" t.clearrect(0,0,this.width,this.height),this},getcontext:function(){return="" this.contextcontainer},clear:function(){return="" this._objects.length="0,this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var" t="this.contextContainer;return" this.rendercanvas(t,this._objects),this},renderandreset:function(){this.isrendering="0,this.renderAll()},requestRenderAll:function(){return" this.isrendering||(this.isrendering="s.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var" t.tl="n({x:0,y:0},r),t.br=n({x:e,y:i},r),t.tr=new" s.point(t.br.x,t.tl.y),t.bl="new" s.point(t.tl.x,t.br.y),this.vptcoords="t,t},cancelRequestedRender:function(){this.isRendering&&(s.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(t,e){var" i,r;for(i="0,r=e.length;i<r;++i)e[i]&&e[i].render(t)},_renderBackgroundOrOverlay:function(t,e){var" o="i.gradientTransform||i.patternTransform;o&&t.transform(o[0],o[1],o[2],o[3],o[4],o[5]),t.fill(),t.restore()}r&&(t.save(),s&&t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),r.render(t),t.restore())}},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,"background")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(t){return" this._centerobject(t,new="" s.point(this.getcenter().left,t.getcenterpoint().y))},centerobjectv:function(t){return="" s.point(t.getcenterpoint().x,this.getcenter().top))},centerobject:function(t){var="" s.point(e.left,e.top))},viewportcenterobject:function(t){var="" this._centerobject(t,e)},viewportcenterobjecth:function(t){var="" s.point(e.x,t.getcenterpoint().y)),this},viewportcenterobjectv:function(t){var="" s.point(t.getcenterpoint().x,e.y))},getvpcenter:function(){var="" n({x:t.left,y:t.top},e)},_centerobject:function(t,e){return="" t.setpositionbyorigin(e,"center","center"),t.setcoords(),this.renderonaddremove&&this.requestrenderall(),this},todatalessjson:function(t){return="" this.todatalessobject(t)},toobject:function(t){return="" this._toobjectmethod("toobject",t)},todatalessobject:function(t){return="" this._toobjectmethod("todatalessobject",t)},_toobjectmethod:function(e,i){var="" r="this.clipPath,n={version:s.version,objects:this._toObjects(e,i)};return" r&&(n.clippath="this._toObject(this.clipPath,e,i)),t(n,this.__serializeBgOverlay(e,i)),s.util.populateWithProperties(this,n,i),n},_toObjects:function(t,e){return" this._objects.filter(function(t){return!t.excludefromexport}).map(function(i){return="" this._toobject(i,t,e)},this)},_toobject:function(t,e,i){var="" r;this.includedefaultvalues||(r="t.includeDefaultValues,t.includeDefaultValues=!1);var" n="t[e](i);return" this.includedefaultvalues||(t.includedefaultvalues="r),n},__serializeBgOverlay:function(t,e){var" this.backgroundcolor&&(i.background="this.backgroundColor.toObject?this.backgroundColor.toObject(e):this.backgroundColor),this.overlayColor&&(i.overlay=this.overlayColor.toObject?this.overlayColor.toObject(e):this.overlayColor),r&&!r.excludeFromExport&&(i.backgroundImage=this._toObject(r,t,e)),n&&!n.excludeFromExport&&(i.overlayImage=this._toObject(n,t,e)),i},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={}),t.reviver=e;var" this._setsvgpreamble(i,t),this._setsvgheader(i,t),this.clippath&&i.push('<g="" clip-path="url(#'+this.clipPath.clipPathId+')">\n'),this._setSVGBgOverlayColor(i,"background"),this._setSVGBgOverlayImage(i,"backgroundImage",e),this._setSVGObjects(i,e),this.clipPath&&i.push("\n"),this._setSVGBgOverlayColor(i,"overlay"),this._setSVGBgOverlayImage(i,"overlayImage",e),i.push(""),i.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var i,n=e.width||this.width,o=e.height||this.height,a='viewBox="0 0 '+this.width+" "+this.height+'" ',h=s.Object.NUM_FRACTION_DIGITS;e.viewBox?a='viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':this.svgViewportTransformation&&(i=this.viewportTransform,a='viewBox="'+r(-i[4]/i[0],h)+" "+r(-i[5]/i[3],h)+" "+r(this.width/i[0],h)+" "+r(this.height/i[3],h)+'" '),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',o,'" ',a,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",s.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),"</defs>\n")},createSVGClipPathMarkup:function(t){var e=this.clipPath;return e?(e.clipPathId="CLIPPATH_"+s.Object.__uid++,'<clippath id="'+e.clipPathId+'">\n'+this.clipPath.toClipPathSVG(t.reviver)+"</clippath>\n"):""},createSVGRefElementsMarkup:function(){var t=this;return["background","overlay"].map(function(e){var i=t[e+"Color"];if(i&&i.toLive){var r=t[e+"Vpt"],n=t.viewportTransform,o={width:t.width/(r?n[0]:1),height:t.height/(r?n[3]:1)};return i.toSVG(o,{additionalTransform:r?s.util.matrixToSVG(n):""})}}).join("")},createSVGFontFacesMarkup:function(){var t,e,i,r,n,o,a,h,c="",l={},u=s.fontPaths,f=this._objects;for(a=0,h=f.length;a<h;a++)if(e=(t=f[a]).fontfamily,-1!==t.type.indexof("text")&&!l[e]&&u[e]&&(l[e]=!0,t.styles))for(n in="" i="t.styles)for(o" r="i[n])!l[e=r[o].fontFamily]&&u[e]&&(l[e]=!0);for(var" d="" l)c+="["\t\t@font-face" {\n","\t\t\tfont-family:="" '",d,"';\n","\t\t\tsrc:="" url('",u[d],"');\n","\t\t}\n"].join("");return="" c&&(c="['\t<style" type="text/css">',"<!--[CDATA[\n",c,"]]-->","\n"].join("")),c},_setSVGObjects:function(t,e){var i,r,n,s=this._objects;for(r=0,n=s.length;r<n;r++)(i=s[r]).excludefromexport||this._setsvgobject(t,i,e)},_setsvgobject:function(t,e,i){t.push(e.tosvg(i))},_setsvgbgoverlayimage:function(t,e,i){this[e]&&!this[e].excludefromexport&&this[e].tosvg&&t.push(this[e].tosvg(i))},_setsvgbgoverlaycolor:function(t,e){var i="this[e+"Color"],r=this.viewportTransform,n=this.width,o=this.height;if(i)if(i.toLive){var" a="i.repeat,h=s.util.invertTransform(r),c=this[e+"Vpt"]?s.util.matrixToSVG(h):"";t.push('<rect" transform="'+c+" translate(",n="" 2,",",o="" 2,')"','="" x="',i.offsetX-n/2,'" y="',i.offsetY-o/2,'" ','width="'," repeat-y"="==a||"no-repeat"===a?i.source.width:n,'"" height="'," repeat-x"="==a||"no-repeat"===a?i.source.height:o,'"" fill="url(#SVGID_'+i.id+')" ',"="">\n")}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',i,'" ',"=""/>\n")},sendToBack:function(t){if(!t)return this;var e,r,n,s=this._activeObject;if(t===s&&"activeSelection"===t.type)for(e=(n=s._objects).length;e--;)r=n[e],i(this._objects,r),this._objects.unshift(r);else i(this._objects,t),this._objects.unshift(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(t){if(!t)return this;var e,r,n,s=this._activeObject;if(t===s&&"activeSelection"===t.type)for(n=s._objects,e=0;e<n.length;e++)r=n[e],i(this._objects,r),this._objects.push(r);else i(this._objects,t),this._objects.push(t);return="" this.renderonaddremove&&this.requestrenderall(),this},sendbackwards:function(t,e){if(!t)return="" this;var="" r,n,s,o,a,h="this._activeObject,c=0;if(t===h&&"activeSelection"===t.type)for(a=h._objects,r=0;r<a.length;r++)n=a[r],(s=this._objects.indexOf(n))">0+c&&(o=s-1,i(this._objects,n),this._objects.splice(o,0,n)),c++;else 0!==(s=this._objects.indexOf(t))&&(o=this._findNewLowerIndex(t,s,e),i(this._objects,t),this._objects.splice(o,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(t,e,i){var r,n;if(i)for(r=e,n=e-1;n>=0;--n){if(t.intersectsWithObject(this._objects[n])||t.isContainedWithinObject(this._objects[n])||this._objects[n].isContainedWithinObject(t)){r=n;break}}else r=e-1;return r},bringForward:function(t,e){if(!t)return this;var r,n,s,o,a,h=this._activeObject,c=0;if(t===h&&"activeSelection"===t.type)for(r=(a=h._objects).length;r--;)n=a[r],(s=this._objects.indexOf(n))<this._objects.length-1-c&&(o=s+1,i(this._objects,n),this._objects.splice(o,0,n)),c++;else(s=this._objects.indexof(t))!==this._objects.length-1&&(o=this._findnewupperindex(t,s,e),i(this._objects,t),this._objects.splice(o,0,t));return this.renderonaddremove&&this.requestrenderall(),this},_findnewupperindex:function(t,e,i){var="" r,n,s;if(i)for(r="e,n=e+1,s=this._objects.length;n<s;++n){if(t.intersectsWithObject(this._objects[n])||t.isContainedWithinObject(this._objects[n])||this._objects[n].isContainedWithinObject(t)){r=n;break}}else" r="e+1;return" r},moveto:function(t,e){return="" i(this._objects,t),this._objects.splice(e,0,t),this.renderonaddremove&&this.requestrenderall()},dispose:function(){return="" this.isrendering&&(s.util.cancelanimframe(this.isrendering),this.isrendering="0),this.forEachObject(function(t){t.dispose&&t.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,s.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void" 0,this},tostring:function(){return"#<fabric.canvas="" ("+this.complexity()+"):="" {="" objects:="" "+this._objects.length+"="" }="">"}}),t(s.StaticCanvas.prototype,s.Observable),t(s.StaticCanvas.prototype,s.Collection),t(s.StaticCanvas.prototype,s.DataURLExporter),t(s.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=h();if(!e||!e.getContext)return null;var i=e.getContext("2d");if(!i)return null;switch(t){case"setLineDash":return void 0!==i.setLineDash;default:return null}}}),s.StaticCanvas.prototype.toJSON=s.StaticCanvas.prototype.toObject,s.isLikelyNode&&(s.StaticCanvas.prototype.createPNGStream=function(){var t=a(this.lowerCanvasEl);return t&&t.createPNGStream()},s.StaticCanvas.prototype.createJPEGStream=function(t){var e=a(this.lowerCanvasEl);return e&&e.createJPEGStream(t)})}}(),s.BaseBrush=s.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,setShadow:function(t){return this.shadow=new s.Shadow(t),this},_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,s.StaticCanvas.supports("setLineDash")&&t.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(t){var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},_setShadow:function(){if(this.shadow){var t=this.canvas.contextTop,e=this.canvas.getZoom();t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*e,t.shadowOffsetX=this.shadow.offsetX*e,t.shadowOffsetY=this.shadow.offsetY*e}},needsFullRender:function(){return new s.Color(this.color).getAlpha()<1||!!this.shadow},_resetshadow:function(){var t="this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}}),s.PencilBrush=s.util.createClass(s.BaseBrush,{decimate:.4,initialize:function(t){this.canvas=t,this._points=[]},_drawSegment:function(t,e,i){var" r="e.midPointFrom(i);return" t.quadraticcurveto(e.x,e.y,r.x,r.y),r},onmousedown:function(t,e){this.canvas._ismainevent(e.e)&&(this._preparefordrawing(t),this._capturedrawingpath(t),this._render())},onmousemove:function(t,e){if(this.canvas._ismainevent(e.e)&&this._capturedrawingpath(t)&&this._points.length="">1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var i=this._points,r=i.length,n=this.canvas.contextTop;this._saveAndTransform(n),this.oldEnd&&(n.beginPath(),n.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(n,i[r-2],i[r-1],!0),n.stroke(),n.restore()}},onMouseUp:function(t){return!this.canvas._isMainEvent(t.e)||(this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(t){var e=new s.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){return!(this._points.length>1&&t.eq(this._points[this._points.length-1])||(this._points.push(t),0))},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){var e=new s.Point(t.x,t.y);return this._addPoint(e)},_render:function(){var t,e,i=this.canvas.contextTop,r=this._points[0],n=this._points[1];if(this._saveAndTransform(i),i.beginPath(),2===this._points.length&&r.x===n.x&&r.y===n.y){var o=this.width/1e3;r=new s.Point(r.x,r.y),n=new s.Point(n.x,n.y),r.x-=o,n.x+=o}for(i.moveTo(r.x,r.y),t=1,e=this._points.length;t<e;t++)this._drawsegment(i,r,n),r=this._points[t],n=this._points[t+1];i.lineto(r.x,r.y),i.stroke(),i.restore()},convertpointstosvgpath:function(t){var e,i="[],r=this.width/1e3,n=new" s.point(t[0].x,t[0].y),o="new" s.point(t[1].x,t[1].y),a="t.length,h=1,c=0,l=a">2;for(l&&(h=t[2].x<o.x?-1:t[2].x===o.x?0:1,c=t[2].y<o.y?-1:t[2].y===o.y?0:1),i.push("m ",n.x-h*r,"="" ",n.y-c*r,"="" "),e="1;e<a;e++){if(!n.eq(o)){var" u="n.midPointFrom(o);i.push("Q" ",n.x,"="" ",n.y,"="" ",u.x,"="" ",u.y,"="" ")}n="t[e],e+1<t.length&&(o=t[e+1])}return" l&&(h="n.x">t[e-2].x?1:n.x===t[e-2].x?0:-1,c=n.y>t[e-2].y?1:n.y===t[e-2].y?0:-1),i.push("L ",n.x+h*r," ",n.y+c*r),i},createPath:function(t){var e=new s.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,e.setShadow(this.shadow)),e},decimatePoints:function(t,e){if(t.length<=2)return t;var="" i,r="this.canvas.getZoom(),n=Math.pow(e/r,2),o=t.length-1,a=t[0],h=[a];for(i=1;i<o;i++)Math.pow(a.x-t[i].x,2)+Math.pow(a.y-t[i].y,2)">=n&&(a=t[i],h.push(a));return 1===h.length&&h.push(new s.Point(h[0].x,h[0].y)),h},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var t=this.convertPointsToSVGPath(this._points).join("");if("M 0 0 Q 0 0 0 0 L 0 0"!==t){var e=this.createPath(t);this.canvas.clearContext(this.canvas.contextTop),this.canvas.add(e),this.canvas.renderAll(),e.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:e})}else this.canvas.requestRenderAll()}}),s.CircleBrush=s.util.createClass(s.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),i=this.canvas.contextTop;this._saveAndTransform(i),this.dot(i,e),i.restore()},dot:function(t,e){t.fillStyle=e.fill,t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.closePath(),t.fill()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},_render:function(){var t,e,i=this.canvas.contextTop,r=this.points;for(this._saveAndTransform(i),t=0,e=r.length;t<e;t++)this.dot(i,r[t]);i.restore()},onmousemove:function(t){this.needsfullrender()?(this.canvas.clearcontext(this.canvas.contexttop),this.addpoint(t),this._render()):this.drawdot(t)},onmouseup:function(){var t,e,i="this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var" r="[];for(t=0,e=this.points.length;t<e;t++){var" n="this.points[t],o=new" s.circle({radius:n.radius,left:n.x,top:n.y,originx:"center",originy:"center",fill:n.fill});this.shadow&&o.setshadow(this.shadow),r.push(o)}var="" a="new" s.group(r);a.canvas="this.canvas,this.canvas.add(a),this.canvas.fire("path:created",{path:a}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=i,this.canvas.requestRenderAll()},addPoint:function(t){var" e="new" s.point(t.x,t.y),i="s.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,r=new" s.color(this.color).setalpha(s.util.getrandomint(0,100)="" 100).torgba();return="" e.radius="i,e.fill=r,this.points.push(e),e}}),s.SprayBrush=s.util.createClass(s.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render(this.sprayChunkPoints)},onMouseMove:function(t){this.addSprayChunk(t),this.render(this.sprayChunkPoints)},onMouseUp:function(){var" t="this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var" h="new" s.rect({width:n[o].width,height:n[o].width,left:n[o].x+1,top:n[o].y+1,originx:"center",originy:"center",fill:this.color});e.push(h)}this.optimizeoverlapping&&(e="this._getOptimizedRects(e));var" c="new" s.group(e);this.shadow&&c.setshadow(this.shadow),this.canvas.add(c),this.canvas.fire("path:created",{path:c}),this.canvas.clearcontext(this.canvas.contexttop),this._resetshadow(),this.canvas.renderonaddremove="t,this.canvas.requestRenderAll()},_getOptimizedRects:function(t){var" e,i,r,n="{};for(i=0,r=t.length;i<r;i++)n[e=t[i].left+""+t[i].top]||(n[e]=t[i]);var" s="[];for(e" in="" n)s.push(n[e]);return="" s},render:function(t){var="" e,i,r="this.canvas.contextTop;for(r.fillStyle=this.color,this._saveAndTransform(r),e=0,i=t.length;e<i;e++){var" 0!="=n.opacity&&(r.globalAlpha=n.opacity),r.fillRect(n.x,n.y,n.width,n.width)}r.restore()},_render:function(){var" e,i,r,n,o="this.width/2;for(n=0;n<this.density;n++){e=s.util.getRandomInt(t.x-o,t.x+o),i=s.util.getRandomInt(t.y-o,t.y+o),r=this.dotWidthVariance?s.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var" s.point(e,i);a.width="r,this.randomOpacity&&(a.opacity=s.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(a)}this.sprayChunks.push(this.sprayChunkPoints)}}),s.PatternBrush=s.util.createClass(s.PencilBrush,{getPatternSrc:function(){var" t.width="t.height=25,e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill(),t},getPatternSrcFunction:function(){return" string(this.getpatternsrc).replace("this.color",'"'+this.color+'"')},getpattern:function(){return="" this.canvas.contexttop.createpattern(this.source||this.getpatternsrc(),"repeat")},_setbrushstyles:function(){this.callsuper("_setbrushstyles"),this.canvas.contexttop.strokestyle="this.getPattern()},createPath:function(t){var" e.stroke="new" s.pattern({source:this.source||this.getpatternsrcfunction(),offsetx:-i.x,offsety:-i.y}),e}}),function(){var="" s.canvas="s.util.createClass(s.StaticCanvas,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniScaleTransform:!1,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100," 100,="" 255,="" 0.3)",selectiondasharray:[],selectionbordercolor:"rgba(255,="" 0.3)",selectionlinewidth:1,selectionfullycontained:!1,hovercursor:"move",movecursor:"move",defaultcursor:"default",freedrawingcursor:"crosshair",rotationcursor:"crosshair",notallowedcursor:"not-allowed",containerclass:"canvas-container",perpixeltargetfind:!1,targetfindtolerance:0,skiptargetfind:!1,isdrawingmode:!1,preserveobjectstacking:!1,snapangle:0,snapthreshold:null,stopcontextmenu:!1,firerightclick:!1,firemiddleclick:!1,_initinteractive:function(){this._currenttransform="null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=s.PencilBrush&&new" s.pencilbrush(this),this.calcoffset()},_chooseobjectstorender:function(){var="" t,e,i,r="this.getActiveObjects();if(r.length">0&&!this.preserveObjectStacking){e=[],i=[];for(var n=0,s=this._objects.length;n<s;n++)t=this._objects[n],-1===r.indexof(t)?e.push(t):i.push(t);r.length>1&&(this._activeObject._objects=i),e.push.apply(e,i)}else e=this._objects;return e},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire("after:render"),this},_resetCurrentTransform:function(){var t=this._currentTransform;t.target.set({scaleX:t.original.scaleX,scaleY:t.original.scaleY,skewX:t.original.skewX,skewY:t.original.skewY,left:t.original.left,top:t.original.top}),this._shouldCenterTransform(t.target)?("center"!==t.originX&&("right"===t.originX?t.mouseXSign=-1:t.mouseXSign=1),"center"!==t.originY&&("bottom"===t.originY?t.mouseYSign=-1:t.mouseYSign=1),t.originX="center",t.originY="center"):(t.originX=t.original.originX,t.originY=t.original.originY)},containsPoint:function(t,e,i){var r,n=i||this.getPointer(t,!0);return r=e.group&&e.group===this._activeObject&&"activeSelection"===e.group.type?this._normalizePointer(e.group,n):{x:n.x,y:n.y},e.containsPoint(r)||e._findTargetCorner(n)},_normalizePointer:function(t,e){var i=t.calcTransformMatrix(),r=s.util.invertTransform(i),n=this.restorePointerVpt(e);return s.util.transformPoint(n,r)},isTargetTransparent:function(t,e,i){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject){var r=this._normalizePointer(t,{x:e,y:i}),n=Math.max(t.cacheTranslationX+r.x*t.zoomX,0),o=Math.max(t.cacheTranslationY+r.y*t.zoomY,0);return s.util.isTransparent(t._cacheContext,Math.round(n),Math.round(o),this.targetFindTolerance)}var a=this.contextCache,h=t.selectionBackgroundColor,c=this.viewportTransform;return t.selectionBackgroundColor="",this.clearContext(a),a.save(),a.transform(c[0],c[1],c[2],c[3],c[4],c[5]),t.render(a),a.restore(),t===this._activeObject&&t._renderControls(a,{hasBorders:!1,transparentCorners:!1},{hasBorders:!1}),t.selectionBackgroundColor=h,s.util.isTransparent(a,e,i,this.targetFindTolerance)},_isSelectionKeyPressed:function(t){return"[object Array]"===Object.prototype.toString.call(this.selectionKey)?!!this.selectionKey.find(function(e){return!0===t[e]}):t[this.selectionKey]},_shouldClearSelection:function(t,e){var i=this.getActiveObjects(),r=this._activeObject;return!e||e&&r&&i.length>1&&-1===i.indexOf(e)&&r!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&r&&r!==e},_shouldCenterTransform:function(t){if(t){var e,i=this._currentTransform;return"scale"===i.action||"scaleX"===i.action||"scaleY"===i.action?e=this.centeredScaling||t.centeredScaling:"rotate"===i.action&&(e=this.centeredRotation||t.centeredRotation),e?!i.altKey:i.altKey}},_getOriginFromCorner:function(t,e){var i={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?i.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(i.x="left"),"tl"===e||"mt"===e||"tr"===e?i.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(i.y="top"),i},_getActionFromCorner:function(t,e,i){if(!e||!t)return"drag";switch(e){case"mtr":return"rotate";case"ml":case"mr":return i[this.altActionKey]?"skewY":"scaleX";case"mt":case"mb":return i[this.altActionKey]?"skewX":"scaleY";default:return"scale"}},_setupCurrentTransform:function(t,i,r){if(i){var n=this.getPointer(t),o=i._findTargetCorner(this.getPointer(t,!0)),a=this._getActionFromCorner(r,o,t,i),h=this._getOriginFromCorner(i,o);this._currentTransform={target:i,action:a,corner:o,scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,offsetX:n.x-i.left,offsetY:n.y-i.top,originX:h.x,originY:h.y,ex:n.x,ey:n.y,lastX:n.x,lastY:n.y,theta:e(i.angle),width:i.width*i.scaleX,mouseXSign:1,mouseYSign:1,shiftKey:t.shiftKey,altKey:t[this.centeredKey],original:s.util.saveObjectTransform(i)},this._currentTransform.original.originX=h.x,this._currentTransform.original.originY=h.y,this._resetCurrentTransform(),this._beforeTransform(t)}},_translateObject:function(t,e){var i=this._currentTransform,r=i.target,n=t-i.offsetX,s=e-i.offsetY,o=!r.get("lockMovementX")&&r.left!==n,a=!r.get("lockMovementY")&&r.top!==s;return o&&r.set("left",n),a&&r.set("top",s),o||a},_changeSkewTransformOrigin:function(t,e,i){var r="originX",n={0:"center"},s=e.target.skewX,o="left",a="right",h="mt"===e.corner||"ml"===e.corner?1:-1,c=1;t=t>0?1:-1,"y"===i&&(s=e.target.skewY,o="top",a="bottom",r="originY"),n[-1]=o,n[1]=a,e.target.flipX&&(c*=-1),e.target.flipY&&(c*=-1),0===s?(e.skewSign=-h*t*c,e[r]=n[-t]):(s=s>0?1:-1,e.skewSign=s,e[r]=n[s*h*c])},_skewObject:function(t,e,i){var r,n=this._currentTransform,o=n.target,a=o.get("lockSkewingX"),h=o.get("lockSkewingY");if(a&&"x"===i||h&&"y"===i)return!1;var c,l,u=o.getCenterPoint(),f=o.toLocalPoint(new s.Point(t,e),"center","center")[i],d=o.toLocalPoint(new s.Point(n.lastX,n.lastY),"center","center")[i],g=o._getTransformedDimensions();return this._changeSkewTransformOrigin(f-d,n,i),c=o.toLocalPoint(new s.Point(t,e),n.originX,n.originY)[i],l=o.translateToOriginPoint(u,n.originX,n.originY),r=this._setObjectSkew(c,n,i,g),n.lastX=t,n.lastY=e,o.setPositionByOrigin(l,n.originX,n.originY),r},_setObjectSkew:function(t,e,i,r){var n,o,a,h,c,l,u,f,d,g,p=e.target,v=e.skewSign;return"x"===i?(c="y",l="Y",u="X",d=0,g=p.skewY):(c="x",l="X",u="Y",d=p.skewX,g=0),h=p._getTransformedDimensions(d,g),(f=2*Math.abs(t)-h[i])<=2?n=0:(n=v*math.atan(f p["scale"+u]="" (h[c]="" p["scale"+l])),n="s.util.radiansToDegrees(n)),o=p["skew"+u]!==n,p.set("skew"+u,n),0!==p["skew"+l]&&(a=p._getTransformedDimensions(),n=r[c]/a[c]*p["scale"+l],p.set("scale"+l,n)),o},_scaleObject:function(t,e,i){var" r="this._currentTransform,n=r.target,o=n.lockScalingX,a=n.lockScalingY,h=n.lockScalingFlip;if(o&&a)return!1;var" c,l="n.translateToOriginPoint(n.getCenterPoint(),r.originX,r.originY),u=n.toLocalPoint(new" s.point(t,e),r.originx,r.originy),f="n._getTransformedDimensions();return" this._setlocalmouse(u,r),c="this._setObjectScale(u,r,o,a,i,h,f),n.setPositionByOrigin(l,r.originX,r.originY),c},_setObjectScale:function(t,e,i,r,n,o,a){var" h="e.target,c=!1,l=!1,u=!1,f=t.x*h.scaleX/a.x,d=t.y*h.scaleY/a.y,g=h.scaleX!==f,p=h.scaleY!==d;if(e.newScaleX=f,e.newScaleY=d,"x"===n&&h" instanceof="" s.textbox){var="" v="h.width*(t.x/a.x);return">=h.getMinWidth()&&(u=v!==h.width,h.set("width",v),u)}return o&&f<=0&&f<h.scalex&&(c=!0,t.x=0),o&&d<=0&&d<h.scaley&&(l=!0,t.y=0),"equally"!==n||i||r?n?"x"!==n||h.get("lockuniscaling")?"y"!==n||h.get("lockuniscaling")||l||r||h.set("scaley",d)&&(u=p):c||i||h.set("scalex",f)&&(u=g):(c||i||h.set("scalex",f)&&(u=u||g),l||r||h.set("scaley",d)&&(u=u||p)):u=this._scaleobjectequally(t,h,e,a),c||l||this._flipobject(e,n),u},_scaleobjectequally:function(t,e,i,r){var n,s,o,a="t.y+t.x,h=r.y*i.original.scaleY/e.scaleY+r.x*i.original.scaleX/e.scaleX,c=t.x<0?-1:1,l=t.y<0?-1:1;return" s="c*Math.abs(i.original.scaleX*a/h),o=l*Math.abs(i.original.scaleY*a/h),n=s!==e.scaleX||o!==e.scaleY,e.set("scaleX",s),e.set("scaleY",o),n},_flipObject:function(t,e){t.newScaleX<0&&"y"!==e&&("left"===t.originX?t.originX="right":"right"===t.originX&&(t.originX="left")),t.newScaleY<0&&"x"!==e&&("top"===t.originY?t.originY="bottom":"bottom"===t.originY&&(t.originY="top"))},_setLocalMouse:function(t,e){var" i="e.target,r=this.getZoom(),s=i.padding/r;"right"===e.originX?t.x*=-1:"center"===e.originX&&(t.x*=2*e.mouseXSign,t.x<0&&(e.mouseXSign=-e.mouseXSign)),"bottom"===e.originY?t.y*=-1:"center"===e.originY&&(t.y*=2*e.mouseYSign,t.y<0&&(e.mouseYSign=-e.mouseYSign)),n(t.x)">s?t.x<0?t.x+=s:t.x-=s:t.x=0,n(t.y)>s?t.y<0?t.y+=s:t.y-=s:t.y=0},_rotateobject:function(t,e){var n="this._currentTransform,s=n.target,o=s.translateToOriginPoint(s.getCenterPoint(),n.originX,n.originY);if(s.lockRotation)return!1;var" a="r(n.ey-o.y,n.ex-o.x),h=r(e-o.y,t-o.x),c=i(h-a+n.theta),l=!0;if(s.snapAngle">0){var u=s.snapAngle,f=s.snapThreshold||u,d=Math.ceil(c/u)*u,g=Math.floor(c/u)*u;Math.abs(c-g)<f?c=g:math.abs(c-d)<f&&(c=d)}return c<0&&(c="360+c),c%=360,s.angle===c?l=!1:(s.angle=c,s.setPositionByOrigin(o,n.originX,n.originY)),l},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var" e="this._groupSelector,i=e.left,r=e.top,a=n(i),h=n(r);if(this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(e.ex-(i">0?0:-i),e.ey-(r>0?0:-r),a,h)),this.selectionLineWidth&&this.selectionBorderColor)if(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1&&!o){var c=e.ex+.5-(i>0?0:a),l=e.ey+.5-(r>0?0:h);t.beginPath(),s.util.drawDashedLine(t,c,l,c+a,l,this.selectionDashArray),s.util.drawDashedLine(t,c,l+h-1,c+a,l+h-1,this.selectionDashArray),s.util.drawDashedLine(t,c,l,c,l+h,this.selectionDashArray),s.util.drawDashedLine(t,c+a-1,l,c+a-1,l+h,this.selectionDashArray),t.closePath(),t.stroke()}else s.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(e.ex+.5-(i>0?0:a),e.ey+.5-(r>0?0:h),a,h)},findTarget:function(t,e){if(!this.skipTargetFind){var i,r,n=this.getPointer(t,!0),s=this._activeObject,o=this.getActiveObjects();if(this.targets=[],o.length>1&&!e&&s===this._searchPossibleTargets([s],n))return s;if(1===o.length&&s._findTargetCorner(n))return s;if(1===o.length&&s===this._searchPossibleTargets([s],n)){if(!this.preserveObjectStacking)return s;i=s,r=this.targets,this.targets=[]}var a=this._searchPossibleTargets(this._objects,n);return t[this.altSelectionKey]&&a&&i&&a!==i&&(a=i,this.targets=r),a}},_checkTarget:function(t,e,i){if(e&&e.visible&&e.evented&&this.containsPoint(null,e,t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;if(!this.isTargetTransparent(e,i.x,i.y))return!0}},_searchPossibleTargets:function(t,e){for(var i,r,n=t.length;n--;){var o=t[n],a=o.group&&"activeSelection"!==o.group.type?this._normalizePointer(o.group,e):e;if(this._checkTarget(a,o,e)){(i=t[n]).subTargetCheck&&i instanceof s.Group&&(r=this._searchPossibleTargets(i._objects,e))&&this.targets.push(r);break}}return i},restorePointerVpt:function(t){return s.util.transformPoint(t,s.util.invertTransform(this.viewportTransform))},getPointer:function(e,i){if(this._absolutePointer&&!i)return this._absolutePointer;if(this._pointer&&i)return this._pointer;var r,n=t(e),s=this.upperCanvasEl,o=s.getBoundingClientRect(),a=o.width||0,h=o.height||0;return a&&h||("top"in o&&"bottom"in o&&(h=Math.abs(o.top-o.bottom)),"right"in o&&"left"in o&&(a=Math.abs(o.right-o.left))),this.calcOffset(),n.x=n.x-this._offset.left,n.y=n.y-this._offset.top,i||(n=this.restorePointerVpt(n)),r=0===a||0===h?{width:1,height:1}:{width:s.width/a,height:s.height/h},{x:n.x*r.width,y:n.y*r.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,"");this.upperCanvasEl?this.upperCanvasEl.className="":this.upperCanvasEl=this._createCanvasElement(),s.util.addClass(this.upperCanvasEl,"upper-canvas "+t),this.wrapperEl.appendChild(this.upperCanvasEl),this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=s.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),s.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),s.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,i=this.height||t.height;s.util.setStyle(t,{position:"absolute",width:e+"px",height:i+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),t.width=e,t.height=i,s.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?"activeSelection"===t.type&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),this._hoveredTarget===t&&(this._hoveredTarget=null),this.callSuper("_onObjectRemoved",t)},_fireSelectionEvents:function(t,e){var i=!1,r=this.getActiveObjects(),n=[],s=[],o={e:e};t.forEach(function(t){-1===r.indexOf(t)&&(i=!0,t.fire("deselected",o),s.push(t))}),r.forEach(function(e){-1===t.indexOf(e)&&(i=!0,e.fire("selected",o),n.push(e))}),t.length>0&&r.length>0?(o.selected=n,o.deselected=s,o.updated=n[0]||s[0],o.target=this._activeObject,i&&this.fire("selection:updated",o)):r.length>0?(1===r.length&&(o.target=n[0],this.fire("object:selected",o)),o.selected=n,o.target=this._activeObject,this.fire("selection:created",o)):t.length>0&&(o.deselected=s,this.fire("selection:cleared",o))},setActiveObject:function(t,e){var i=this.getActiveObjects();return this._setActiveObject(t,e),this._fireSelectionEvents(i,e),this},_setActiveObject:function(t,e){return this._activeObject!==t&&(!!this._discardActiveObject(e,t)&&(!t.onSelect({e:e})&&(this._activeObject=t,!0)))},_discardActiveObject:function(t,e){var i=this._activeObject;if(i){if(i.onDeselect({e:t,object:e}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var e=this.getActiveObjects(),i=this.getActiveObject();return e.length&&this.fire("before:selection:cleared",{target:i,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(e,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(t){s.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,s.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,i){var r=this._realizeGroupTransformOnObject(t),n=this.callSuper("_toObject",t,e,i);return this._unwindGroupTransformOnObject(t,r),n},_realizeGroupTransformOnObject:function(t){if(t.group&&"activeSelection"===t.group.type&&this._activeObject===t.group){var e={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(i){e[i]=t[i]}),this._activeObject.realizeTransform(t),e}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,i){var r=this._realizeGroupTransformOnObject(e);this.callSuper("_setSVGObject",t,e,i),this._unwindGroupTransformOnObject(e,r)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),s.StaticCanvas.prototype.setViewportTransform.call(this,t)}}),s.StaticCanvas)"prototype"!==a&&(s.Canvas[a]=s.StaticCanvas[a])}(),function(){var t={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},e=s.util.addListener,i=s.util.removeListener,r={passive:!1};function n(t,e){return t.button&&t.button===e-1}s.util.object.extend(s.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(e,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(t,e){var i=this.upperCanvasEl,n=this._getEventPrefix();t(s.window,"resize",this._onResize),t(i,n+"down",this._onMouseDown),t(i,n+"move",this._onMouseMove,r),t(i,n+"out",this._onMouseOut),t(i,n+"enter",this._onMouseEnter),t(i,"wheel",this._onMouseWheel),t(i,"contextmenu",this._onContextMenu),t(i,"dblclick",this._onDoubleClick),t(i,"dragover",this._onDragOver),t(i,"dragenter",this._onDragEnter),t(i,"dragleave",this._onDragLeave),t(i,"drop",this._onDrop),this.enablePointerEvents||t(i,"touchstart",this._onTouchStart,r),void 0!==h&&e in h&&(h[e](i,"gesture",this._onGesture),h[e](i,"drag",this._onDrag),h[e](i,"orientation",this._onOrientationChange),h[e](i,"shake",this._onShake),h[e](i,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(i,"remove");var t=this._getEventPrefix();i(s.document,t+"up",this._onMouseUp),i(s.document,"touchend",this._onTouchEnd,r),i(s.document,t+"move",this._onMouseMove,r),i(s.document,"touchmove",this._onMouseMove,r)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t}),this._iTextInstances&&this._iTextInstances.forEach(function(t){t.isEditing&&t.hiddenTextarea.focus()})},_onMouseEnter:function(t){this.currentTransform||this.findTarget(t)||(this.fire("mouse:over",{target:null,e:t}),this._hoveredTarget=null)},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onDragOver:function(t){t.preventDefault();var e=this._simpleEventHandler("dragover",t);this._fireEnterLeaveEvents(e,t)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onDoubleClick:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"dblclick"),this._resetTransformEventData(t)},getPointerId:function(t){var e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1},_isMainEvent:function(t){return!0===t.isPrimary||!1!==t.isPrimary&&("touchend"===t.type&&0===t.touches.length||(!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId))},_onTouchStart:function(t){t.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),this._resetTransformEventData();var n=this.upperCanvasEl,o=this._getEventPrefix();e(s.document,"touchend",this._onTouchEnd,r),e(s.document,"touchmove",this._onMouseMove,r),i(n,o+"down",this._onMouseDown)},_onMouseDown:function(t){this.__onMouseDown(t),this._resetTransformEventData();var n=this.upperCanvasEl,o=this._getEventPrefix();i(n,o+"move",this._onMouseMove,r),e(s.document,o+"up",this._onMouseUp),e(s.document,o+"move",this._onMouseMove,r)},_onTouchEnd:function(t){if(!(t.touches.length>0)){this.__onMouseUp(t),this._resetTransformEventData(),this.mainTouchId=null;var n=this._getEventPrefix();i(s.document,"touchend",this._onTouchEnd,r),i(s.document,"touchmove",this._onMouseMove,r);var o=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){e(o.upperCanvasEl,n+"down",o._onMouseDown),o._willAddMouseDown=0},400)}},_onMouseUp:function(t){this.__onMouseUp(t),this._resetTransformEventData();var n=this.upperCanvasEl,o=this._getEventPrefix();this._isMainEvent(t)&&(i(s.document,o+"up",this._onMouseUp),i(s.document,o+"move",this._onMouseMove,r),e(n,o+"move",this._onMouseMove,r))},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t){var e=this._activeObject;return!!(!!e!=!!t||e&&t&&e!==t)||(e&&e.isEditing,!1)},__onMouseUp:function(t){var e,i=this._currentTransform,r=this._groupSelector,s=!1,o=!r||0===r.left&&0===r.top;if(this._cacheTransformEventData(t),e=this._target,this._handleEvent(t,"up:before"),!n(t,3))return n(t,2)?(this.fireMiddleClick&&this._handleEvent(t,"up",2,o),void this._resetTransformEventData()):void(this.isDrawingMode&&this._isCurrentlyDrawing?this._onMouseUpInDrawingMode(t):this._isMainEvent(t)&&(i&&(this._finalizeCurrentTransform(t),s=i.actionPerformed),o||(this._maybeGroupObjects(t),s||(s=this._shouldRender(e))),e&&(e.isMoving=!1),this._setCursorFromEvent(t,e),this._handleEvent(t,"up",1,o),this._groupSelector=null,this._currentTransform=null,e&&(e.__corner=0),s?this.requestRenderAll():o||this.renderTop()));this.fireRightClick&&this._handleEvent(t,"up",3,o)},_simpleEventHandler:function(t,e){var i=this.findTarget(e),r=this.targets,n={e:e,target:i,subTargets:r};if(this.fire(t,n),i&&i.fire(t,n),!r)return i;for(var s=0;s<r.length;s++)r[s].fire(t,n);return i},_handleevent:function(t,e,i,r){var="" n="this._target,s=this.targets||[],o={e:t,target:n,subTargets:s,button:i||1,isClick:r||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};this.fire("mouse:"+e,o),n&&n.fire("mouse"+e,o);for(var" a="0;a<s.length;a++)s[a].fire("mouse"+e,o)},_finalizeCurrentTransform:function(t){var" e,i="this._currentTransform,r=i.target,n={e:t,target:r,transform:i};r._scaling&&(r._scaling=!1),r.setCoords(),(i.actionPerformed||this.stateful&&r.hasStateChanged())&&(i.actionPerformed&&(e=this._addEventOptions(n,i),this._fire(e,n)),this._fire("modified",n))},_addEventOptions:function(t,e){var" i,r;switch(e.action){case"scalex":i="scaled" ,r="x" ;break;case"scaley":i="scaled" ;break;case"skewx":i="skewed" ;break;case"skewy":i="skewed" ;break;case"scale":i="scaled" ;break;case"rotate":i="rotated" ;break;case"drag":i="moved" }return="" t.by="r,i},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(t).requestRenderAll(),this.clipTo&&s.util.clipContext(this,this.contextTop);var" e="this.getPointer(t);this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var" if(n(t,2))this.firemiddleclick&&this._handleevent(t,"down",2);else="" if(this.isdrawingmode)this._onmousedownindrawingmode(t);else="" if(this._ismainevent(t)&&!this._currenttransform){var="" i="this._pointer;this._previousPointer=i;var" r="this._shouldRender(e),s=this._shouldGroup(t,e);if(this._shouldClearSelection(t,e)?this.discardActiveObject(t):s&&(this._handleGrouping(t,e),e=this._activeObject),!this.selection||e&&(e.selectable||e.isEditing||e===this._activeObject)||(this._groupSelector={ex:i.x,ey:i.y,top:0,left:0}),e){var" o="e===this._activeObject;e.selectable&&this.setActiveObject(e,t),e!==this._activeObject||!e.__corner&&s||this._setupCurrentTransform(t,e,o)}this._handleEvent(t,"down"),(r||s)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)||null},_beforeTransform:function(t){var" e,i;if(this._handleevent(t,"move:before"),this._cachetransformeventdata(t),this.isdrawingmode)this._onmousemoveindrawingmode(t);else="" if(this._ismainevent(t)){var="" r,n,s,o="this[i.targetName],a=o!==t,h=i.canvasEvtIn,c=i.canvasEvtOut;a&&(r={e:e,target:t,previousTarget:o},n={e:e,target:o,nextTarget:t},this[i.targetName]=t),s=t&&a,o&&a&&(c&&this.fire(c,n),o.fire(i.evtOut,n)),s&&(h&&this.fire(h,r),t.fire(i.evtIn,r))},__onMouseWheel:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()},_transformObject:function(t){var" this._isuniscalepossible(t,e.target)?(e.currentaction="scale" ,this._scaleobject(i,r)):(e.reset||"scale"!="=e.currentAction||this._resetCurrentTransform(),e.currentAction="scaleEqually",this._scaleObject(i,r,"equally"))},_isUniscalePossible:function(t,e){return(t[this.uniScaleKey]||this.uniScaleTransform)&&!e.get("lockUniScaling")},_setCursorFromEvent:function(t,e){if(!e)return" this.setcursor(this.defaultcursor),!1;var="" this.actionisdisabled(e,i,r)?this.notallowedcursor:e="" in="" t?this._getrotatedcornercursor(e,i,r):"mtr"="==e&&i.hasRotatingPoint?this.rotationCursor:this.defaultCursor},actionIsDisabled:function(t,e,i){return"mt"===t||"mb"===t?i[this.altActionKey]?e.lockSkewingX:e.lockScalingY:"ml"===t||"mr"===t?i[this.altActionKey]?e.lockSkewingY:e.lockScalingX:"mtr"===t?e.lockRotation:this._isUniscalePossible(i,e)?e.lockScalingX&&e.lockScalingY:e.lockScalingX||e.lockScalingY},_getRotatedCornerCursor:function(e,i,r){var" n<0&&(n+="8),n+=t[e],r[this.altActionKey]&&t[e]%2==0&&(n+=2),n%=8,this.cursorMap[n]}})}(),function(){var" t="Math.min,e=Math.max;s.util.object.extend(s.Canvas.prototype,{_shouldGroup:function(t,e){var" i&&this._isselectionkeypressed(t)&&e&&e.selectable&&this.selection&&(i!="=e||"activeSelection"===i.type)&&!e.onSelect({e:t})},_handleGrouping:function(t,e){var" this._activeobject.isediting&&this._activeobject.exitediting(),new="" s.activeselection(i,{canvas:this})},_groupselectedobjects:function(t){var="">1&&(e=new s.ActiveSelection(i.reverse(),{canvas:this}),this.setActiveObject(e,t))},_collectObjects:function(i){for(var r,n=[],o=this._groupSelector.ex,a=this._groupSelector.ey,h=o+this._groupSelector.left,c=a+this._groupSelector.top,l=new s.Point(t(o,h),t(a,c)),u=new s.Point(e(o,h),e(a,c)),f=!this.selectionFullyContained,d=o===h&&a===c,g=this._objects.length;g--&&!((r=this._objects[g])&&r.selectable&&r.visible&&(f&&r.intersectsWithRect(l,u)||r.isContainedWithinRect(l,u)||f&&r.containsPoint(l)||f&&r.containsPoint(u))&&(n.push(r),d)););return n.length>1&&(n=n.filter(function(t){return!t.onSelect({e:i})})),n},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),s.util.object.extend(s.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",i=t.quality||1,r=(t.multiplier||1)*(t.enableRetinaScaling?this.getRetinaScaling():1),n=this.toCanvasElement(r,t);return s.util.toDataURL(n,e,i)},toCanvasElement:function(t,e){t=t||1;var i=((e=e||{}).width||this.width)*t,r=(e.height||this.height)*t,n=this.getZoom(),o=this.width,a=this.height,h=n*t,c=this.viewportTransform,l=(c[4]-(e.left||0))*t,u=(c[5]-(e.top||0))*t,f=this.interactive,d=[h,0,0,h,l,u],g=this.enableRetinaScaling,p=s.util.createCanvasElement(),v=this.contextTop;return p.width=i,p.height=r,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=d,this.width=i,this.height=r,this.calcViewportBoundaries(),this.renderCanvas(p.getContext("2d"),this._objects),this.viewportTransform=c,this.width=o,this.height=a,this.calcViewportBoundaries(),this.interactive=f,this.enableRetinaScaling=g,this.contextTop=v,p}}),s.util.object.extend(s.StaticCanvas.prototype,{loadFromDatalessJSON:function(t,e,i){return this.loadFromJSON(t,e,i)},loadFromJSON:function(t,e,i){if(t){var r="string"==typeof t?JSON.parse(t):s.util.object.clone(t),n=this,o=r.clipPath,a=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete r.clipPath,this._enlivenObjects(r.objects,function(t){n.clear(),n._setBgOverlay(r,function(){o?n._enlivenObjects([o],function(i){n.clipPath=i[0],n.__setupCanvas.call(n,r,t,a,e)}):n.__setupCanvas.call(n,r,t,a,e)})},i),this}},__setupCanvas:function(t,e,i,r){var n=this;e.forEach(function(t,e){n.insertAt(t,e)}),this.renderOnAddRemove=i,delete t.objects,delete t.backgroundImage,delete t.overlayImage,delete t.background,delete t.overlay,this._setOptions(t),this.renderAll(),r&&r()},_setBgOverlay:function(t,e){var i={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(t.backgroundImage||t.overlayImage||t.background||t.overlay){var r=function(){i.backgroundImage&&i.overlayImage&&i.backgroundColor&&i.overlayColor&&e&&e()};this.__setBgOverlay("backgroundImage",t.backgroundImage,i,r),this.__setBgOverlay("overlayImage",t.overlayImage,i,r),this.__setBgOverlay("backgroundColor",t.background,i,r),this.__setBgOverlay("overlayColor",t.overlay,i,r)}else e&&e()},__setBgOverlay:function(t,e,i,r){var n=this;if(!e)return i[t]=!0,void(r&&r());"backgroundImage"===t||"overlayImage"===t?s.util.enlivenObjects([e],function(e){n[t]=e[0],i[t]=!0,r&&r()}):this["set"+s.util.string.capitalize(t,!0)](e,function(){i[t]=!0,r&&r()})},_enlivenObjects:function(t,e,i){t&&0!==t.length?s.util.enlivenObjects(t,function(t){e&&e(t)},null,i):e&&e([])},_toDataURL:function(t,e){this.clone(function(i){e(i.toDataURL(t))})},_toDataURLWithMultiplier:function(t,e,i){this.clone(function(r){i(r.toDataURLWithMultiplier(t,e))})},clone:function(t,e){var i=JSON.stringify(this.toJSON(e));this.cloneWithoutData(function(e){e.loadFromJSON(i,function(){t&&t(e)})})},cloneWithoutData:function(t){var e=s.util.createCanvasElement();e.width=this.width,e.height=this.height;var i=new s.Canvas(e);i.clipTo=this.clipTo,this.backgroundImage?(i.setBackgroundImage(this.backgroundImage.src,function(){i.renderAll(),t&&t(i)}),i.backgroundImageOpacity=this.backgroundImageOpacity,i.backgroundImageStretch=this.backgroundImageStretch):t&&t(i)}}),function(){var t=s.util.degreesToRadians,e=s.util.radiansToDegrees;s.util.object.extend(s.Canvas.prototype,{__onTransformGesture:function(t,e){if(!this.isDrawingMode&&t.touches&&2===t.touches.length&&"gesture"===e.gesture){var i=this.findTarget(t);void 0!==i&&(this.__gesturesParams={e:t,self:e,target:i},this.__gesturesRenderer()),this.fire("touch:gesture",{target:i,e:t,self:e})}},__gesturesParams:null,__gesturesRenderer:function(){if(null!==this.__gesturesParams&&null!==this._currentTransform){var t=this.__gesturesParams.self,e=this._currentTransform,i=this.__gesturesParams.e;e.action="scale",e.originX=e.originY="center",this._scaleObjectBy(t.scale,i),0!==t.rotation&&(e.action="rotate",this._rotateObjectByAngle(t.rotation,i)),this.requestRenderAll(),e.action="drag"}},__onDrag:function(t,e){this.fire("touch:drag",{e:t,self:e})},__onOrientationChange:function(t,e){this.fire("touch:orientation",{e:t,self:e})},__onShake:function(t,e){this.fire("touch:shake",{e:t,self:e})},__onLongPress:function(t,e){this.fire("touch:longpress",{e:t,self:e})},_scaleObjectBy:function(t,e){var i=this._currentTransform,r=i.target,n=r.get("lockScalingX"),o=r.get("lockScalingY");if(!n||!o){r._scaling=!0;var a=r.translateToOriginPoint(r.getCenterPoint(),i.originX,i.originY),h=r._getTransformedDimensions();this._setObjectScale(new s.Point(i.scaleX*h.x*t/r.scaleX,i.scaleY*h.y*t/r.scaleY),i,n,o,null,r.get("lockScalingFlip"),h),r.setPositionByOrigin(a,i.originX,i.originY),this._fire("scaling",{target:r,e:e,transform:i})}},_rotateObjectByAngle:function(i,r){var n=this._currentTransform;n.target.get("lockRotation")||(n.target.rotate(e(t(i)+n.theta)),this._fire("rotating",{target:n.target,e:r,transform:n}))}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.util.object.clone,s=e.util.toFixed,o=e.util.string.capitalize,a=e.util.degreesToRadians,h=e.StaticCanvas.supports("setLineDash"),c=!e.isLikelyNode;e.Object||(e.Object=e.util.createClass(e.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",borderDashArray:null,cornerColor:"rgba(102,153,255,0.5)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:c,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(t){t&&this.setOptions(t)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=e.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(t){var i=e.perfLimitSizeTotal,r=t.width,n=t.height,s=e.maxCacheSideLimit,o=e.minCacheSideLimit;if(r<=s&&n<=s&&r*n<=i)return r<o&&(t.width="o),n<o&&(t.height=o),t;var" a="r/n,h=e.util.limitDimsByArea(a,i),c=e.util.capValue,l=c(o,h.x,s),u=c(o,h.y,s);return" r="">l&&(t.zoomX/=r/l,t.width=l,t.capped=!0),n>u&&(t.zoomY/=n/u,t.height=u,t.capped=!0),t},_getCacheCanvasDimensions:function(){var t=this.getTotalObjectScaling(),e=this._getTransformedDimensions(0,0),i=e.x*t.scaleX/this.scaleX,r=e.y*t.scaleY/this.scaleY;return{width:i+2,height:r+2,zoomX:t.scaleX,zoomY:t.scaleY,x:i,y:r}},_updateCacheCanvas:function(){var t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){var i=t._currentTransform.target,r=t._currentTransform.action;if(this===i&&r.slice&&"scale"===r.slice(0,5))return!1}var n,s,o=this._cacheCanvas,a=this._limitCacheSize(this._getCacheCanvasDimensions()),h=e.minCacheSideLimit,c=a.width,l=a.height,u=a.zoomX,f=a.zoomY,d=c!==this.cacheWidth||l!==this.cacheHeight,g=this.zoomX!==u||this.zoomY!==f,p=d||g,v=0,m=0,y=!1;if(d){var _=this._cacheCanvas.width,x=this._cacheCanvas.height,b=c>_||l>x;y=b||(c<.9*_||l<.9*x)&&_>h&&x>h,b&&!a.capped&&(c>h||l>h)&&(v=.1*c,m=.1*l)}return!!p&&(y?(o.width=Math.ceil(c+v),o.height=Math.ceil(l+m)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,o.width,o.height)),n=a.x/2,s=a.y/2,this.cacheTranslationX=Math.round(o.width/2-n)+n,this.cacheTranslationY=Math.round(o.height/2-s)+s,this.cacheWidth=c,this.cacheHeight=l,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(u,f),this.zoomX=u,this.zoomY=f,!0)},setOptions:function(t){this._setOptions(t),this._initGradient(t.fill,"fill"),this._initGradient(t.stroke,"stroke"),this._initClipping(t),this._initPattern(t.fill,"fill"),this._initPattern(t.stroke,"stroke")},transform:function(t){var e;e=this.group&&!this.group._transformDone?this.calcTransformMatrix():this.calcOwnMatrix(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},toObject:function(t){var i=e.Object.NUM_FRACTION_DIGITS,r={type:this.type,version:e.version,originX:this.originX,originY:this.originY,left:s(this.left,i),top:s(this.top,i),width:s(this.width,i),height:s(this.height,i),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:s(this.strokeWidth,i),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:s(this.strokeMiterLimit,i),scaleX:s(this.scaleX,i),scaleY:s(this.scaleY,i),angle:s(this.angle,i),flipX:this.flipX,flipY:this.flipY,opacity:s(this.opacity,i),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,transformMatrix:this.transformMatrix?this.transformMatrix.concat():null,skewX:s(this.skewX,i),skewY:s(this.skewY,i)};return this.clipPath&&(r.clipPath=this.clipPath.toObject(t),r.clipPath.inverted=this.clipPath.inverted,r.clipPath.absolutePositioned=this.clipPath.absolutePositioned),e.util.populateWithProperties(this,r,t),this.includeDefaultValues||(r=this._removeDefaultValues(r)),r},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var i=e.util.getKlass(t.type).prototype;return i.stateProperties.forEach(function(e){"left"!==e&&"top"!==e&&(t[e]===i[e]&&delete t[e],"[object Array]"===Object.prototype.toString.call(t[e])&&"[object Array]"===Object.prototype.toString.call(i[e])&&0===t[e].length&&0===i[e].length&&delete t[e])}),t},toString:function(){return"#<fabric."+o(this.type)+">"},getObjectScaling:function(){var t=this.scaleX,e=this.scaleY;if(this.group){var i=this.group.getObjectScaling();t*=i.scaleX,e*=i.scaleY}return{scaleX:t,scaleY:e}},getTotalObjectScaling:function(){var t=this.getObjectScaling(),e=t.scaleX,i=t.scaleY;if(this.canvas){var r=this.canvas.getZoom(),n=this.canvas.getRetinaScaling();e*=r*n,i*=r*n}return{scaleX:e,scaleY:i}},getObjectOpacity:function(){var t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t},_set:function(t,i){var r="scaleX"===t||"scaleY"===t,n=this[t]!==i,s=!1;return r&&(i=this._constrainScale(i)),"scaleX"===t&&i<0?(this.flipx=!this.flipx,i*=-1):"scaley"===t&&i<0?(this.flipy=!this.flipy,i*=-1):"shadow"!==t||!i||i instanceof="" e.shadow?"dirty"="==t&&this.group&&this.group.set("dirty",i):i=new" e.shadow(i),this[t]="i,n&&(s=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(t)">-1?(this.dirty=!0,s&&this.group.set("dirty",!0)):s&&this.stateProperties.indexOf(t)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:e.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||0===this.width&&0===this.height&&0===this.strokeWidth||!this.visible},render:function(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t,this),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.clipTo&&e.util.clipContext(this,t),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(t),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),this.clipTo&&t.restore(),t.restore())},renderCache:function(t){t=t||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,t.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!==n(this.shadow))||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(t){var i=this.clipPath;if(t.save(),i.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",i.absolutePositioned){var r=e.util.invertTransform(this.calcTransformMatrix());t.transform(r[0],r[1],r[2],r[3],r[4],r[5])}i.transform(t),t.scale(1/i.zoomX,1/i.zoomY),t.drawImage(i._cacheCanvas,-i.cacheTranslationX,-i.cacheTranslationY),t.restore()},drawObject:function(t,e){var i=this.fill,r=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):(this._renderBackground(t),this._setStrokeStyles(t,this),this._setFillStyles(t,this)),this._render(t),this._drawClipPath(t),this.fill=i,this.stroke=r},_drawClipPath:function(t){var e=this.clipPath;e&&(e.canvas=this.canvas,e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),this.drawClipPathOnCache(t))},drawCacheOnCanvas:function(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(t){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!t){var e=this.cacheWidth/this.zoomX,i=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-i/2,e,i)}return!0}return!1},_renderBackground:function(t){if(this.backgroundColor){var e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}},_setOpacity:function(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity},_setStrokeStyles:function(t,e){e.stroke&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,t.strokeStyle=e.stroke.toLive?e.stroke.toLive(t,this):e.stroke)},_setFillStyles:function(t,e){e.fill&&(t.fillStyle=e.fill.toLive?e.fill.toLive(t,this):e.fill)},_setClippingProperties:function(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"},_setLineDash:function(t,e,i){e&&(1&e.length&&e.push.apply(e,e),h?t.setLineDash(e):i&&i(t),this.strokeUniform&&t.setLineDash(t.getLineDash().map(function(e){return e*t.lineWidth})))},_renderControls:function(t,i){var r,n,s,o=this.getViewportTransform(),h=this.calcTransformMatrix();n=void 0!==(i=i||{}).hasBorders?i.hasBorders:this.hasBorders,s=void 0!==i.hasControls?i.hasControls:this.hasControls,h=e.util.multiplyTransformMatrices(o,h),r=e.util.qrDecompose(h),t.save(),t.translate(r.translateX,r.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),i.forActiveSelection?(t.rotate(a(r.angle)),n&&this.drawBordersInGroup(t,r,i)):(t.rotate(a(this.angle)),n&&this.drawBorders(t,i)),s&&this.drawControls(t,i),t.restore()},_setShadow:function(t){if(this.shadow){var i,r=this.shadow,n=this.canvas,s=n&&n.viewportTransform[0]||1,o=n&&n.viewportTransform[3]||1;i=r.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),n&&n._isRetinaScaling()&&(s*=e.devicePixelRatio,o*=e.devicePixelRatio),t.shadowColor=r.color,t.shadowBlur=r.blur*e.browserShadowBlurConstant*(s+o)*(i.scaleX+i.scaleY)/4,t.shadowOffsetX=r.offsetX*s*i.scaleX,t.shadowOffsetY=r.offsetY*o*i.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_applyPatternGradientTransform:function(t,e){if(!e||!e.toLive)return{offsetX:0,offsetY:0};var i=e.gradientTransform||e.patternTransform,r=-this.width/2+e.offsetX||0,n=-this.height/2+e.offsetY||0;return t.translate(r,n),i&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),{offsetX:r,offsetY:n}},_renderPaintInOrder:function(t){"stroke"===this.paintFirst?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))},_render:function(){},_renderFill:function(t){this.fill&&(t.save(),this._applyPatternGradientTransform(t,this.fill),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore())},_renderStroke:function(t){this.stroke&&0!==this.strokeWidth&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform&&t.scale(1/this.scaleX,1/this.scaleY),this._setLineDash(t,this.strokeDashArray,this._renderDashedStroke),this._applyPatternGradientTransform(t,this.stroke),t.stroke(),t.restore())},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var t=e.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",t.scaleX),this.set("scaleY",t.scaleY),this.angle=t.angle,this.skewX=t.skewX,this.skewY=0}},_removeTransformMatrix:function(t){var i=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),i=e.util.transformPoint(i,this.transformMatrix)),this.transformMatrix=null,t&&(this.scaleX*=t.scaleX,this.scaleY*=t.scaleY,this.cropX=t.cropX,this.cropY=t.cropY,i.x+=t.offsetLeft,i.y+=t.offsetTop,this.width=t.width,this.height=t.height),this.setPositionByOrigin(i,"center","center")},clone:function(t,i){var r=this.toObject(i);this.constructor.fromObject?this.constructor.fromObject(r,t):e.Object._fromObject("Object",r,t)},cloneAsImage:function(t,i){var r=this.toCanvasElement(i);return t&&t(new e.Image(r)),this},toCanvasElement:function(t){t||(t={});var i=e.util,r=i.saveObjectTransform(this),n=this.shadow,s=Math.abs,o=(t.multiplier||1)*(t.enableRetinaScaling?e.devicePixelRatio:1);t.withoutTransform&&i.resetObjectTransform(this),t.withoutShadow&&(this.shadow=null);var a,h,c=e.util.createCanvasElement(),l=this.getBoundingRect(!0,!0),u=this.shadow,f={x:0,y:0};u&&(h=u.blur,a=u.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),f.x=2*Math.round(s(u.offsetX)+h)*s(a.scaleX),f.y=2*Math.round(s(u.offsetY)+h)*s(a.scaleY)),c.width=l.width+f.x,c.height=l.height+f.y,c.width+=c.width%2?2-c.width%2:0,c.height+=c.height%2?2-c.height%2:0;var d=new e.StaticCanvas(c,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===t.format&&(d.backgroundColor="#fff"),this.setPositionByOrigin(new e.Point(d.width/2,d.height/2),"center","center");var g=this.canvas;d.add(this);var p=d.toCanvasElement(o||1,t);return this.shadow=n,this.canvas=g,this.set(r).setCoords(),d._objects=[],d.dispose(),d=null,p},toDataURL:function(t){return t||(t={}),e.util.toDataURL(this.toCanvasElement(t),t.format||"png",t.quality||1)},isType:function(t){return this.type===t},complexity:function(){return 1},toJSON:function(t){return this.toObject(t)},setGradient:function(t,i){i||(i={});var r={colorStops:[]};return r.type=i.type||(i.r1||i.r2?"radial":"linear"),r.coords={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},(i.r1||i.r2)&&(r.coords.r1=i.r1,r.coords.r2=i.r2),r.gradientTransform=i.gradientTransform,e.Gradient.prototype.addColorStop.call(r,i.colorStops),this.set(t,e.Gradient.forObject(this,r))},setPatternFill:function(t,i){return this.set("fill",new e.Pattern(t,i))},setShadow:function(t){return this.set("shadow",t?new e.Shadow(t):null)},setColor:function(t){return this.set("fill",t),this},rotate:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(t,i){i=i||this.canvas.getPointer(t);var r=new e.Point(i.x,i.y),n=this._getLeftTopCoords();return this.angle&&(r=e.util.rotatePoint(r,n,a(-this.angle))),{x:r.x-n.x,y:r.y-n.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}}),e.util.createAccessors&&e.util.createAccessors(e.Object),i(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object._fromObject=function(t,i,n,s){var o=e[t];i=r(i,!0),e.util.enlivenPatterns([i.fill,i.stroke],function(t){void 0!==t[0]&&(i.fill=t[0]),void 0!==t[1]&&(i.stroke=t[1]),e.util.enlivenObjects([i.clipPath],function(t){i.clipPath=t[0];var e=s?new o(i[s],i):new o(i);n&&n(e)})})},e.Object.__uid=0)}("undefined"!=typeof exports?exports:this),function(){var t=s.util.degreesToRadians,e={left:-.5,center:0,right:.5},i={top:-.5,center:0,bottom:.5};s.util.object.extend(s.Object.prototype,{translateToGivenOrigin:function(t,r,n,o,a){var h,c,l,u=t.x,f=t.y;return"string"==typeof r?r=e[r]:r-=.5,"string"==typeof o?o=e[o]:o-=.5,"string"==typeof n?n=i[n]:n-=.5,"string"==typeof a?a=i[a]:a-=.5,c=a-n,((h=o-r)||c)&&(l=this._getTransformedDimensions(),u=t.x+h*l.x,f=t.y+c*l.y),new s.Point(u,f)},translateToCenterPoint:function(e,i,r){var n=this.translateToGivenOrigin(e,i,r,"center","center");return this.angle?s.util.rotatePoint(n,e,t(this.angle)):n},translateToOriginPoint:function(e,i,r){var n=this.translateToGivenOrigin(e,"center","center",i,r);return this.angle?s.util.rotatePoint(n,e,t(this.angle)):n},getCenterPoint:function(){var t=new s.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var i=this.getCenterPoint();return this.translateToOriginPoint(i,t,e)},toLocalPoint:function(e,i,r){var n,o,a=this.getCenterPoint();return n=void 0!==i&&void 0!==r?this.translateToGivenOrigin(a,"center","center",i,r):new s.Point(this.left,this.top),o=new s.Point(e.x,e.y),this.angle&&(o=s.util.rotatePoint(o,a,-t(this.angle))),o.subtractEquals(n)},setPositionByOrigin:function(t,e,i){var r=this.translateToCenterPoint(t,e,i),n=this.translateToOriginPoint(r,this.originX,this.originY);this.set("left",n.x),this.set("top",n.y)},adjustPosition:function(i){var r,n,o=t(this.angle),a=this.getScaledWidth(),h=s.util.cos(o)*a,c=s.util.sin(o)*a;r="string"==typeof this.originX?e[this.originX]:this.originX-.5,n="string"==typeof i?e[i]:i-.5,this.left+=h*(n-r),this.top+=c*(n-r),this.setCoords(),this.originX=i},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){var t=s.util.degreesToRadians,e=s.util.multiplyTransformMatrices,i=s.util.transformPoint;s.util.object.extend(s.Object.prototype,{oCoords:null,aCoords:null,ownMatrixCache:null,matrixCache:null,getCoords:function(t,e){this.oCoords||this.setCoords();var i=t?this.aCoords:this.oCoords;return function(t){return[new s.Point(t.tl.x,t.tl.y),new s.Point(t.tr.x,t.tr.y),new s.Point(t.br.x,t.br.y),new s.Point(t.bl.x,t.bl.y)]}(e?this.calcCoords(t):i)},intersectsWithRect:function(t,e,i,r){var n=this.getCoords(i,r);return"Intersection"===s.Intersection.intersectPolygonRectangle(n,t,e).status},intersectsWithObject:function(t,e,i){return"Intersection"===s.Intersection.intersectPolygonPolygon(this.getCoords(e,i),t.getCoords(e,i)).status||t.isContainedWithinObject(this,e,i)||this.isContainedWithinObject(t,e,i)},isContainedWithinObject:function(t,e,i){for(var r=this.getCoords(e,i),n=0,s=t._getImageLines(i?t.calcCoords(e):e?t.aCoords:t.oCoords);n<4;n++)if(!t.containspoint(r[n],s))return!1;return!0},iscontainedwithinrect:function(t,e,i,r){var n="this.getBoundingRect(i,r);return" n.left="">=t.x&&n.left+n.width<=e.x&&n.top>=t.y&&n.top+n.height<=e.y},containspoint:function(t,e,i,r){e=e||this._getimagelines(r?this.calccoords(i):i?this.acoords:this.ocoords);var n="this._findCrossPoints(t,e);return" 0!="=n&&n%2==1},isOnScreen:function(t){if(!this.canvas)return!1;for(var" e,i="this.canvas.vptCoords.tl,r=this.canvas.vptCoords.br,n=this.getCoords(!0,t),s=0;s<4;s++)if((e=n[s]).x<=r.x&&e.x">=i.x&&e.y<=r.y&&e.y>=i.y)return!0;return!!this.intersectsWithRect(i,r,!0,t)||this._containsCenterOfCanvas(i,r,t)},_containsCenterOfCanvas:function(t,e,i){var r={x:(t.x+e.x)/2,y:(t.y+e.y)/2};return!!this.containsPoint(r,null,!0,i)},isPartiallyOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;return!!this.intersectsWithRect(e,i,!0,t)||this._containsCenterOfCanvas(e,i,t)},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var i,r,n,s=0;for(var o in e)if(!((n=e[o]).o.y<t.y&&n.d.y<t.y||n.o.y>=t.y&&n.d.y>=t.y||(n.o.x===n.d.x&&n.o.x>=t.x?r=n.o.x:(0,i=(n.d.y-n.o.y)/(n.d.x-n.o.x),r=-(t.y-0*t.x-(n.o.y-i*n.o.x))/(0-i)),r>=t.x&&(s+=1),2!==s)))break;return s},getBoundingRect:function(t,e){var i=this.getCoords(t,e);return s.util.makeBoundingBoxFromPoints(i)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minscalelimit?t<0?-this.minscalelimit:this.minscalelimit:0===t?1e-4:t},scale:function(t){return 0="==t&&(t=this.skewX),void" this._set("scalex",t),this._set("scaley",t),this.setcoords()},scaletowidth:function(t,e){var="" i="this.getBoundingRect(e).width/this.getScaledWidth();return" this.scale(t="" this.width="" i)},scaletoheight:function(t,e){var="" this.height="" i)},calccoords:function(r){var="" n="this._calcRotateMatrix(),o=this._calcTranslateMatrix(),a=e(o,n),h=this.getViewportTransform(),c=r?a:e(h,a),l=this._getTransformedDimensions(),u=l.x/2,f=l.y/2,d=i({x:-u,y:-f},c),g=i({x:u,y:-f},c),p=i({x:-u,y:f},c),v=i({x:u,y:f},c);if(!r){var" m="this.padding,y=t(this.angle),_=s.util.cos(y),x=s.util.sin(y),b=_*m,C=x*m,S=b+C,w=b-C;m&&(d.x-=w,d.y-=S,g.x+=S,g.y-=w,p.x-=S,p.y+=w,v.x+=w,v.y+=S);var" t="new" s.point((d.x+p.x)="" 2,(d.y+p.y)="" 2),o="new" s.point((g.x+d.x)="" 2,(g.y+d.y)="" 2),p="new" s.point((v.x+g.x)="" 2,(v.y+g.y)="" 2),k="new" s.point((v.x+p.x)="" 2,(v.y+p.y)="" 2),e="new" s.point(o.x+x*this.rotatingpointoffset,o.y-_*this.rotatingpointoffset)}var="" d="{tl:d,tr:g,br:v,bl:p};return" r||(d.ml="T,D.mt=O,D.mr=P,D.mb=k,D.mtr=E),D},setCoords:function(t,e){return" this.ocoords="this.calcCoords(t),e||(this.aCoords=this.calcCoords(!0)),t||this._setCornerCoords&&this._setCornerCoords(),this},_calcRotateMatrix:function(){if(this.angle){var" e="t(this.angle),i=s.util.cos(e),r=s.util.sin(e);return[i,r,-r,i,0,0]}return" s.imatrix.concat()},_calctranslatematrix:function(){var="" ;return!t&&this.group&&(e="this.group.transformMatrixKey(t)+"_"),e+this.top+"_"+this.left+"_"+this.scaleX+"_"+this.scaleY+"_"+this.skewX+"_"+this.skewY+"_"+this.angle+"_"+this.originX+"_"+this.originY+"_"+this.width+"_"+this.height+"_"+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(t){if(t)return" this.calcownmatrix();var="" r.value;var="" this.group&&(n="e(this.group.calcTransformMatrix(),n)),r.key=i,r.value=n,n},calcOwnMatrix:function(){var" i.value;var="" r,n="this._calcTranslateMatrix(),s=this._calcDimensionsTransformMatrix(this.skewX,this.skewY,!0);return" this.angle&&(r="this._calcRotateMatrix(),n=e(n,r)),n=e(n,s),i.key=t,i.value=n,n},_calcDimensionsTransformMatrix:function(i,r,n){var" s,o="[this.scaleX*(n&&this.flipX?-1:1),0,0,this.scaleY*(n&&this.flipY?-1:1),0,0];return" i&&(s="[1,0,Math.tan(t(i)),1],o=e(o,s,!0)),r&&(s=[1,Math.tan(t(r)),0,1],o=e(o,s,!0)),o},_getNonTransformedDimensions:function(){var" i,r,n="this._getNonTransformedDimensions(),o=0===t&&0===e;if(this.strokeUniform?(i=this.width,r=this.height):(i=n.x,r=n.y),o)return" this._finalizedimensions(i*this.scalex,r*this.scaley);var="" a,h,c="[{x:-(i/=2),y:-(r/=2)},{x:i,y:-r},{x:-i,y:r},{x:i,y:r}],l=this._calcDimensionsTransformMatrix(t,e,!1);for(a=0;a<c.length;a++)c[a]=s.util.transformPoint(c[a],l);return" h="s.util.makeBoundingBoxFromPoints(c),this._finalizeDimensions(h.width,h.height)},_finalizeDimensions:function(t,e){return" this.strokeuniform?{x:t+this.strokewidth,y:e+this.strokewidth}:{x:t,y:e}},_calculatecurrentdimensions:function(){var="" s.util.transformpoint(e,t,!0).scalaradd(2*this.padding)}})}(),s.util.object.extend(s.object.prototype,{sendtoback:function(){return="" this.group?s.staticcanvas.prototype.sendtoback.call(this.group,this):this.canvas.sendtoback(this),this},bringtofront:function(){return="" this.group?s.staticcanvas.prototype.bringtofront.call(this.group,this):this.canvas.bringtofront(this),this},sendbackwards:function(t){return="" this.group?s.staticcanvas.prototype.sendbackwards.call(this.group,this,t):this.canvas.sendbackwards(this,t),this},bringforward:function(t){return="" this.group?s.staticcanvas.prototype.bringforward.call(this.group,this,t):this.canvas.bringforward(this,t),this},moveto:function(t){return="" this.group&&"activeselection"!="=this.group.type?s.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas.moveTo(this,t),this}}),function(){function" t(t,e){if(e){if(e.tolive)return="" t+":="" url(#svgid_"+e.id+");="" ";var="" s.color(e),r="t+":" "+i.torgb()+";="" ",n="i.getAlpha();return" 1!="=n&&(r+=t+"-opacity:" "+n.tostring()+";="" "),r}return="" none;="" "}var="" "):"none",s="this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",h=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=void" 0!="=this.opacity?this.opacity:"1",l=this.visible?"":"" visibility:="" hidden;",u="e?"":this.getSvgFilter(),f=t("fill",this.fill);return[t("stroke",this.stroke),"stroke-width:" ",r,";="" ","stroke-dasharray:="" ",n,";="" ","stroke-linecap:="" ",o,";="" ","stroke-dashoffset:="" ",s,";="" ","stroke-linejoin:="" ",a,";="" ","stroke-miterlimit:="" ",h,";="" ",f,"fill-rule:="" ",i,";="" ","opacity:="" ",c,";",u,l].join("")},getsvgspanstyles:function(e,i){var="" r="e.fontFamily?"font-family:" "+(-1="==e.fontFamily.indexOf("'")&&-1===e.fontFamily.indexOf('"')?"'"+e.fontFamily+"'":e.fontFamily)+";" ":"",n="e.strokeWidth?"stroke-width:" "+e.strokewidth+";="" ":"",s="(r=r,e.fontSize?"font-size:" "+e.fontsize+"px;="" ":""),o="e.fontStyle?"font-style:" "+e.fontstyle+";="" ":"",a="e.fontWeight?"font-weight:" "+e.fontweight+";="" ":"",h="e.fill?t("fill",e.fill):"",c=e.stroke?t("stroke",e.stroke):"",l=this.getSvgTextDecoration(e);return" l&&(l="text-decoration: " +l+";="" "),[c,n,r,s,o,a,l,h,e.deltay?"baseline-shift:="" "+-e.deltay+";="" ":"",i?"white-space:="" pre;="" ":""].join("")},getsvgtextdecoration:function(t){return"overline"in="" t||"underline"in="" t||"linethrough"in="" t?(t.overline?"overline="" ":"")+(t.underline?"underline="" ":"")+(t.linethrough?"line-through="" ":""):""},getsvgfilter:function(){return="" this.shadow?"filter:="" url(#svgid_"+this.shadow.id+");":""},getsvgcommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clippath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getsvgtransform:function(t,e){var="" '},getsvgtransformmatrix:function(){return="" this.transformmatrix?"="" "+s.util.matrixtosvg(this.transformmatrix):""},_setsvgbg:function(t){if(this.backgroundcolor){var="" ",this._getfillattributes(this.backgroundcolor),'="" x="',e(-this.width/2,i),'" y="',e(-this.height/2,i),'" width="',e(this.width,i),'" height="',e(this.height,i),'">\n')}},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})},toClipPathSVG:function(t){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})},_createBaseClipPathSVGMarkup:function(t,e){var i=(e=e||{}).reviver,r=e.additionalTransform||"",n=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),s=t.indexOf("COMMON_PARTS");return t[s]=n,i?i(t.join("")):t.join("")},_createBaseSVGMarkup:function(t,e){var i,r,n=(e=e||{}).noStyle,o=e.reviver,a=n?"":'style="'+this.getSvgStyles()+'" ',h=e.withShadow?'style="'+this.getSvgFilter()+'" ':"",c=this.clipPath,l=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",u=c&&c.absolutePositioned,f=this.stroke,d=this.fill,g=this.shadow,p=[],v=t.indexOf("COMMON_PARTS"),m=e.additionalTransform;return c&&(c.clipPathId="CLIPPATH_"+s.Object.__uid++,r='<clippath id="'+c.clipPathId+'">\n'+c.toClipPathSVG(o)+"</clippath>\n"),u&&p.push("<g ",h,this.getsvgcommons(),"="">\n"),p.push("<g ",this.getsvgtransform(!1),u?"":h+this.getsvgcommons(),"="">\n"),i=[a,l,n?"":this.addPaintOrder()," ",m?'transform="'+m+'" ':""].join(""),t[v]=i,d&&d.toLive&&p.push(d.toSVG(this)),f&&f.toLive&&p.push(f.toSVG(this)),g&&p.push(g.toSVG(this)),c&&p.push(r),p.push(t.join("")),p.push("</g>\n"),u&&p.push("</g>\n"),o?o(p.join("")):p.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var t=s.util.object.extend;function e(e,i,r){var n={};r.forEach(function(t){n[t]=e[t]}),t(e[i],n,!0)}s.util.object.extend(s.Object.prototype,{hasStateChanged:function(t){var e="_"+(t=t||"stateProperties");return Object.keys(this[e]).length<this[t].length||!function t(e,i,r){if(e="==i)return!0;if(Array.isArray(e)){if(!Array.isArray(i)||e.length!==i.length)return!1;for(var" s="0,o=e.length;s<o;s++)if(!t(e[s],i[s]))return!1;return!0}if(e&&"object"===n(e)){var" a,h="Object.keys(e);if(!i||"object"!==n(i)||!r&&h.length!==Object.keys(i).length)return!1;for(s=0,o=h.length;s<o;s++)if("canvas"!==(a=h[s])&&!t(e[a],i[a]))return!1;return!0}}(this[e],this,!0)},saveState:function(t){var" i="t&&t.propertySet||"stateProperties",r="_"+i;return" this[r]?(e(this,r,this[i]),t&&t.stateproperties&&e(this,r,t.stateproperties),this):this.setupstate(t)},setupstate:function(t){var="" e="(t=t||{}).propertySet||"stateProperties";return" t.propertyset="e,this["_"+e]={},this.saveState(t),this}})}(),function(){var" t="s.util.degreesToRadians;s.util.object.extend(s.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(t){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var" e,i,r="t.x,n=t.y;for(var" in="" this.__corner="0,this.oCoords)if(this.isControlVisible(s)&&("mtr"!==s||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==s&&"mr"!==s&&"mb"!==s&&"ml"!==s)&&(i=this._getImageLines(this.oCoords[s].corner),0!==(e=this._findCrossPoints({x:r,y:n},i))&&e%2==1))return" c="" r)e="r[c].x,i=r[c].y,r[c].corner={tl:{x:e-h,y:i-a},tr:{x:e+a,y:i-h},bl:{x:e-a,y:i+h},br:{x:e+h,y:i+a}}},drawSelectionBackground:function(e){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return" this;e.save();var="" e.translate(i.x,i.y),e.scale(1="" n[0],1="" n[3]),e.rotate(t(this.angle)),e.fillstyle="this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore(),this},drawBorders:function(t,e){e=e||{};var" 0!="=e.hasRotatingPoint?e.hasRotatingPoint:this.hasRotatingPoint,a=void" t.restore(),this},drawbordersingroup:function(t,e,i){i="i||{};var" r="this._getNonTransformedDimensions(),n=s.util.customTransformMatrix(e.scaleX,e.scaleY,e.skewX),o=s.util.transformPoint(r,n),a=1/this.borderScaleFactor,h=o.x+a,c=o.y+a;return" t.save(),this._setlinedash(t,i.borderdasharray||this.borderdasharray,null),t.strokestyle="i.borderColor||this.borderColor,t.strokeRect(-h/2,-c/2,h,c),t.restore(),this},drawControls:function(t,e){e=e||{};var" t.save(),t.strokestyle="t.fillStyle=e.cornerColor||this.cornerColor,this.transparentCorners||(t.strokeStyle=e.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(t,e.cornerDashArray||this.cornerDashArray,null),this._drawControl("tl",t,l,o,a,e),this._drawControl("tr",t,l,o+r,a,e),this._drawControl("bl",t,l,o,a+n,e),this._drawControl("br",t,l,o+r,a+n,e),this.get("lockUniScaling")||(this._drawControl("mt",t,l,o+r/2,a,e),this._drawControl("mb",t,l,o+r/2,a+n,e),this._drawControl("mr",t,l,o+r,a+n/2,e),this._drawControl("ml",t,l,o,a+n/2,e)),c&&this._drawControl("mtr",t,l,o+r/2,a-this.rotatingPointOffset,e),t.restore(),this},_drawControl:function(t,e,i,r,n,s){if(s=s||{},this.isControlVisible(t)){var" o="this.cornerSize,a=!this.transparentCorners&&this.cornerStrokeColor;switch(s.cornerStyle||this.cornerStyle){case"circle":e.beginPath(),e.arc(r+o/2,n+o/2,o/2,0,2*Math.PI,!1),e[i](),a&&e.stroke();break;default:this.transparentCorners||e.clearRect(r,n,o,o),e[i+"Rect"](r,n,o,o),a&&e.strokeRect(r,n,o,o)}}},isControlVisible:function(t){return" this._getcontrolsvisibility()[t]},setcontrolvisible:function(t,e){return="" this._getcontrolsvisibility()[t]="e,this},setControlsVisibility:function(t){for(var" t||(t="{}),t)this.setControlVisible(e,t[e]);return" this},_getcontrolsvisibility:function(){return="" this._controlsvisibility||(this._controlsvisibility="{tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility},onDeselect:function(){},onSelect:function(){}})}(),s.util.object.extend(s.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){var" s.util.animate({startvalue:t.left,endvalue:this.getcenter().left,duration:this.fx_duration,onchange:function(e){t.set("left",e),o.requestrenderall(),n()},oncomplete:function(){t.setcoords(),r()}}),this},fxcenterobjectv:function(t,e){var="" s.util.animate({startvalue:t.top,endvalue:this.getcenter().top,duration:this.fx_duration,onchange:function(e){t.set("top",e),o.requestrenderall(),n()},oncomplete:function(){t.setcoords(),r()}}),this},fxremove:function(t,e){var="" s.util.animate({startvalue:t.opacity,endvalue:0,duration:this.fx_duration,onchange:function(e){t.set("opacity",e),o.requestrenderall(),n()},oncomplete:function(){o.remove(t),r()}}),this}}),s.util.object.extend(s.object.prototype,{animate:function(){if(arguments[0]&&"object"="==n(arguments[0])){var" t,e,i="[];for(t" arguments[0])i.push(t);for(var="" this._animate.apply(this,arguments);return="" this},_animate:function(t,e,i,r){var="" n,o="this;e=e.toString(),i=i?s.util.object.clone(i):{},~t.indexOf(".")&&(n=t.split("."));var" a="n?this.get(n[0])[n[1]]:this.get(t);"from"in" i||(i.from="a),e=~e.indexOf("=")?a+parseFloat(e.replace("=","")):parseFloat(e),s.util.animate({startValue:i.from,endValue:e,byValue:i.by,easing:i.easing,duration:i.duration,abort:i.abort&&function(){return" i.abort.call(o)},onchange:function(e,s,a){n?o[n[0]][n[1]]="e:o.set(t,e),r||i.onChange&&i.onChange(e,s,a)},onComplete:function(t,e,n){r||(o.setCoords(),i.onComplete&&i.onComplete(t,e,n))}})}}),function(t){"use" strict";var="" o(t,e){var="" function(){switch(this.get(i)){case="" o:return="" math.min(this.get(r),this.get(n));case="" a:return="" math.min(this.get(r),this.get(n))+.5*this.get(s);case="" h:return="" math.max(this.get(r),this.get(n))}}}e.line?e.warn("fabric.line="" is="" already="" defined"):(e.line="e.util.createClass(e.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:e.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(t,e){t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in" t?t.left:this._getlefttooriginx(),this.top="top" t?t.top:this._gettoptooriginy()},_set:function(t,e){return="" this.callsuper("_set",t,e),void="" i(this.callsuper("toobject",t),this.calclinepoints())},_getnontransformeddimensions:function(){var="" ","common_parts",'x1="',t.x1,'" y1="',t.y1,'" x2="',t.x2,'" y2="',t.y2,'">\n']}}),e.Line.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),e.Line.fromElement=function(t,r,n){n=n||{};var s=e.parseAttributes(t,e.Line.ATTRIBUTE_NAMES),o=[s.x1||0,s.y1||0,s.x2||0,s.y2||0];r(new e.Line(o,i(s,n)))},e.Line.fromObject=function(t,i){var n=r(t,!0);n.points=[t.x1,t.y1,t.x2,t.y2],e.Object._fromObject("Line",n,function(t){delete t.points,i&&i(t)},"points")})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=Math.PI;e.Circle?e.warn("fabric.Circle is already defined."):(e.Circle=e.util.createClass(e.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*i,cacheProperties:e.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(t))},_toSVG:function(){var t,r=(this.endAngle-this.startAngle)%(2*i);if(0===r)t=["<circle ","common_parts",'cx="0" cy="0" ','r="',this.radius,'">\n'];else{var n=e.util.cos(this.startAngle)*this.radius,s=e.util.sin(this.startAngle)*this.radius,o=e.util.cos(this.endAngle)*this.radius,a=e.util.sin(this.endAngle)*this.radius,h=r>i?"1":"0";t=['<path 0="" d="M '+n+" "+s,"="" a="" "+this.radius+"="" "+this.radius,"="" ",+h+"="" 1","="" "+o+"="" "+a,'"="" ',"common_parts","="">\n"]}return t},_render:function(t){t.beginPath(),t.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",2*t).set("height",2*t)}}),e.Circle.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),e.Circle.fromElement=function(t,i){var r,n=e.parseAttributes(t,e.Circle.ATTRIBUTE_NAMES);if(!("radius"in(r=n)&&r.radius>=0))throw new Error("value of `r` attribute is required and can not be negative");n.left=(n.left||0)-n.radius,n.top=(n.top||0)-n.radius,i(new e.Circle(n))},e.Circle.fromObject=function(t,i){return e.Object._fromObject("Circle",t,i)})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Triangle?e.warn("fabric.Triangle is already defined"):(e.Triangle=e.util.createClass(e.Object,{type:"triangle",width:100,height:100,_render:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderPaintInOrder(t)},_renderDashedStroke:function(t){var i=this.width/2,r=this.height/2;t.beginPath(),e.util.drawDashedLine(t,-i,r,0,-r,this.strokeDashArray),e.util.drawDashedLine(t,0,-r,i,r,this.strokeDashArray),e.util.drawDashedLine(t,i,r,-i,r,this.strokeDashArray),t.closePath()},_toSVG:function(){var t=this.width/2,e=this.height/2;return["<polygon ","common_parts",'points="',[-t+" "+e,"0="" "+-e,t+"="" "+e].join(","),'"="">']}}),e.Triangle.fromObject=function(t,i){return e.Object._fromObject("Triangle",t,i)})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=2*Math.PI;e.Ellipse?e.warn("fabric.Ellipse is already defined."):(e.Ellipse=e.util.createClass(e.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this.set("rx",t&&t.rx||0),this.set("ry",t&&t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},_toSVG:function(){return["<ellipse ","common_parts",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'">\n']},_render:function(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,i,!1),t.restore(),this._renderPaintInOrder(t)}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),e.Ellipse.fromElement=function(t,i){var r=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);r.left=(r.left||0)-r.rx,r.top=(r.top||0)-r.ry,i(new e.Ellipse(r))},e.Ellipse.fromObject=function(t,i){return e.Object._fromObject("Ellipse",t,i)})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Rect?e.warn("fabric.Rect is already defined"):(e.Rect=e.util.createClass(e.Object,{stateProperties:e.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t){var e=this.rx?Math.min(this.rx,this.width/2):0,i=this.ry?Math.min(this.ry,this.height/2):0,r=this.width,n=this.height,s=-this.width/2,o=-this.height/2,a=0!==e||0!==i,h=.4477152502;t.beginPath(),t.moveTo(s+e,o),t.lineTo(s+r-e,o),a&&t.bezierCurveTo(s+r-h*e,o,s+r,o+h*i,s+r,o+i),t.lineTo(s+r,o+n-i),a&&t.bezierCurveTo(s+r,o+n-h*i,s+r-h*e,o+n,s+r-e,o+n),t.lineTo(s+e,o+n),a&&t.bezierCurveTo(s+h*e,o+n,s,o+n-h*i,s,o+n-i),t.lineTo(s,o+i),a&&t.bezierCurveTo(s,o+h*i,s+h*e,o,s+e,o),t.closePath(),this._renderPaintInOrder(t)},_renderDashedStroke:function(t){var i=-this.width/2,r=-this.height/2,n=this.width,s=this.height;t.beginPath(),e.util.drawDashedLine(t,i,r,i+n,r,this.strokeDashArray),e.util.drawDashedLine(t,i+n,r,i+n,r+s,this.strokeDashArray),e.util.drawDashedLine(t,i+n,r+s,i,r+s,this.strokeDashArray),e.util.drawDashedLine(t,i,r+s,i,r,this.strokeDashArray),t.closePath()},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},_toSVG:function(){return["<rect ","common_parts",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'">\n']}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),e.Rect.fromElement=function(t,r,n){if(!t)return r(null);n=n||{};var s=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);s.left=s.left||0,s.top=s.top||0,s.height=s.height||0,s.width=s.width||0;var o=new e.Rect(i(n?e.util.object.clone(n):{},s));o.visible=o.visible&&o.width>0&&o.height>0,r(o)},e.Rect.fromObject=function(t,i){return e.Object._fromObject("Rect",t,i)})}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.util.array.min,n=e.util.array.max,s=e.util.toFixed;e.Polyline?e.warn("fabric.Polyline is already defined"):(e.Polyline=e.util.createClass(e.Object,{type:"polyline",points:null,cacheProperties:e.Object.prototype.cacheProperties.concat("points"),initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._setPositionDimensions(e)},_setPositionDimensions:function(t){var e,i=this._calcDimensions(t);this.width=i.width,this.height=i.height,t.fromSVG||(e=this.translateToGivenOrigin({x:i.left-this.strokeWidth/2,y:i.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),void 0===t.left&&(this.left=t.fromSVG?i.left:e.x),void 0===t.top&&(this.top=t.fromSVG?i.top:e.y),this.pathOffset={x:i.left+this.width/2,y:i.top+this.height/2}},_calcDimensions:function(){var t=this.points,e=r(t,"x")||0,i=r(t,"y")||0;return{left:e,top:i,width:(n(t,"x")||0)-e,height:(n(t,"y")||0)-i}},toObject:function(t){return i(this.callSuper("toObject",t),{points:this.points.concat()})},_toSVG:function(){for(var t=[],i=this.pathOffset.x,r=this.pathOffset.y,n=e.Object.NUM_FRACTION_DIGITS,o=0,a=this.points.length;o<a;o++)t.push(s(this.points[o].x-i,n),",",s(this.points[o].y-r,n)," ");return["<"+this.type+"="" ","common_parts",'points="',t.join(" "),'"="">\n']},commonRender:function(t){var e,i=this.points.length,r=this.pathOffset.x,n=this.pathOffset.y;if(!i||isNaN(this.points[i-1].y))return!1;t.beginPath(),t.moveTo(this.points[0].x-r,this.points[0].y-n);for(var s=0;s<i;s++)e=this.points[s],t.lineto(e.x-r,e.y-n);return!0},_render:function(t){this.commonrender(t)&&this._renderpaintinorder(t)},_renderdashedstroke:function(t){var i,r;t.beginpath();for(var="" n="0,s=this.points.length;n<s;n++)i=this.points[n],r=this.points[n+1]||i,e.util.drawDashedLine(t,i.x,i.y,r.x,r.y,this.strokeDashArray)},complexity:function(){return" this.get("points").length}}),e.polyline.attribute_names="e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElementGenerator=function(t){return" function(r,n,s){if(!r)return="" n(null);s||(s="{});var" o="e.parsePointsAttribute(r.getAttribute("points")),a=e.parseAttributes(r,e[t].ATTRIBUTE_NAMES);a.fromSVG=!0,n(new" e[t](o,i(a,s)))}},e.polyline.fromelement="e.Polyline.fromElementGenerator("Polyline"),e.Polyline.fromObject=function(t,i){return" e.object._fromobject("polyline",t,i,"points")})}("undefined"!="typeof" exports?exports:this),function(t){"use="" strict";var="" e="t.fabric||(t.fabric={});e.Polygon?e.warn("fabric.Polygon" is="" already="" defined"):(e.polygon="e.util.createClass(e.Polyline,{type:"polygon",_render:function(t){this.commonRender(t)&&(t.closePath(),this._renderPaintInOrder(t))},_renderDashedStroke:function(t){this.callSuper("_renderDashedStroke",t),t.closePath()}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=e.Polyline.fromElementGenerator("Polygon"),e.Polygon.fromObject=function(t,i){return" e.object._fromobject("polygon",t,i,"points")})}("undefined"!="typeof" defined"):(e.path="e.util.createClass(e.Object,{type:"path",path:null,cacheProperties:e.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:e.Object.prototype.stateProperties.concat("path"),initialize:function(t,i){i=i||{},this.callSuper("initialize",i),t||(t=[]);var" r="[object Array]" =="=s.call(t);this.path=r?t:t.match&&t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&&(r||(this.path=this._parsePath()),e.Polyline.prototype._setPositionDimensions.call(this,i))},_renderPathCommands:function(t){var" e,i,r,n="null,s=0,a=0,h=0,c=0,l=0,u=0,f=-this.pathOffset.x,d=-this.pathOffset.y;t.beginPath();for(var" g="0,p=this.path.length;g<p;++g){switch((e=this.path[g])[0]){case"l":h+=e[1],c+=e[2],t.lineTo(h+f,c+d);break;case"L":h=e[1],c=e[2],t.lineTo(h+f,c+d);break;case"h":h+=e[1],t.lineTo(h+f,c+d);break;case"H":h=e[1],t.lineTo(h+f,c+d);break;case"v":c+=e[1],t.lineTo(h+f,c+d);break;case"V":c=e[1],t.lineTo(h+f,c+d);break;case"m":s=h+=e[1],a=c+=e[2],t.moveTo(h+f,c+d);break;case"M":s=h=e[1],a=c=e[2],t.moveTo(h+f,c+d);break;case"c":i=h+e[5],r=c+e[6],l=h+e[3],u=c+e[4],t.bezierCurveTo(h+e[1]+f,c+e[2]+d,l+f,u+d,i+f,r+d),h=i,c=r;break;case"C":h=e[5],c=e[6],l=e[3],u=e[4],t.bezierCurveTo(e[1]+f,e[2]+d,l+f,u+d,h+f,c+d);break;case"s":i=h+e[3],r=c+e[4],null===n[0].match(/[CcSs]/)?(l=h,u=c):(l=2*h-l,u=2*c-u),t.bezierCurveTo(l+f,u+d,h+e[1]+f,c+e[2]+d,i+f,r+d),l=h+e[1],u=c+e[2],h=i,c=r;break;case"S":i=e[3],r=e[4],null===n[0].match(/[CcSs]/)?(l=h,u=c):(l=2*h-l,u=2*c-u),t.bezierCurveTo(l+f,u+d,e[1]+f,e[2]+d,i+f,r+d),h=i,c=r,l=e[1],u=e[2];break;case"q":i=h+e[3],r=c+e[4],l=h+e[1],u=c+e[2],t.quadraticCurveTo(l+f,u+d,i+f,r+d),h=i,c=r;break;case"Q":i=e[3],r=e[4],t.quadraticCurveTo(e[1]+f,e[2]+d,i+f,r+d),h=i,c=r,l=e[1],u=e[2];break;case"t":i=h+e[1],r=c+e[2],null===n[0].match(/[QqTt]/)?(l=h,u=c):(l=2*h-l,u=2*c-u),t.quadraticCurveTo(l+f,u+d,i+f,r+d),h=i,c=r;break;case"T":i=e[1],r=e[2],null===n[0].match(/[QqTt]/)?(l=h,u=c):(l=2*h-l,u=2*c-u),t.quadraticCurveTo(l+f,u+d,i+f,r+d),h=i,c=r;break;case"a":o(t,h+f,c+d,[e[1],e[2],e[3],e[4],e[5],e[6]+h+f,e[7]+c+d]),h+=e[6],c+=e[7];break;case"A":o(t,h+f,c+d,[e[1],e[2],e[3],e[4],e[5],e[6]+f,e[7]+d]),h=e[6],c=e[7];break;case"z":case"Z":h=s,c=a,t.closePath()}n=e}},_render:function(t){this._renderPathCommands(t),this._renderPaintInOrder(t)},toString:function(){return"#<fabric.Path" ("+this.complexity()+'):="" {="" "top":="" '+this.top+',="" "left":="" '+this.left+"="" }="">"},toObject:function(t){return n(this.callSuper("toObject",t),{path:this.path.map(function(t){return t.slice()})})},toDatalessObject:function(t){var e=this.toObject(["sourcePath"].concat(t));return e.sourcePath&&delete e.path,e},_toSVG:function(){return["<path ","common_parts",'d="',this.path.map(function(t){return t.join(" ")}).join("="" "),'"="" stroke-linecap="round" ',"="">\n"]},_getOffsetTransform:function(){var t=e.Object.NUM_FRACTION_DIGITS;return" translate("+a(-this.pathOffset.x,t)+", "+a(-this.pathOffset.y,t)+")"},toClipPathSVG:function(t){var e=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},toSVG:function(t){var e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},complexity:function(){return this.path.length},_parsePath:function(){for(var t,e,i,r,n,s=[],o=[],a=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,l=0,u=this.path.length;l<u;l++){for(r=(t=this.path[l]).slice(1).trim(),o.length=0;i=a.exec(r);)o.push(i[0]);n=[t.charat(0)];for(var f="0,d=o.length;f<d;f++)e=parseFloat(o[f]),isNaN(e)||n.push(e);var" g="n[0],p=h[g.toLowerCase()],v=c[g]||g;if(n.length-1">p)for(var m=1,y=n.length;m<y;m+=p)s.push([g].concat(n.slice(m,m+p))),g=v;else s.push(n)}return="" s},_calcdimensions:function(){for(var="" t,n,s,o,a="[],h=[],c=null,l=0,u=0,f=0,d=0,g=0,p=0,v=0,m=this.path.length;v<m;++v){switch((t=this.path[v])[0]){case"l":f+=t[1],d+=t[2],o=[];break;case"L":f=t[1],d=t[2],o=[];break;case"h":f+=t[1],o=[];break;case"H":f=t[1],o=[];break;case"v":d+=t[1],o=[];break;case"V":d=t[1],o=[];break;case"m":l=f+=t[1],u=d+=t[2],o=[];break;case"M":l=f=t[1],u=d=t[2],o=[];break;case"c":n=f+t[5],s=d+t[6],g=f+t[3],p=d+t[4],o=e.util.getBoundsOfCurve(f,d,f+t[1],d+t[2],g,p,n,s),f=n,d=s;break;case"C":g=t[3],p=t[4],o=e.util.getBoundsOfCurve(f,d,t[1],t[2],g,p,t[5],t[6]),f=t[5],d=t[6];break;case"s":n=f+t[3],s=d+t[4],null===c[0].match(/[CcSs]/)?(g=f,p=d):(g=2*f-g,p=2*d-p),o=e.util.getBoundsOfCurve(f,d,g,p,f+t[1],d+t[2],n,s),g=f+t[1],p=d+t[2],f=n,d=s;break;case"S":n=t[3],s=t[4],null===c[0].match(/[CcSs]/)?(g=f,p=d):(g=2*f-g,p=2*d-p),o=e.util.getBoundsOfCurve(f,d,g,p,t[1],t[2],n,s),f=n,d=s,g=t[1],p=t[2];break;case"q":n=f+t[3],s=d+t[4],g=f+t[1],p=d+t[2],o=e.util.getBoundsOfCurve(f,d,g,p,g,p,n,s),f=n,d=s;break;case"Q":g=t[1],p=t[2],o=e.util.getBoundsOfCurve(f,d,g,p,g,p,t[3],t[4]),f=t[3],d=t[4];break;case"t":n=f+t[1],s=d+t[2],null===c[0].match(/[QqTt]/)?(g=f,p=d):(g=2*f-g,p=2*d-p),o=e.util.getBoundsOfCurve(f,d,g,p,g,p,n,s),f=n,d=s;break;case"T":n=t[1],s=t[2],null===c[0].match(/[QqTt]/)?(g=f,p=d):(g=2*f-g,p=2*d-p),o=e.util.getBoundsOfCurve(f,d,g,p,g,p,n,s),f=n,d=s;break;case"a":o=e.util.getBoundsOfArc(f,d,t[1],t[2],t[3],t[4],t[5],t[6]+f,t[7]+d),f+=t[6],d+=t[7];break;case"A":o=e.util.getBoundsOfArc(f,d,t[1],t[2],t[3],t[4],t[5],t[6],t[7]),f=t[6],d=t[7];break;case"z":case"Z":f=l,d=u}c=t,o.forEach(function(t){a.push(t.x),h.push(t.y)}),a.push(f),h.push(d)}var" y="i(a)||0,_=i(h)||0;return{left:y,top:_,width:(r(a)||0)-y,height:(r(h)||0)-_}}}),e.Path.fromObject=function(t,i){if("string"==typeof" t.sourcepath){var="" r="t.sourcePath;e.loadSVGFromURL(r,function(e){var" e.object._fromobject("path",t,i,"path")},e.path.attribute_names="e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(t,i,r){var" s="e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES);s.fromSVG=!0,i(new" e.path(s.d,n(s,r)))})}("undefined"!="typeof" exports?exports:this),function(t){"use="" strict";var="" e="t.fabric||(t.fabric={}),i=e.util.array.min,r=e.util.array.max;e.Group||(e.Group=e.util.createClass(e.Object,e.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,i){e=e||{},this._objects=[],i&&this.callSuper("initialize",e),this._objects=t||[];for(var" n="e&&e.centerPoint;void" 0!="=e.originX&&(this.originX=e.originX),void" e.centerpoint,this.callsuper("initialize",e)}this.setcoords()},_updateobjectsacoords:function(){for(var="" t="this._objects.length;t--;)this._objects[t].setCoords(!0,!0)},_updateObjectsCoords:function(t){t=t||this.getCenterPoint();for(var" i="t.left,r=t.top;t.set({left:i-e.x,top:r-e.y}),t.group=this,t.setCoords(!0,!0)},toString:function(){return"#<fabric.Group:" ("+this.complexity()+")="">"},addWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),t&&(this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},removeWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,i){var r=this._objects.length;if(this.useSetOnGroup)for(;r--;)this._objects[r].setOnGroup(t,i);if("canvas"===t)for(;r--;)this._objects[r]._set(t,i);e.Object.prototype._set.call(this,t,i)},toObject:function(t){var i=this.includeDefaultValues,r=this._objects.map(function(e){var r=e.includeDefaultValues;e.includeDefaultValues=i;var n=e.toObject(t);return e.includeDefaultValues=r,n}),n=e.Object.prototype.toObject.call(this,t);return n.objects=r,n},toDatalessObject:function(t){var i,r=this.sourcePath;if(r)i=r;else{var n=this.includeDefaultValues;i=this._objects.map(function(e){var i=e.includeDefaultValues;e.includeDefaultValues=n;var r=e.toDatalessObject(t);return e.includeDefaultValues=i,r})}var s=e.Object.prototype.toDatalessObject.call(this,t);return s.objects=i,s},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=e.Object.prototype.shouldCache.call(this);if(t)for(var i=0,r=this._objects.length;i<r;i++)if(this._objects[i].willdrawshadow())return this.owncaching="!1,!1;return" t},willdrawshadow:function(){if(this.shadow)return="" e.object.prototype.willdrawshadow.call(this);for(var="" t="0,i=this._objects.length;t<i;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return" this.owncaching||this.group&&this.group.isonacache()},drawobject:function(t){for(var="" e="0,i=this._objects.length;e<i;e++)this._objects[e].render(t);this._drawClipPath(t)},isCacheDirty:function(t){if(this.callSuper("isCacheDirty",t))return!0;if(!this.statefullCache)return!1;for(var" r="this.cacheWidth/this.zoomX,n=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-r/2,-n/2,r,n)}return!0}return!1},_restoreObjectsState:function(){return" this._objects.foreach(this._restoreobjectstate,this),this},realizetransform:function(t){var="" i="t.calcTransformMatrix(),r=e.util.qrDecompose(i),n=new" e.point(r.translatex,r.translatey);return="" t.flipx="!1,t.flipY=!1,t.set("scaleX",r.scaleX),t.set("scaleY",r.scaleY),t.skewX=r.skewX,t.skewY=r.skewY,t.angle=r.angle,t.setPositionByOrigin(n,"center","center"),t},_restoreObjectState:function(t){return" this.realizetransform(t),t.setcoords(),delete="" t.group,this},destroy:function(){return="" this._objects.foreach(function(t){t.set("dirty",!0)}),this._restoreobjectsstate()},toactiveselection:function(){if(this.canvas){var="" r.objects;var="" n="new" e.activeselection([]);return="" n.set(r),n.type="activeSelection" ,i.remove(this),t.foreach(function(t){t.group="n,t.dirty=!0,i.add(t)}),n.canvas=i,n._objects=t,i._activeObject=n,n.setCoords(),n}},ungroupOnCanvas:function(){return" this._restoreobjectsstate()},setobjectscoords:function(){return="" this.foreachobject(function(t){t.setcoords(!0,!0)}),this},_calcbounds:function(t){for(var="" e,i,r,n="[],s=[],o=["tr","br","bl","tl"],a=0,h=this._objects.length,c=o.length;a<h;++a)for((e=this._objects[a]).setCoords(!0),r=0;r<c;r++)i=o[r],n.push(e.oCoords[i].x),s.push(e.oCoords[i].y);this._getBounds(n,s,t)},_getBounds:function(t,n,s){var" o="new" e.point(i(t),i(n)),a="new" e.point(r(t),r(n)),h="o.y||0,c=o.x||0,l=a.x-o.x||0,u=a.y-o.y||0;this.width=l,this.height=u,s||this.setPositionByOrigin({x:c,y:h},"left","top")},_toSVG:function(t){for(var" ","common_parts","="">\n"],i=0,r=this._objects.length;i<r;i++)e.push("\t\t",this._objects[i].tosvg(t));return e.push("<="" g="">\n"),e},getSvgStyles:function(){var t=void 0!==this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")},toClipPathSVG:function(t){for(var e=[],i=0,r=this._objects.length;i<r;i++)e.push("\t",this._objects[i].toclippathsvg(t));return this._createbaseclippathsvgmarkup(e,{reviver:t})}}),e.group.fromobject="function(t,i){e.util.enlivenObjects(t.objects,function(r){e.util.enlivenObjects([t.clipPath],function(n){var" s="e.util.object.clone(t,!0);s.clipPath=n[0],delete" s.objects,i&&i(new="" e.group(r,s,!0))})})})}("undefined"!="typeof" exports?exports:this),function(t){"use="" strict";var="" e="t.fabric||(t.fabric={});e.ActiveSelection||(e.ActiveSelection=e.util.createClass(e.Group,{type:"activeSelection",initialize:function(t,i){i=i||{},this._objects=t||[];for(var" r="this._objects.length;r--;)this._objects[r].group=this;i.originX&&(this.originX=i.originX),i.originY&&(this.originY=i.originY),this._calcBounds(),this._updateObjectsCoords(),e.Object.prototype.initialize.call(this,i),this.setCoords()},toGroup:function(){var" t="this._objects.concat();this._objects=[];var" i="e.Object.prototype.toObject.call(this),r=new" e.group([]);if(delete="" i.type,r.set(i),t.foreach(function(t){t.canvas.remove(t),t.group="r}),r._objects=t,!this.canvas)return" r;var="" n="this.canvas;return" n.add(r),n._activeobject="r,r.setCoords(),r},onDeselect:function(){return" this.destroy(),!1},tostring:function(){return"#<fabric.activeselection:="" ("+this.complexity()+")="">"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(t,e,i){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",t,e),void 0===(i=i||{}).hasControls&&(i.hasControls=!1),void 0===i.hasRotatingPoint&&(i.hasRotatingPoint=!1),i.forActiveSelection=!0;for(var r=0,n=this._objects.length;r<n;r++)this._objects[r]._rendercontrols(t,i);t.restore()}}),e.activeselection.fromobject=function(t,i){e.util.enlivenobjects(t.objects,function(r){delete t.objects,i&&i(new="" e.activeselection(r,t,!0))})})}("undefined"!="typeof" exports?exports:this),function(t){"use="" strict";var="" e="s.util.object.extend;t.fabric||(t.fabric={}),t.fabric.Image?s.warn("fabric.Image" is="" already="" defined."):(s.image="s.util.createClass(s.Object,{type:"image",crossOrigin:"",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:s.Object.prototype.stateProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,initialize:function(t,e){e||(e={}),this.filters=[],this.cacheKey="texture"+s.Object.__uid++,this.callSuper("initialize",e),this._initElement(t,e)},getElement:function(){return" this._element||{}},setelement:function(t,e){return="" this.removetexture(this.cachekey),this.removetexture(this.cachekey+"_filtered"),this._element="t,this._originalElement=t,this._initConfig(e),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(t){var" 0,["_originalelement","_element","_filteredel","_cachecanvas"].foreach(function(t){s.util.cleanupjsdomnode(this[t]),this[t]="void" 0}.bind(this))},setcrossorigin:function(t){return="" this.crossorigin="t,this._element.crossOrigin=t,this},getOriginalSize:function(){var" t="this.getElement();return{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}},_stroke:function(t){if(this.stroke&&0!==this.strokeWidth){var" i="[];this.filters.forEach(function(t){t&&i.push(t.toObject())});var" r="e(this.callSuper("toObject",["crossOrigin","cropX","cropY"].concat(t)),{src:this.getSrc(),filters:i});return" this.resizefilter&&(r.resizefilter="this.resizeFilter.toObject()),r},hasCrop:function(){return" this.cropx||this.cropy||this.width<this._element.width||this.height<this._element.height},_tosvg:function(){var="" t,e="[],i=[],r=-this.width/2,n=-this.height/2,o="";if(this.hasCrop()){var" a="s.Object.__uid++;e.push('<clipPath" id="imageCrop_'+a+'">\n','\t<rect x="'+r+'" y="'+n+'" width="'+this.width+'" height="'+this.height+'">\n',"\n"),o=' clip-path="url(#imageCrop_'+a+')" '}if(i.push("\t<image ","common_parts",'xlink:href="',this.getSvgSrc(!0),'" x="',r-this.cropX,'" y="',n-this.cropY,'" width="',this._element.width||this._element.naturalWidth,'" height="',this._element.height||this._element.height,'" ',o,"=""/>\n"),this.stroke||this.strokeDashArray){var h=this.fill;this.fill=null,t=["\t<rect ",'x="',r,'" y="',n,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'">\n'],this.fill=h}return e="fill"!==this.paintFirst?e.concat(t,i):e.concat(i,t)},getSrc:function(t){var e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src"):e.src:this.src||""},setSrc:function(t,e,i){return s.util.loadImage(t,function(t){this.setElement(t,i),this._setWidthHeight(),e&&e(this)},this,i&&i.crossOrigin),this},toString:function(){return'#<fabric.image: {="" src:="" "'+this.getsrc()+'"="" }="">'},applyResizeFilters:function(){var t=this.resizeFilter,e=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),r=i.scaleX,n=i.scaleY,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||r>e&&n>e)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=r,void(this._lastScaleY=n);s.filterBackend||(s.filterBackend=s.initFilterBackend());var a=s.util.createCanvasElement(),h=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,c=o.width,l=o.height;a.width=c,a.height=l,this._element=a,this._lastScaleX=t.scaleX=r,this._lastScaleY=t.scaleY=n,s.filterBackend.applyFilters([t],o,c,l,this._element,h),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height},applyFilters:function(t){if(t=(t=t||this.filters||[]).filter(function(t){return t&&!t.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===t.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var e=this._originalElement,i=e.naturalWidth||e.width,r=e.naturalHeight||e.height;if(this._element===this._originalElement){var n=s.util.createCanvasElement();n.width=i,n.height=r,this._element=n,this._filteredEl=n}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,i,r),this._lastScaleX=1,this._lastScaleY=1;return s.filterBackend||(s.filterBackend=s.initFilterBackend()),s.filterBackend.applyFilters(t,this._originalElement,i,r,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(t){!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(t){var e=this._element,i=this.width,r=this.height,n=Math.min(e.naturalWidth||e.width,i*this._filterScalingX),s=Math.min(e.naturalHeight||e.height,r*this._filterScalingY),o=-i/2,a=-r/2,h=Math.max(0,this.cropX*this._filterScalingX),c=Math.max(0,this.cropY*this._filterScalingY);e&&t.drawImage(e,h,c,n,s,o,a,i,r)},_needsResize:function(){var t=this.getTotalObjectScaling();return t.scaleX!==this._lastScaleX||t.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(t,e){this.setElement(s.util.getById(t),e),s.util.addClass(this.getElement(),s.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(t,e){t&&t.length?s.util.enlivenObjects(t,function(t){e&&e(t)},"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){t||(t={});var e=this.getElement();this.width=t.width||e.naturalWidth||e.width||0,this.height=t.height||e.naturalHeight||e.height||0},parsePreserveAspectRatioAttribute:function(){var t,e=s.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),i=this._element.width,r=this._element.height,n=1,o=1,a=0,h=0,c=0,l=0,u=this.width,f=this.height,d={width:u,height:f};return!e||"none"===e.alignX&&"none"===e.alignY?(n=u/i,o=f/r):("meet"===e.meetOrSlice&&(t=(u-i*(n=o=s.util.findScaleToFit(this._element,d)))/2,"Min"===e.alignX&&(a=-t),"Max"===e.alignX&&(a=t),t=(f-r*o)/2,"Min"===e.alignY&&(h=-t),"Max"===e.alignY&&(h=t)),"slice"===e.meetOrSlice&&(t=i-u/(n=o=s.util.findScaleToCover(this._element,d)),"Mid"===e.alignX&&(c=t/2),"Max"===e.alignX&&(c=t),t=r-f/o,"Mid"===e.alignY&&(l=t/2),"Max"===e.alignY&&(l=t),i=u/n,r=f/o)),{width:i,height:r,scaleX:n,scaleY:o,offsetLeft:a,offsetTop:h,cropX:c,cropY:l}}}),s.Image.CSS_CANVAS="canvas-img",s.Image.prototype.getSvgSrc=s.Image.prototype.getSrc,s.Image.fromObject=function(t,e){var i=s.util.object.clone(t);s.util.loadImage(i.src,function(t,r){r?e&&e(null,r):s.Image.prototype._initFilters.call(i,i.filters,function(r){i.filters=r||[],s.Image.prototype._initFilters.call(i,[i.resizeFilter],function(r){i.resizeFilter=r[0],s.util.enlivenObjects([i.clipPath],function(r){i.clipPath=r[0];var n=new s.Image(t,i);e(n)})})})},null,i.crossOrigin)},s.Image.fromURL=function(t,e,i){s.util.loadImage(t,function(t){e&&e(new s.Image(t,i))},null,i&&i.crossOrigin)},s.Image.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin".split(" ")),s.Image.fromElement=function(t,i,r){var n=s.parseAttributes(t,s.Image.ATTRIBUTE_NAMES);s.Image.fromURL(n["xlink:href"],i,e(r?s.util.object.clone(r):{},n))})}("undefined"!=typeof exports?exports:this),s.util.object.extend(s.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.angle%360;return t>0?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(t){var e=function(){},i=(t=t||{}).onComplete||e,r=t.onChange||e,n=this;return s.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){n.rotate(t),r()},onComplete:function(){n.setCoords(),i()}}),this}}),s.util.object.extend(s.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){"use strict";function t(t,e){var i="precision "+e+" float;\nvoid main(){}",r=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(r,i),t.compileShader(r),!!t.getShaderParameter(r,t.COMPILE_STATUS)}function e(t){t&&t.tileSize&&(this.tileSize=t.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}s.isWebglSupported=function(e){if(s.isLikelyNode)return!1;e=e||s.WebglFilterBackend.prototype.tileSize;var i=document.createElement("canvas"),r=i.getContext("webgl")||i.getContext("experimental-webgl"),n=!1;if(r){s.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),n=s.maxTextureSize>=e;for(var o=["highp","mediump","lowp"],a=0;a<3;a++)if(t(r,o[a])){s.webglprecision=o[a];break}}return this.issupported="n,n},s.WebglFilterBackend=e,e.prototype={tileSize:2048,resources:{},setupGLContext:function(t,e){this.dispose(),this.createWebGLCanvas(t,e),this.aPosition=new" float32array([0,0,0,1,1,0,1,1]),this.choosefastestcopyglto2dmethod(t,e)},choosefastestcopyglto2dmethod:function(t,e){var="" i,r="void" 0!="=window.performance;try{new" imagedata(1,1),i="!0}catch(g){i=!1}var" n="undefined" !="typeof" arraybuffer,o="undefined" uint8clampedarray;if(r&&i&&n&&o){var="" a="s.util.createCanvasElement(),h=new" arraybuffer(t*e*4);if(s.forceglputimagedata)return="" this.imagebuffer="h,void(this.copyGLTo2D=f);var" c,l,d="{imageBuffer:h,destinationWidth:t,destinationHeight:e,targetCanvas:a};a.width=t,a.height=e,c=window.performance.now(),u.call(d,this.gl,d),l=window.performance.now()-c,c=window.performance.now(),f.call(d,this.gl,d),l">window.performance.now()-c?(this.imageBuffer=h,this.copyGLTo2D=f):this.copyGLTo2D=u}},createWebGLCanvas:function(t,e){var i=s.util.createCanvasElement();i.width=t,i.height=e;var r={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},n=i.getContext("webgl",r);n||(n=i.getContext("experimental-webgl",r)),n&&(n.clearColor(0,0,0,0),this.canvas=i,this.gl=n)},applyFilters:function(t,e,i,r,n,s){var o,a=this.gl;s&&(o=this.getCachedTexture(s,e));var h={originalWidth:e.width||e.originalWidth,originalHeight:e.height||e.originalHeight,sourceWidth:i,sourceHeight:r,destinationWidth:i,destinationHeight:r,context:a,sourceTexture:this.createTexture(a,i,r,!o&&e),targetTexture:this.createTexture(a,i,r),originalTexture:o||this.createTexture(a,i,r,!o&&e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:n},c=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,c),t.forEach(function(t){t&&t.applyTo(h)}),l(h),this.copyGLTo2D(a,h),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(h.sourceTexture),a.deleteTexture(h.targetTexture),a.deleteFramebuffer(c),n.getContext("2d").setTransform(1,0,0,1,0,0),h},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(t,e,i,r){var n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null),n},getCachedTexture:function(t,e){if(this.textureCache[t])return this.textureCache[t];var i=this.createTexture(this.gl,e.width,e.height,e);return this.textureCache[t]=i,i},evictCachesForKey:function(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])},copyGLTo2D:u,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var t=this.gl,e={renderer:"",vendor:""};if(!t)return e;var i=t.getExtension("WEBGL_debug_renderer_info");if(i){var r=t.getParameter(i.UNMASKED_RENDERER_WEBGL),n=t.getParameter(i.UNMASKED_VENDOR_WEBGL);r&&(e.renderer=r.toLowerCase()),n&&(e.vendor=n.toLowerCase())}return this.gpuInfo=e,e}}}(),function(){"use strict";var t=function(){};function e(){}s.Canvas2dFilterBackend=e,e.prototype={evictCachesForKey:t,dispose:t,clearWebGLCaches:t,resources:{},applyFilters:function(t,e,i,r,n){var s=n.getContext("2d");s.drawImage(e,0,0,i,r);var o={sourceWidth:i,sourceHeight:r,imageData:s.getImageData(0,0,i,r),originalEl:e,originalImageData:s.getImageData(0,0,i,r),canvasEl:n,ctx:s,filterBackend:this};return t.forEach(function(t){t.applyTo(o)}),o.imageData.width===i&&o.imageData.height===r||(n.width=o.imageData.width,n.height=o.imageData.height),s.putImageData(o.imageData,0,0),o}}}(),s.Image=s.Image||{},s.Image.filters=s.Image.filters||{},s.Image.filters.BaseFilter=s.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},createProgram:function(t,e,i){e=e||this.fragmentSource,i=i||this.vertexSource,"highp"!==s.webGlPrecision&&(e=e.replace(/precision highp float/g,"precision "+s.webGlPrecision+" float"));var r=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(r,i),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+t.getShaderInfoLog(r));var n=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+t.getShaderInfoLog(n));var o=t.createProgram();if(t.attachShader(o,r),t.attachShader(o,n),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+t.getProgramInfoLog(o));var a=this.getAttributeLocations(t,o),h=this.getUniformLocations(t,o)||{};return h.uStepW=t.getUniformLocation(o,"uStepW"),h.uStepH=t.getUniformLocation(o,"uStepH"),{program:o,attributeLocations:a,uniformLocations:h}},getAttributeLocations:function(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(t,e,i){var r=e.aPosition,n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.enableVertexAttribArray(r),t.vertexAttribPointer(r,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW)},_setupFrameBuffer:function(t){var e,i,r=t.context;t.passes>1?(e=t.destinationWidth,i=t.destinationHeight,t.sourceWidth===e&&t.sourceHeight===i||(r.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(r,e,i)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t.targetTexture,0)):(r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish())},_swapTextures:function(t){t.passes--,t.pass++;var e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e},isNeutralState:function(){var t=this.mainParameter,e=s.Image.filters[this.type].prototype;if(t){if(Array.isArray(e[t])){for(var i=e[t].length;i--;)if(this[t][i]!==e[t][i])return!1;return!0}return e[t]===this[t]}return!1},applyTo:function(t){t.webgl?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},retrieveShader:function(t){return t.programCache.hasOwnProperty(this.type)||(t.programCache[this.type]=this.createProgram(t.context)),t.programCache[this.type]},applyToWebGL:function(t){var e=t.context,i=this.retrieveShader(t);0===t.pass&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(i.program),this.sendAttributeData(e,i.attributeLocations,t.aPosition),e.uniform1f(i.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(i.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,i.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(t,e,i){t.activeTexture(i),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)},unbindAdditionalTexture:function(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(t){this[this.mainParameter]=t},sendUniformData:function(){},createHelpLayer:function(t){if(!t.helpLayer){var e=document.createElement("canvas");e.width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e}},toObject:function(){var t={type:this.type},e=this.mainParameter;return e&&(t[e]=this[e]),t},toJSON:function(){return this.toObject()}}),s.Image.filters.BaseFilter.fromObject=function(t,e){var i=new s.Image.filters[t.type](t);return e&&e(i),i},function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.ColorMatrix=r(i.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(t){this.callSuper("initialize",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){var e,i,r,n,s,o=t.imageData.data,a=o.length,h=this.matrix,c=this.colorsOnly;for(s=0;s<a;s+=4)e=o[s],i=o[s+1],r=o[s+2],c?(o[s]=e*h[0]+i*h[1]+r*h[2]+255*h[4],o[s+1]=e*h[5]+i*h[6]+r*h[7]+255*h[9],o[s+2]=e*h[10]+i*h[11]+r*h[12]+255*h[14]):(n=o[s+3],o[s]=e*h[0]+i*h[1]+r*h[2]+n*h[3]+255*h[4],o[s+1]=e*h[5]+i*h[6]+r*h[7]+n*h[8]+255*h[9],o[s+2]=e*h[10]+i*h[11]+r*h[12]+n*h[13]+255*h[14],o[s+3]=e*h[15]+i*h[16]+r*h[17]+n*h[18]+255*h[19])},getuniformlocations:function(t,e){return{ucolormatrix:t.getuniformlocation(e,"ucolormatrix"),uconstants:t.getuniformlocation(e,"uconstants")}},senduniformdata:function(t,e){var i="this.matrix,r=[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]],n=[i[4],i[9],i[14],i[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,r),t.uniform4fv(e.uConstants,n)}}),e.Image.filters.ColorMatrix.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof" exports?exports:this),function(t){"use="" strict";var="" e="t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.Brightness=r(i.BaseFilter,{type:"Brightness",fragmentSource:"precision" highp="" float;\nuniform="" sampler2d="" utexture;\nuniform="" float="" ubrightness;\nvarying="" vec2="" vtexcoord;\nvoid="" main()="" {\nvec4="" color="texture2D(uTexture," vtexcoord);\ncolor.rgb="" +="uBrightness;\ngl_FragColor" =="" color;\n}",brightness:0,mainparameter:"brightness",applyto2d:function(t){if(0!="=this.brightness){var" e,i="t.imageData.data,r=i.length,n=Math.round(255*this.brightness);for(e=0;e<r;e+=4)i[e]=i[e]+n,i[e+1]=i[e+1]+n,i[e+2]=i[e+2]+n}},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),e.Image.filters.Brightness.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof" umatrix[9];\nuniform="" ustepw;\nuniform="" usteph;\nvarying="" 0,="" 0);\nfor="" (float="" h="0.0;" <="" 3.0;="" h+="1.0)" {\nfor="" w="0.0;" w+="1.0)" {\nvec2="" matrixpos="vec2(uStepW" *="" (w="" -="" 1),="" usteph="" (h="" 1));\ncolor="" vtexcoord="" matrixpos)="" umatrix[int(h="" 3.0="" w)];\n}\n}\ngl_fragcolor="color;\n}",Convolute_3_0:"precision" 1);\nfor="" 1.0),="" 1.0));\ncolor.rgb="" matrixpos).rgb="" w)];\n}\n}\nfloat="" alpha="texture2D(uTexture," vtexcoord).a;\ngl_fragcolor="color;\ngl_FragColor.a" alpha;\n}",convolute_5_1:"precision="" umatrix[25];\nuniform="" 5.0;="" 2.0),="" 2.0));\ncolor="" 5.0="" 2.0));\ncolor.rgb="" alpha;\n}",convolute_7_1:"precision="" umatrix[49];\nuniform="" 7.0;="" 3.0),="" 3.0));\ncolor="" 7.0="" 3.0));\ncolor.rgb="" alpha;\n}",convolute_9_1:"precision="" umatrix[81];\nuniform="" 9.0;="" 4.0),="" 4.0));\ncolor="" 9.0="" 4.0));\ncolor.rgb="" alpha;\n}"},retrieveshader:function(t){var="" t.programcache.hasownproperty(i)||(t.programcache[i]="this.createProgram(t.context,r)),t.programCache[i]},applyTo2d:function(t){var" e,i,r,n,s,o,a,h,c,l,u,f,d,g="t.imageData,p=g.data,v=this.matrix,m=Math.round(Math.sqrt(v.length)),y=Math.floor(m/2),_=g.width,x=g.height,b=t.ctx.createImageData(_,x),C=b.data,S=this.opaque?1:0;for(u=0;u<x;u++)for(l=0;l<_;l++){for(s=4*(u*_+l),e=0,i=0,r=0,n=0,d=0;d<m;d++)for(f=0;f<m;f++)o=l+f-y,(a=u+d-y)<0||a">x||o<0||o>_||(h=4*(a*_+o),c=v[d*m+f],e+=p[h]*c,i+=p[h+1]*c,r+=p[h+2]*c,S||(n+=p[h+3]*c));C[s]=e,C[s+1]=i,C[s+2]=r,C[s+3]=S?p[s+3]:n}t.imageData=b},getUniformLocations:function(t,e){return{uMatrix:t.getUniformLocation(e,"uMatrix"),uOpaque:t.getUniformLocation(e,"uOpaque"),uHalfSize:t.getUniformLocation(e,"uHalfSize"),uSize:t.getUniformLocation(e,"uSize")}},sendUniformData:function(t,e){t.uniform1fv(e.uMatrix,this.matrix)},toObject:function(){return i(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.Grayscale=r(i.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(t){var e,i,r=t.imageData.data,n=r.length,s=this.mode;for(e=0;e<n;e+=4)"average"===s?i=(r[e]+r[e+1]+r[e+2]) 1="==this.blocksize},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),e.Image.filters.Pixelate.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof" 3:"lightness"="==s?i=(Math.min(r[e],r[e+1],r[e+2])+Math.max(r[e],r[e+1],r[e+2]))/2:"luminosity"===s&&(i=.21*r[e]+.72*r[e+1]+.07*r[e+2]),r[e]=i,r[e+1]=i,r[e+2]=i},retrieveShader:function(t){var" e="this.type+"_"+this.mode;if(!t.programCache.hasOwnProperty(e)){var" i="this.fragmentSource[this.mode];t.programCache[e]=this.createProgram(t.context,i)}return" t.programcache[e]},getuniformlocations:function(t,e){return{umode:t.getuniformlocation(e,"umode")}},senduniformdata:function(t,e){t.uniform1i(e.umode,1)},isneutralstate:function(){return!1}}),e.image.filters.grayscale.fromobject="e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof" exports?exports:this),function(t){"use="" strict";var="" highp="" float;\nuniform="" sampler2d="" utexture;\nuniform="" int="" uinvert;\nvarying="" vec2="" vtexcoord;\nvoid="" main()="" {\nvec4="" color="texture2D(uTexture," vtexcoord);\nif="" (uinvert="=" 1)="" {\ngl_fragcolor="vec4(1.0" -="" color.r,1.0="" -color.g,1.0="" -color.b,color.a);\n}="" else="" e,i="t.imageData.data,r=i.length;for(e=0;e<r;e+=4)i[e]=255-i[e],i[e+1]=255-i[e+1],i[e+2]=255-i[e+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,"uInvert")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),e.Image.filters.Invert.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof" float="" usteph;\nuniform="" unoise;\nuniform="" useed;\nvarying="" vtexcoord;\nfloat="" rand(vec2="" co,="" seed,="" vscale)="" {\nreturn="" fract(sin(dot(co.xy="" *="" vscale="" ,vec2(12.9898="" ,="" 78.233)))="" 43758.5453="" (seed="" +="" 0.01)="" 2.0);\n}\nvoid="" vtexcoord);\ncolor.rgb="" rand(vtexcoord,="" useed,="" 0.1="" usteph))="" unoise;\ngl_fragcolor="color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(t){if(0!==this.noise){var" e,i,r="t.imageData.data,n=r.length,s=this.noise;for(e=0,n=r.length;e<n;e+=4)i=(.5-Math.random())*s,r[e]+=i,r[e+1]+=i,r[e+2]+=i}},getUniformLocations:function(t,e){return{uNoise:t.getUniformLocation(e,"uNoise"),uSeed:t.getUniformLocation(e,"uSeed")}},sendUniformData:function(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())},toObject:function(){return" i(this.callsuper("toobject"),{noise:this.noise})}}),e.image.filters.noise.fromobject="e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof" ublocksize;\nuniform="" ustepw;\nuniform="" usteph;\nvarying="" {\nfloat="" blockw="uBlocksize" ustepw;\nfloat="" blockh="uBlocksize" ustepw;\nint="" posx="int(vTexCoord.x" blockw);\nint="" posy="int(vTexCoord.y" blockh);\nfloat="" fposx="float(posX);\nfloat" fposy="float(posY);\nvec2" squarecoords="vec2(fposX" blockw,="" blockh);\nvec4="" squarecoords);\ngl_fragcolor="color;\n}",applyTo2d:function(t){var" e,i,r,n,s,o,a,h,c,l,u,f="t.imageData,d=f.data,g=f.height,p=f.width;for(i=0;i<g;i+=this.blocksize)for(r=0;r<p;r+=this.blocksize)for(n=d[e=4*i*p+4*r],s=d[e+1],o=d[e+2],a=d[e+3],l=Math.min(i+this.blocksize,g),u=Math.min(r+this.blocksize,p),h=i;h<l;h++)for(c=r;c<u;c++)d[e=4*h*p+4*c]=n,d[e+1]=s,d[e+2]=o,d[e+3]=a},isNeutralState:function(){return" vec4="" ulow;\nuniform="" uhigh;\nvarying="" vtexcoord);\nif(all(greaterthan(gl_fragcolor.rgb,ulow.rgb))="" &&="" all(greaterthan(uhigh.rgb,gl_fragcolor.rgb)))="" {\ngl_fragcolor.a="0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(t){var" i,r,n,s,o="t.imageData.data,a=255*this.distance,h=new" e.color(this.color).getsource(),c="[h[0]-a,h[1]-a,h[2]-a],l=[h[0]+a,h[1]+a,h[2]+a];for(i=0;i<o.length;i+=4)r=o[i],n=o[i+1],s=o[i+2],r">c[0]&&n>c[1]&&s>c[2]&&r<l[0]&&n<l[1]&&s<l[2]&&(o[i+3]=0)},getuniformlocations:function(t,e){return{ulow:t.getuniformlocation(e,"ulow"),uhigh:t.getuniformlocation(e,"uhigh")}},senduniformdata:function(t,i){var r="new" e.color(this.color).getsource(),n="parseFloat(this.distance),s=[0+r[0]/255-n,0+r[1]/255-n,0+r[2]/255-n,1],o=[r[0]/255+n,r[1]/255+n,r[2]/255+n,1];t.uniform4fv(i.uLow,s),t.uniform4fv(i.uHigh,o)},toObject:function(){return" i(this.callsuper("toobject"),{color:this.color,distance:this.distance})}}),e.image.filters.removecolor.fromobject="e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof" exports?exports:this),function(t){"use="" strict";var="" e="t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass,n={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var" s="" in="" n)i[s]="r(i.ColorMatrix,{type:s,matrix:n[s],mainParameter:!1,colorsOnly:!0}),e.Image.filters[s].fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof" *="uColor.rgb;\n",screen:"gl_FragColor.rgb" =="" 1.0="" -="" (1.0="" gl_fragcolor.rgb)="" ucolor.rgb);\n",add:"gl_fragcolor.rgb="" +="uColor.rgb;\n",diff:"gl_FragColor.rgb" abs(gl_fragcolor.rgb="" ucolor.rgb);\n",subtract:"gl_fragcolor.rgb="" max(gl_fragcolor.rgb,="" ucolor.rgb);\n",darken:"gl_fragcolor.rgb="min(gl_FragColor.rgb," ucolor.rgb);\n",exclusion:"gl_fragcolor.rgb="" 2.0="" (ucolor.rgb="" gl_fragcolor.rgb);\n",overlay:"if="" (ucolor.r="" <="" 0.5)="" {\ngl_fragcolor.r="" ucolor.r;\n}="" else="" gl_fragcolor.r)="" ucolor.r);\n}\nif="" (ucolor.g="" {\ngl_fragcolor.g="" ucolor.g;\n}="" gl_fragcolor.g)="" ucolor.g);\n}\nif="" (ucolor.b="" {\ngl_fragcolor.b="" ucolor.b;\n}="" gl_fragcolor.b)="" ucolor.b);\n}\n",tint:"gl_fragcolor.rgb="" ucolor.a);\ngl_fragcolor.rgb="" highp="" float;\nuniform="" sampler2d="" utexture;\nuniform="" vec4="" ucolor;\nvarying="" vec2="" vtexcoord;\nvoid="" main()="" {\nvec4="" color="texture2D(uTexture," vtexcoord);\ngl_fragcolor="color;\nif" (color.a=""> 0.0) {\n"+this.fragmentSource[t]+"}\n}"},retrieveShader:function(t){var e,i=this.type+"_"+this.mode;return t.programCache.hasOwnProperty(i)||(e=this.buildSource(this.mode),t.programCache[i]=this.createProgram(t.context,e)),t.programCache[i]},applyTo2d:function(t){var i,r,n,s,o,a,h,c=t.imageData.data,l=c.length,u=1-this.alpha;i=(h=new e.Color(this.color).getSource())[0]*this.alpha,r=h[1]*this.alpha,n=h[2]*this.alpha;for(var f=0;f<l;f+=4)switch(s=c[f],o=c[f+1],a=c[f+2],this.mode){case"multiply":c[f]=s*i 1="==this.scaleX&&1===this.scaleY},lanczosCreate:function(t){return" 255,c[f+1]="o*r/255,c[f+2]=a*n/255;break;case"screen":c[f]=255-(255-s)*(255-i)/255,c[f+1]=255-(255-o)*(255-r)/255,c[f+2]=255-(255-a)*(255-n)/255;break;case"add":c[f]=s+i,c[f+1]=o+r,c[f+2]=a+n;break;case"diff":case"difference":c[f]=Math.abs(s-i),c[f+1]=Math.abs(o-r),c[f+2]=Math.abs(a-n);break;case"subtract":c[f]=s-i,c[f+1]=o-r,c[f+2]=a-n;break;case"darken":c[f]=Math.min(s,i),c[f+1]=Math.min(o,r),c[f+2]=Math.min(a,n);break;case"lighten":c[f]=Math.max(s,i),c[f+1]=Math.max(o,r),c[f+2]=Math.max(a,n);break;case"overlay":c[f]=i<128?2*s*i/255:255-2*(255-s)*(255-i)/255,c[f+1]=r<128?2*o*r/255:255-2*(255-o)*(255-r)/255,c[f+2]=n<128?2*a*n/255:255-2*(255-a)*(255-n)/255;break;case"exclusion":c[f]=i+s-2*i*s/255,c[f+1]=r+o-2*r*o/255,c[f+2]=n+a-2*n*a/255;break;case"tint":c[f]=i+s*u,c[f+1]=r+o*u,c[f+2]=n+a*u}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,"uColor")}},sendUniformData:function(t,i){var" r="new" e.color(this.color).getsource();r[0]="this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,t.uniform4fv(i.uColor,r)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendColor.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof" exports?exports:this),function(t){"use="" strict";var="" e="t.fabric,i=e.Image.filters,r=e.util.createClass;i.BlendImage=r(i.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute" vec2="" aposition;\nvarying="" vtexcoord;\nvarying="" vtexcoord2;\nuniform="" mat3="" utransformmatrix;\nvoid="" main()="" {\nvtexcoord="aPosition;\nvTexCoord2" =="" (utransformmatrix="" *="" vec3(aposition,="" 1.0)).xy;\ngl_position="vec4(aPosition" 2.0="" -="" 1.0,="" 0.0,="" 1.0);\n}",fragmentsource:{multiply:"precision="" highp="" float;\nuniform="" sampler2d="" utexture;\nuniform="" uimage;\nuniform="" vec4="" ucolor;\nvarying="" vtexcoord2;\nvoid="" {\nvec4="" color="texture2D(uTexture," vtexcoord);\nvec4="" color2="texture2D(uImage," vtexcoord2);\ncolor.rgba="" color;\n}",mask:"precision="" vtexcoord2);\ncolor.a="color2.a;\ngl_FragColor" color;\n}"},retrieveshader:function(t){var="" t.programcache.hasownproperty(e)||(t.programcache[e]="this.createProgram(t.context,i)),t.programCache[e]},applyToWebGL:function(t){var" t.getcachedtexture(e.cachekey,e._element)},calculatematrix:function(){var="" t="this.image,e=t._element.width,i=t._element.height;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/i,1]},applyTo2d:function(t){var" i,r,n,s,o,a,h,c,l,u,f,d="t.imageData,g=t.filterBackend.resources,p=d.data,v=p.length,m=d.width,y=d.height,_=this.image;g.blendImage||(g.blendImage=e.util.createCanvasElement()),u=(l=g.blendImage).getContext("2d"),l.width!==m||l.height!==y?(l.width=m,l.height=y):u.clearRect(0,0,m,y),u.setTransform(_.scaleX,0,0,_.scaleY,_.left,_.top),u.drawImage(_._element,0,0,m,y),f=u.getImageData(0,0,m,y).data;for(var" x="0;x<v;x+=4)switch(o=p[x],a=p[x+1],h=p[x+2],c=p[x+3],i=f[x],r=f[x+1],n=f[x+2],s=f[x+3],this.mode){case"multiply":p[x]=o*i/255,p[x+1]=a*r/255,p[x+2]=h*n/255,p[x+3]=c*s/255;break;case"mask":p[x+3]=s}},getUniformLocations:function(t,e){return{uTransformMatrix:t.getUniformLocation(e,"uTransformMatrix"),uImage:t.getUniformLocation(e,"uImage")}},sendUniformData:function(t,e){var" i="this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,i)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendImage.fromObject=function(t,i){e.Image.fromObject(t.image,function(r){var" n="e.util.object.clone(t);n.image=r,i(new" e.image.filters.blendimage(n))})}}("undefined"!="typeof" t.programcache[i]},getfilterwindow:function(){var="" math.ceil(this.lanczoslobes="" t)},gettaps:function(){for(var="" array(i),n="1;n<=i;n++)r[n-1]=t(n*e);return" r},generateshader:function(t){for(var="" array(t),i="this.fragmentSourceTOP,r=1;r<=t;r++)e[r-1]=r+".0" udelta";return="" i+="uniform float uTaps[" +t+"];\n",i+="void main() {\n" ,i+="  vec4 color = texture2D(uTexture, vTexCoord);\n" ,e.foreach(function(t,e){i+="  color += texture2D(uTexture, vTexCoord + " +t+")="" utaps["+e+"];\n",i+="  color += texture2D(uTexture, vTexCoord - " +e+"];\n"}),i+="  gl_FragColor = color / sum;\n" },fragmentsourcetop:"precision="" udelta;\nvarying="" vtexcoord;\n",applyto:function(t){t.webgl?(t.passes++,this.width="t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceHeight=t.destinationHeight):this.applyTo2d(t)},isNeutralState:function(){return" function(e){if(e="">=t||e<=-t)return 0;if(e<1.1920929e-7&&e="">-1.1920929e-7)return 1;var i=(e*=Math.PI)/t;return a(e)/e*a(i)/i}},applyTo2d:function(t){var e=t.imageData,i=this.scaleX,r=this.scaleY;this.rcpScaleX=1/i,this.rcpScaleY=1/r;var n,s=e.width,a=e.height,h=o(s*i),c=o(a*r);"sliceHack"===this.resizeType?n=this.sliceByTwo(t,s,a,h,c):"hermite"===this.resizeType?n=this.hermiteFastResize(t,s,a,h,c):"bilinear"===this.resizeType?n=this.bilinearFiltering(t,s,a,h,c):"lanczos"===this.resizeType&&(n=this.lanczosResize(t,s,a,h,c)),t.imageData=n},sliceByTwo:function(t,i,n,s,o){var a,h,c=t.imageData,l=!1,u=!1,f=.5*i,d=.5*n,g=e.filterBackend.resources,p=0,v=0,m=i,y=0;for(g.sliceByTwo||(g.sliceByTwo=document.createElement("canvas")),((a=g.sliceByTwo).width<1.5*i||a.height<n)&&(a.width=1.5*i,a.height=n),(h=a.getcontext("2d")).clearrect(0,0,1.5*i,n),h.putimagedata(c,0,0),s=r(s),o=r(o);!l||!u;)i=f,n=d,s<r(.5*f)?f=r(.5*f):(f=s,l=!0),o<r(.5*d)?d=r(.5*d):(d=o,u=!0),h.drawimage(a,p,v,i,n,m,y,f,d),p=m,v=y,y+=d;return h.getimagedata(p,v,s,o)},lanczosresize:function(t,e,o,a,c){var="" l="t.imageData.data,u=t.ctx.createImageData(a,c),f=u.data,d=this.lanczosCreate(this.lanczosLobes),g=this.rcpScaleX,p=this.rcpScaleY,v=2/this.rcpScaleX,m=2/this.rcpScaleY,y=h(g*this.lanczosLobes/2),_=h(p*this.lanczosLobes/2),x={},b={},C={};return" function="" t(h){var="" s,w,t,o,p,k,e,d,m,j,a;for(b.x="(h+.5)*g,C.x=r(b.x),S=0;S<c;S++){for(b.y=(S+.5)*p,C.y=r(b.y),P=0,k=0,E=0,D=0,M=0,w=C.x-y;w<=C.x+y;w++)if(!(w<0||w">=e)){j=r(1e3*s(w-b.x)),x[j]||(x[j]={});for(var F=C.y-_;F<=c.y+_;f++)f<0||f>=o||(A=r(1e3*s(F-b.y)),x[j][A]||(x[j][A]=d(n(i(j*v,2)+i(A*m,2))/1e3)),(T=x[j][A])>0&&(P+=T,k+=T*l[O=4*(F*e+w)],E+=T*l[O+1],D+=T*l[O+2],M+=T*l[O+3]))}f[O=4*(S*a+h)]=k/P,f[O+1]=E/P,f[O+2]=D/P,f[O+3]=M/P}return++h<a?t(h):u}(0)},bilinearfiltering:function(t,e,i,n,s){var o,a,h,c,l,u,f,d,g,p="0,v=this.rcpScaleX,m=this.rcpScaleY,y=4*(e-1),_=t.imageData.data,x=t.ctx.createImageData(n,s),b=x.data;for(h=0;h<s;h++)for(c=0;c<n;c++)for(l=v*c-(o=r(v*c)),u=m*h-(a=r(m*h)),g=4*(a*e+o),f=0;f<4;f++)d=_[g+f]*(1-l)*(1-u)+_[g+4+f]*l*(1-u)+_[g+y+f]*u*(1-l)+_[g+y+4+f]*l*u,b[p++]=d;return" x},hermitefastresize:function(t,e,i,o,a){for(var="" c="this.rcpScaleX,l=this.rcpScaleY,u=h(c/2),f=h(l/2),d=t.imageData.data,g=t.ctx.createImageData(o,a),p=g.data,v=0;v<a;v++)for(var" m="0;m<o;m++){for(var" y="4*(m+v*o),_=0,x=0,b=0,C=0,S=0,w=0,T=0,O=(v+.5)*l,P=r(v*l);P<(v+1)*l;P++)for(var" k="s(O-(P+.5))/f,E=(m+.5)*c,D=k*k,M=r(m*c);M<(m+1)*c;M++){var" j="s(E-(M+.5))/u,A=n(D+j*j);A">1&&A<-1||(_=2*a*a*a-3*a*a+1)>0&&(T+=_*d[(j=4*(M+P*e))+3],b+=_,d[j+3]<255&&(_=_*d[j+3] 250),c+="_*d[j],S+=_*d[j+1],w+=_*d[j+2],x+=_)}p[y]=C/x,p[y+1]=S/x,p[y+2]=w/x,p[y+3]=T/b}return" g},toobject:function(){return{type:this.type,scalex:this.scalex,scaley:this.scaley,resizetype:this.resizetype,lanczoslobes:this.lanczoslobes}}}),e.image.filters.resize.fromobject="e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof" exports?exports:this),function(t){"use="" strict";var="" e="t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.Contrast=r(i.BaseFilter,{type:"Contrast",fragmentSource:"precision" highp="" float;\nuniform="" sampler2d="" utexture;\nuniform="" float="" ucontrast;\nvarying="" vec2="" vtexcoord;\nvoid="" main()="" {\nvec4="" color="texture2D(uTexture," vtexcoord);\nfloat="" contrastf="1.015" *="" (ucontrast="" +="" 1.0)="" (1.0="" (1.015="" -="" ucontrast));\ncolor.rgb="contrastF" (color.rgb="" 0.5)="" 0.5;\ngl_fragcolor="color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(t){if(0!==this.contrast){var" e,i="t.imageData.data,r=i.length,n=Math.floor(255*this.contrast),s=259*(n+255)/(255*(259-n));for(e=0;e<r;e+=4)i[e]=s*(i[e]-128)+128,i[e+1]=s*(i[e+1]-128)+128,i[e+2]=s*(i[e+2]-128)+128}},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),e.Image.filters.Contrast.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof" usaturation;\nvarying="" rgmax="max(color.r," color.g);\nfloat="" rgbmax="max(rgMax," color.b);\ncolor.r="" !="color.r" ?="" (rgbmax="" color.r)="" usaturation="" :="" 0.00;\ncolor.g="" color.g)="" 0.00;\ncolor.b="" color.b)="" 0.00;\ngl_fragcolor="color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(t){if(0!==this.saturation){var" e,i,r="t.imageData.data,n=r.length,s=-this.saturation;for(e=0;e<n;e+=4)i=Math.max(r[e],r[e+1],r[e+2]),r[e]+=i!==r[e]?(i-r[e])*s:0,r[e+1]+=i!==r[e+1]?(i-r[e+1])*s:0,r[e+2]+=i!==r[e+2]?(i-r[e+2])*s:0}},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),e.Image.filters.Saturation.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof" udelta;\nvarying="" vtexcoord;\nconst="" nsamples="15.0;\nvec3" v3offset="vec3(12.9898," 78.233,="" 151.7182);\nfloat="" random(vec3="" scale)="" {\nreturn="" fract(sin(dot(gl_fragcoord.xyz,="" scale))="" 43758.5453);\n}\nvoid="" total="0.0;\nfloat" offset="random(v3offset);\nfor" (float="" t="-nSamples;" <="nSamples;" t++)="" {\nfloat="" percent="(t" nsamples;\nfloat="" weight="1.0" abs(percent);\ncolor="" vtexcoord="" udelta="" percent)="" weight;\ntotal="" =="" total;\n}",blur:0,mainparameter:"blur",applyto:function(t){t.webgl?(this.aspectratio="t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var" i,r,n="t.filterBackend.resources,s=t.imageData.width,o=t.imageData.height;n.blurLayer1||(n.blurLayer1=e.util.createCanvasElement(),n.blurLayer2=e.util.createCanvasElement()),i=n.blurLayer1,r=n.blurLayer2,i.width===s&&i.height===o||(r.width=i.width=s,r.height=i.height=o);var" a,h,c,l,u="i.getContext("2d"),f=r.getContext("2d"),d=.06*this.blur*.5;for(u.putImageData(t.imageData,0,0),f.clearRect(0,0,s,o),l=-15;l<=15;l++)c=d*(h=l/15)*s+(a=(Math.random()-.5)/4),f.globalAlpha=1-Math.abs(h),f.drawImage(i,c,a),u.drawImage(r,0,0),f.globalAlpha=1,f.clearRect(0,0,r.width,r.height);for(l=-15;l<=15;l++)c=d*(h=l/15)*o+(a=(Math.random()-.5)/4),f.globalAlpha=1-Math.abs(h),f.drawImage(i,a,c),u.drawImage(r,0,0),f.globalAlpha=1,f.clearRect(0,0,r.width,r.height);t.ctx.drawImage(i,0,0);var" g="t.ctx.getImageData(0,0,i.width,i.height);return" u.globalalpha="1,u.clearRect(0,0,i.width,i.height),g},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,"uDelta")}},sendUniformData:function(t,e){var" i="this.chooseRightDelta();t.uniform2fv(e.delta,i)},chooseRightDelta:function(){var" t,e="1,i=[0,0];return" this.horizontal?this.aspectratio="">1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectratio),t=e*this.blur*.12,this.horizontal?i[0]=t:i[1]=t,i}}),i.blur.fromobject=e.image.filters.basefilter.fromobject}("undefined"!=typeof exports?exports:this),function(t){"use="" strict";var="" e="t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.Gamma=r(i.BaseFilter,{type:"Gamma",fragmentSource:"precision" highp="" float;\nuniform="" sampler2d="" utexture;\nuniform="" vec3="" ugamma;\nvarying="" vec2="" vtexcoord;\nvoid="" main()="" {\nvec4="" color="texture2D(uTexture," vtexcoord);\nvec3="" correction="(1.0" ugamma);\ncolor.r="pow(color.r," correction.r);\ncolor.g="pow(color.g," correction.g);\ncolor.b="pow(color.b," correction.b);\ngl_fragcolor="color;\ngl_FragColor.rgb" *="color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(t){this.gamma=[1,1,1],i.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var" e,i="t.imageData.data,r=this.gamma,n=i.length,s=1/r[0],o=1/r[1],a=1/r[2];for(this.rVals||(this.rVals=new" uint8array(256),this.gvals="new" uint8array(256),this.bvals="new" uint8array(256)),e="0,n=256;e<n;e++)this.rVals[e]=255*Math.pow(e/255,s),this.gVals[e]=255*Math.pow(e/255,o),this.bVals[e]=255*Math.pow(e/255,a);for(e=0,n=i.length;e<n;e+=4)i[e]=this.rVals[i[e]],i[e+1]=this.gVals[i[e+1]],i[e+2]=this.bVals[i[e+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),e.Image.filters.Gamma.fromObject=e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof" e.util.object.extend(this.callsuper("toobject"),{subfilters:this.subfilters.map(function(t){return="" t.toobject()})})},isneutralstate:function(){return!this.subfilters.some(function(t){return!t.isneutralstate()})}}),e.image.filters.composed.fromobject="function(t,i){var" r="(t.subFilters||[]).map(function(t){return" new="" e.image.filters[t.type](t)}),n="new" e.image.filters.composed({subfilters:r});return="" i&&i(n),n}}("undefined"!="typeof" t="this.rotation*Math.PI,i=e.util.cos(t),r=e.util.sin(t),n=Math.sqrt(1/3)*r,s=1-i;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=i+s/3,this.matrix[1]=1/3*s-n,this.matrix[2]=1/3*s+n,this.matrix[5]=1/3*s+n,this.matrix[6]=i+1/3*s,this.matrix[7]=1/3*s-n,this.matrix[10]=1/3*s-n,this.matrix[11]=1/3*s+n,this.matrix[12]=i+1/3*s},isNeutralState:function(t){return" this.calculatematrix(),i.basefilter.prototype.isneutralstate.call(this,t)},applyto:function(t){this.calculatematrix(),i.basefilter.prototype.applyto.call(this,t)}}),e.image.filters.huerotation.fromobject="e.Image.filters.BaseFilter.fromObject}("undefined"!=typeof" is="" already="" defined"):(e.text="e.util.createClass(e.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[" \t\r]="" g,_respaceandtab:="" [="" ,_rewords:="" \s+="" g,type:"text",fontsize:40,fontweight:"normal",fontfamily:"times="" roman",underline:!1,overline:!1,linethrough:!1,textalign:"left",fontstyle:"normal",lineheight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textbackgroundcolor:"",stateproperties:e.object.prototype.stateproperties.concat("fontfamily","fontweight","fontsize","text","underline","overline","linethrough","textalign","fontstyle","lineheight","textbackgroundcolor","charspacing","styles"),cacheproperties:e.object.prototype.cacheproperties.concat("fontfamily","fontweight","fontsize","text","underline","overline","linethrough","textalign","fontstyle","lineheight","textbackgroundcolor","charspacing","styles"),stroke:null,shadow:null,_fontsizefraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontsizemult:1.13,charspacing:0,styles:null,_measuringcontext:null,deltay:0,_styleproperties:["stroke","strokewidth","fill","fontfamily","fontsize","fontweight","fontstyle","underline","overline","linethrough","deltay","textbackgroundcolor"],__charbounds:[],cache_font_size:400,min_text_width:2,initialize:function(t,e){this.styles="e&&e.styles||{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},getMeasuringContext:function(){return" e._measuringcontext||(e._measuringcontext="this.canvas&&this.canvas.contextCache||e.util.createCanvasElement().getContext("2d")),e._measuringContext},_splitText:function(){var" this.textlines="t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var" t,e,i,r,n,s,o,a="0,h=this._textLines.length;a<h;a++)if(("justify"===this.textAlign||a!==h-1&&!this.isEndOfWrapping(a))&&(r=0,n=this._textLines[a],(e=this.getLineWidth(a))<this.width&&(o=this.textLines[a].match(this._reSpacesAndTabs)))){i=o.length,t=(this.width-e)/i;for(var" c="0,l=n.length;c<=l;c++)s=this.__charBounds[a][c],this._reSpaceAndTab.test(n[c])?(s.width+=t,s.kernedWidth+=t,s.left+=r,r+=t):s.left+=r}},isEndOfWrapping:function(t){return" 1},tostring:function(){return"#<fabric.text="" ("+this.complexity()+'):="" {="" "text":="" "'+this.text+'",="" "fontfamily":="" "'+this.fontfamily+'"="" }="">'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")},_renderText:function(t){"stroke"===this.paintFirst?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,e,i){t.textBaseline="alphabetic",t.font=this._getFontDeclaration(e,i)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,i=this._textLines.length;e<i;e++){var r="this.getLineWidth(e);r">t&&(t=r)}return t},_renderTextLine:function(t,e,i,r,n,s){this._renderChars(t,e,i,r,n,s)},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var e,i,r,n,s,o,a=0,h=t.fillStyle,c=this._getLeftOffset(),l=this._getTopOffset(),u=0,f=0,d=0,g=this._textLines.length;d<g;d++)if(e=this.getheightofline(d),this.textbackgroundcolor||this.stylehas("textbackgroundcolor",d)){r=this._textlines[d],i=this._getlineleftoffset(d),f=0,u=0,n=this.getvalueofpropertyat(d,0,"textbackgroundcolor");for(var 0="==n||void" p="0,v=r.length;p<v;p++)s=this.__charBounds[d][p],(o=this.getValueOfPropertyAt(d,p,"textBackgroundColor"))!==n?(t.fillStyle=n,n&&t.fillRect(c+i+u,l+a,f,e/this.lineHeight),u=s.left,f=s.width,n=o):f+=s.kernedWidth;o&&(t.fillStyle=o,t.fillRect(c+i+u,l+a,f,e/this.lineHeight)),a+=e}else" a+="e;t.fillStyle=h,this._removeShadow(t)}},getFontCache:function(t){var" i="t.fontFamily.toLowerCase();e.charWidthsCache[i]||(e.charWidthsCache[i]={});var" r="e.charWidthsCache[i],n=t.fontStyle.toLowerCase()+"_"+(t.fontWeight+"").toLowerCase();return" r[n]||(r[n]="{}),r[n]},_applyCharStyles:function(t,e,i,r,n){this._setFillStyles(e,n),this._setStrokeStyles(e,n),e.font=this._getFontDeclaration(n)},_measureChar:function(t,e,i,r){var" n,s,o,a,h="this.getFontCache(e),c=i+t,l=this._getFontDeclaration(e)===this._getFontDeclaration(r),u=e.fontSize/this.CACHE_FONT_SIZE;if(i&&void" 0!="=h[i]&&(o=h[i]),void" f="this.getMeasuringContext();this._setTextStyles(f,e,!0)}return" void="" this.getvalueofpropertyat(t,e,"fontsize")},measureline:function(t){var="" e="this._measureLine(t);return" e,i,r,n,s="0,o=this._textLines[t],a=new" array(o.length);for(this.__charbounds[t]="a,e=0;e<o.length;e++)i=o[e],n=this._getGraphemeBox(i,t,e,r),a[e]=n,s+=n.kernedWidth,r=i;return" a[e]="{left:n?n.left+n.width:0,width:0,kernedWidth:0,height:this.fontSize},{width:s,numOfSpaces:0}},_getGraphemeBox:function(t,e,i,r,n){var" s,o="this.getCompleteStyleDeclaration(e,i),a=r?this.getCompleteStyleDeclaration(e,i-1):{},h=this._measureChar(t,o,r,a),c=h.kernedWidth,l=h.width;0!==this.charSpacing&&(l+=s=this._getWidthOfCharSpacing(),c+=s);var" u="{width:l,left:0,height:o.fontSize,kernedWidth:c,deltaY:o.deltaY};if(i">0&&!n){var f=this.__charBounds[e][i-1];u.left=f.left+f.width+h.kernedWidth-h.width}return u},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],i=this.getHeightOfChar(t,0),r=1,n=e.length;r<n;r++)i=math.max(this.getheightofchar(t,r),i);return this.__lineheights[t]="i*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var" t,e="0,i=0,r=this._textLines.length;i<r;i++)t=this.getHeightOfLine(i),e+=i===r-1?t/this.lineHeight:t;return" e},_getleftoffset:function(){return-this.width="" 2},_gettopoffset:function(){return-this.height="" 2},_rendertextcommon:function(t,e){t.save();for(var="" i="0,r=this._getLeftOffset(),n=this._getTopOffset(),s=this._applyPatternGradientTransform(t,"fillText"===e?this.fill:this.stroke),o=0,a=this._textLines.length;o<a;o++){var" h="this.getHeightOfLine(o),c=h/this.lineHeight,l=this._getLineLeftOffset(o);this._renderTextLine(e,t,this._textLines[o],r+l-s.offsetX,n+i+c-s.offsetY,o),i+=h}t.restore()},_renderTextFill:function(t){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_renderChars:function(t,e,i,r,n,s){var" o,a,h,c,l="this.getHeightOfLine(s),u=-1!==this.textAlign.indexOf("justify"),f="",d=0,g=!u&&0===this.charSpacing&&this.isEmptyStyles(s);if(e.save(),n-=l*this._fontSizeFraction/this.lineHeight,g)return" this._renderchar(t,e,s,0,this.textlines[s],r,n,l),void="" e.restore();for(var="" p="0,v=i.length-1;p<=v;p++)c=p===v||this.charSpacing,f+=i[p],h=this.__charBounds[s][p],0===d?(r+=h.kernedWidth-h.width,d+=h.width):d+=h.kernedWidth,u&&!c&&this._reSpaceAndTab.test(i[p])&&(c=!0),c||(o=o||this.getCompleteStyleDeclaration(s,p),a=this.getCompleteStyleDeclaration(s,p+1),c=this._hasStyleChanged(o,a)),c&&(this._renderChar(t,e,s,p,f,r,n,l),f="",o=a,r+=d,d=0);e.restore()},_renderChar:function(t,e,i,r,n,s,o){var" a="this._getStyleDeclaration(i,r),h=this.getCompleteStyleDeclaration(i,r),c="fillText"===t&&h.fill,l="strokeText"===t&&h.stroke&&h.strokeWidth;(l||c)&&(a&&e.save(),this._applyCharStyles(t,e,i,r,h),a&&a.textBackgroundColor&&this._removeShadow(e),a&&a.deltaY&&(o+=a.deltaY),c&&e.fillText(n,s,o),l&&e.strokeText(n,s,o),a&&e.restore())},setSuperscript:function(t,e){return" this._setscript(t,e,this.superscript)},setsubscript:function(t,e){return="" this._setscript(t,e,this.subscript)},_setscript:function(t,e,i){var="" r="this.get2DCursorLocation(t,!0),n=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"fontSize"),s=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"deltaY"),o={fontSize:n*i.size,deltaY:s+n*i.baseline};return" this.setselectionstyles(o,t,e),this},_hasstylechanged:function(t,e){return="" t.fill!="=e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.deltaY!==e.deltaY},_hasStyleChangedForSvg:function(t,e){return" this._hasstylechanged(t,e)||t.overline!="=e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough},_getLineLeftOffset:function(t){var" e="this.getLineWidth(t);return"center"===this.textAlign?(this.width-e)/2:"right"===this.textAlign?this.width-e:"justify-center"===this.textAlign&&this.isEndOfWrapping(t)?(this.width-e)/2:"justify-right"===this.textAlign&&this.isEndOfWrapping(t)?this.width-e:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var" t="this._forceClearCache;return" t||(t="this.hasStateChanged("_dimensionAffectingProps")),t&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){return" this.__linewidths[t]?this.__linewidths[t]:(e="" =="=this._textLines[t]?0:this.measureLine(t).width,this.__lineWidths[t]=e,e);var" e},_getwidthofcharspacing:function(){return="" 0!="=this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,i){var" r&&void="" i,r,n,s,o,a,h,c,l,u,f,d,g,p,v,m,y="this._getLeftOffset(),_=this._getTopOffset(),x=this._getWidthOfCharSpacing(),b=0,C=this._textLines.length;b<C;b++)if(i=this.getHeightOfLine(b),this[e]||this.styleHas(e,b)){h=this._textLines[b],p=i/this.lineHeight,s=this._getLineLeftOffset(b),u=0,f=0,c=this.getValueOfPropertyAt(b,0,e),m=this.getValueOfPropertyAt(b,0,"fill"),l=_+p*(1-this._fontSizeFraction),r=this.getHeightOfChar(b,0),o=this.getValueOfPropertyAt(b,0,"deltaY");for(var" s="0,w=h.length;S<w;S++)d=this.__charBounds[b][S],g=this.getValueOfPropertyAt(b,S,e),v=this.getValueOfPropertyAt(b,S,"fill"),n=this.getHeightOfChar(b,S),a=this.getValueOfPropertyAt(b,S,"deltaY"),(g!==c||v!==m||n!==r||a!==o)&&f">0?(t.fillStyle=m,c&&m&&t.fillRect(y+s+u,l+this.offsets[e]*r+o,f,this.fontSize/15),u=d.left,f=d.width,c=g,m=v,r=n,o=a):f+=d.kernedWidth;t.fillStyle=v,g&&v&&t.fillRect(y+s+u,l+this.offsets[e]*r+o,f-x,this.fontSize/15),_+=i}else _+=i;this._removeShadow(t)}},_getFontDeclaration:function(t,i){var r=t||this,n=this.fontFamily,s=e.Text.genericFonts.indexOf(n.toLowerCase())>-1,o=void 0===n||n.indexOf("'")>-1||n.indexOf(",")>-1||n.indexOf('"')>-1||s?r.fontFamily:'"'+r.fontFamily+'"';return[e.isLikelyNode?r.fontWeight:r.fontStyle,e.isLikelyNode?r.fontStyle:r.fontWeight,i?this.CACHE_FONT_SIZE+"px":r.fontSize+"px",o].join(" ")},render:function(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",t)))},_splitTextIntoLines:function(t){for(var i=t.split(this._reNewline),r=new Array(i.length),n=["\n"],s=[],o=0;o<i.length;o++)r[o]=e.util.string.graphemesplit(i[o]),s=s.concat(r[o],n);return 0="==t?this.styles:{line:this.styles[t]};for(var" s.pop(),{_unwrappedlines:r,lines:i,graphemetext:s,graphemelines:r}},toobject:function(t){var="" e="["text","fontSize","fontWeight","fontFamily","fontStyle","lineHeight","underline","overline","linethrough","textAlign","textBackgroundColor","charSpacing"].concat(t),r=this.callSuper("toObject",e);return" r.styles="i(this.styles,!0),r},set:function(t,e){this.callSuper("set",t,e);var" i="!1;if("object"===n(t))for(var" r="" in="" t)i="i||-1!==this._dimensionAffectingProps.indexOf(r);else" i&&(this.initdimensions(),this.setcoords()),this},complexity:function(){return="" 1}}),e.text.attribute_names="e.SHARED_ATTRIBUTES.concat("x" y="" dx="" dy="" font-family="" font-style="" font-weight="" font-size="" letter-spacing="" text-decoration="" text-anchor".split("="" ")),e.text.default_svg_font_size="16,e.Text.fromElement=function(t,r,n){if(!t)return" r(null);var="" s="e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES),o=s.textAnchor||"left";if((n=e.util.object.extend(n?i(n):{},s)).top=n.top||0,n.left=n.left||0,s.textDecoration){var" a="s.textDecoration;-1!==a.indexOf("underline")&&(n.underline=!0),-1!==a.indexOf("overline")&&(n.overline=!0),-1!==a.indexOf("line-through")&&(n.linethrough=!0),delete" n.textdecoration}"dx"in="" s&&(n.left+="s.dx),"dy"in" s&&(n.top+="s.dy),"fontSize"in" n||(n.fontsize="e.Text.DEFAULT_SVG_FONT_SIZE);var" h="" ;"textcontent"in="" t?h="t.textContent:"firstChild"in" t&&null!="=t.firstChild&&"data"in" t.firstchild&&null!="=t.firstChild.data&&(h=t.firstChild.data),h=h.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g,"" ");var="" c="n.strokeWidth;n.strokeWidth=0;var" l="new" e.text(h,n),u="l.getScaledHeight()/l.height,f=((l.height+l.strokeWidth)*l.lineHeight-l.height)*u,d=l.getScaledHeight()+f,g=0;"center"===o&&(g=l.getScaledWidth()/2),"right"===o&&(g=l.getScaledWidth()),l.set({left:l.left-g,top:l.top-(d-l.fontSize*(.07+l._fontSizeFraction))/l.lineHeight,strokeWidth:void" 0!="=c?c:1}),r(l)},e.Text.fromObject=function(t,i){return" e.object._fromobject("text",t,i,"text")},e.text.genericfonts="["sans-serif","serif","cursive","fantasy","monospace"],e.util.createAccessors&&e.util.createAccessors(e.Text))}("undefined"!=typeof" exports?exports:this),s.util.object.extend(s.text.prototype,{isemptystyles:function(t){if(!this.styles)return!0;if(void="" e)for(var="" e[i])for(var="" n="" e[i][r])return!1;return!0},stylehas:function(t,e){if(!this.styles||!t||""="==t)return!1;if(void" i)for(var="" i[r])if(void="" e,i,r="this.styles,n=0,s=!0,o=0;for(var" r){for(var="" c;n++,(c="r[a][h]).hasOwnProperty(t)?(i?c[t]!==i&&(s=!1):i=c[t],c[t]===this[t]&&delete" c[t]):s="!1,0!==Object.keys(c).length?e++:delete" r[a][h]}0="==e&&delete" r[a]}for(var="" e,i,r,n="this.styles;for(i" n){for(r="" e[r][t],0="==Object.keys(e[r]).length&&delete" e[r];0="==Object.keys(e).length&&delete" n[i]}}},_extendstyles:function(t,e){var="" r},getstyleatposition:function(t,e){var="" this._forceclearcache="!0,this},_getStyleDeclaration:function(t,e){var" i?i[e]:null},getcompletestyledeclaration:function(t,e){for(var="" i,r="this._getStyleDeclaration(t,e)||{},n={},s=0;s<this._styleProperties.length;s++)n[i=this._styleProperties[s]]=void" n},_setstyledeclaration:function(t,e,i){this.styles[t][e]="i},_deleteStyleDeclaration:function(t,e){delete" this.styles[t][e]},_getlinestyle:function(t){return!!this.styles[t]},_setlinestyle:function(t){this.styles[t]="{}},_deleteLineStyle:function(t){delete" this.styles[t]}}),function(){function="" t(t){t.textdecoration&&(t.textdecoration.indexof("underline")="">-1&&(t.underline=!0),t.textDecoration.indexOf("line-through")>-1&&(t.linethrough=!0),t.textDecoration.indexOf("overline")>-1&&(t.overline=!0),delete t.textDecoration)}s.IText=s.util.createClass(s.Text,s.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"#333",cursorDelay:1e3,cursorDuration:600,caching:!0,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(t,e){this.callSuper("initialize",t,e),this.initBehavior()},setSelectionStart:function(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)},_updateAndFire:function(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(t){this.clearContextTop(),this.callSuper("render",t),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(t){this.callSuper("_render",t)},clearContextTop:function(t){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this.canvas.contextTop,i=this.canvas.viewportTransform;e.save(),e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this.transform(e),this.transformMatrix&&e.transform.apply(e,this.transformMatrix),this._clearTextArea(e),t||e.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this._getCursorBoundaries(),e=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(t,e):this.renderSelection(t,e),e.restore()}},_clearTextArea:function(t){var e=this.width+4,i=this.height+4;t.clearRect(-e/2,-i/2,e,i)},_getCursorBoundaries:function(t){void 0===t&&(t=this.selectionStart);var e=this._getLeftOffset(),i=this._getTopOffset(),r=this._getCursorBoundariesOffsets(t);return{left:e,top:i,leftOffset:r.left,topOffset:r.top}},_getCursorBoundariesOffsets:function(t){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var e,i,r,n,s=0,o=0,a=this.get2DCursorLocation(t);r=a.charIndex,i=a.lineIndex;for(var h=0;h<i;h++)s+=this.getheightofline(h);e=this._getlineleftoffset(i);var c="this.__charBounds[i][r];return" c&&(o="c.left),0!==this.charSpacing&&r===this._textLines[i].length&&(o-=this._getWidthOfCharSpacing()),n={top:s,left:e+(o">0?o:0)},this.cursorOffsetCache=n,this.cursorOffsetCache},renderCursor:function(t,e){var i=this.get2DCursorLocation(),r=i.lineIndex,n=i.charIndex>0?i.charIndex-1:0,s=this.getValueOfPropertyAt(r,n,"fontSize"),o=this.scaleX*this.canvas.getZoom(),a=this.cursorWidth/o,h=t.topOffset,c=this.getValueOfPropertyAt(r,n,"deltaY");h+=(1-this._fontSizeFraction)*this.getHeightOfLine(r)/this.lineHeight-s*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(t,e),e.fillStyle=this.getValueOfPropertyAt(r,n,"fill"),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+t.leftOffset-a/2,h+t.top+c,a,s)},renderSelection:function(t,e){for(var i=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,r=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,n=-1!==this.textAlign.indexOf("justify"),s=this.get2DCursorLocation(i),o=this.get2DCursorLocation(r),a=s.lineIndex,h=o.lineIndex,c=s.charIndex<0?0:s.charindex,l=o.charindex<0?0:o.charindex,u=a;u<=h;u++){var f,d="this._getLineLeftOffset(u)||0,g=this.getHeightOfLine(u),p=0,v=0;if(u===a&&(p=this.__charBounds[a][c].left),u">=a&&u<h)v=n&&!this.isendofwrapping(u)?this.width:this.getlinewidth(u)||5;else if(u="==h)if(0===l)v=this.__charBounds[h][l].left;else{var" m="this._getWidthOfCharSpacing();v=this.__charBounds[h][l-1].left+this.__charBounds[h][l-1].width-m}f=g,(this.lineHeight<1||u===h&&this.lineHeight">1)&&(g/=this.lineHeight),this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",e.fillRect(t.left+d+p,t.top+t.topOffset+g,v-p,1)):(e.fillStyle=this.selectionColor,e.fillRect(t.left+d+p,t.top+t.topOffset,v-p,g)),t.topOffset+=f}},getCurrentCharFontSize:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")},getCurrentCharColor:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fill")},_getCurrentCharIndex:function(){var t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}}),s.IText.fromObject=function(e,i){if(t(e),e.styles)for(var r in e.styles)for(var n in e.styles[r])t(e.styles[r][n]);s.Object._fromObject("IText",e,i,"text")}}(),function(){var t=s.util.object.clone;s.util.object.extend(s.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var t=this;this.on("added",function(){var e=t.canvas;e&&(e._hasITextHandlers||(e._hasITextHandlers=!0,t._initCanvasHandlers(e)),e._iTextInstances=e._iTextInstances||[],e._iTextInstances.push(t))})},initRemovedHandler:function(){var t=this;this.on("removed",function(){var e=t.canvas;e&&(e._iTextInstances=e._iTextInstances||[],s.util.removeFromArray(e._iTextInstances,t),0===e._iTextInstances.length&&(e._hasITextHandlers=!1,t._removeCanvasHandlers(e)))})},_initCanvasHandlers:function(t){t._mouseUpITextHandler=function(){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.__isMousedown=!1})},t.on("mouse:up",t._mouseUpITextHandler)},_removeCanvasHandlers:function(t){t.off("mouse:up",t._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,i,r){var n;return n={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:i,onComplete:function(){n.isAborted||t[r]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return n.isAborted}}),n},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(t){var e=this,i=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){e._tick()},i)},abortCursorAnimation:function(){var t=this._currentTickState||this._currentTickCompleteState,e=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,t&&e&&e.clearContext(e.contextTop||e.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(t){var e=0,i=t-1;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)e++,i--;for(;/\S/.test(this._text[i])&&i>-1;)e++,i--;return t-e},findWordBoundaryRight:function(t){var e=0,i=t;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)e++,i++;for(;/\S/.test(this._text[i])&&i<this._text.length;)e++,i++;return t+e},findlineboundaryleft:function(t){for(var="" e="0,i=t-1;!/\n/.test(this._text[i])&&i">-1;)e++,i--;return t-e},findLineBoundaryRight:function(t){for(var e=0,i=t;!/\n/.test(this._text[i])&&i<this._text.length;)e++,i++;return t+e},searchwordboundary:function(t,e){for(var="" i="this._reSpace.test(this._text[t])?t-1:t,r=this._text[i],n=/[" \n\.,;!\?\-]="" ;!n.test(r)&&i="">0&&i<this._text.length;)i+=e,r=this._text[i];return n.test(r)&&"\n"!="=r&&(i+=1===e?0:1),i},selectWord:function(t){t=t||this.selectionStart;var" e="this.searchWordBoundary(t,-1),i=this.searchWordBoundary(t,1);this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(t){t=t||this.selectionStart;var" this.selectionstart="e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(t){if(!this.isEditing&&this.editable)return" this.canvas&&(this.canvas.calcoffset(),this.exiteditingonothers(this.canvas)),this.isediting="!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.selected=!1,t.isEditing&&t.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(t){if(this.__isMousedown&&this.isEditing){var">this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=e):(this.selectionStart=e,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===r||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(t,e,i){var r=i.slice(0,t),n=s.util.string.graphemeSplit(r).length;if(t===e)return{selectionStart:n,selectionEnd:n};var o=i.slice(t,e);return{selectionStart:n,selectionEnd:n+s.util.string.graphemeSplit(o).length}},fromGraphemeToStringSelection:function(t,e,i){var r=i.slice(0,t).join("").length;return t===e?{selectionStart:r,selectionEnd:r}:{selectionStart:r,selectionEnd:r+i.slice(t,e).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var t=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),i=this.get2DCursorLocation(t),r=i.lineIndex,n=i.charIndex,o=this.getValueOfPropertyAt(r,n,"fontSize")*this.lineHeight,a=e.leftOffset,h=this.calcTransformMatrix(),c={x:e.left+a,y:e.top+e.topOffset+o},l=this.canvas.upperCanvasEl,u=l.width,f=l.height,d=u-o,g=f-o,p=l.clientWidth/u,v=l.clientHeight/f;return c=s.util.transformPoint(c,h),(c=s.util.transformPoint(c,this.canvas.viewportTransform)).x*=p,c.y*=v,c.x<0&&(c.x=0),c.x>d&&(c.x=d),c.y<0&&(c.y=0),c.y>g&&(c.y=g),c.x+=this.canvas._offset.left,c.y+=this.canvas._offset.top,{left:c.x+"px",top:c.y+"px",fontSize:o+"px",charHeight:o}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,this.hiddenTextarea&&(this.hiddenTextarea.blur&&this.hiddenTextarea.blur(),this.canvas&&this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea),this.hiddenTextarea=null),this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},removeStyleFromTo:function(t,e){var i,r,n=this.get2DCursorLocation(t,!0),s=this.get2DCursorLocation(e,!0),o=n.lineIndex,a=n.charIndex,h=s.lineIndex,c=s.charIndex;if(o!==h){if(this.styles[o])for(i=a;i<this._unwrappedtextlines[o].length;i++)delete this.styles[o][i];if(this.styles[h])for(i="c;i<this._unwrappedTextLines[h].length;i++)(r=this.styles[h][i])&&(this.styles[o]||(this.styles[o]={}),this.styles[o][a+i-c]=r);for(i=o+1;i<=h;i++)delete" this.styles[i];this.shiftlinestyles(h,o-h)}else="" if(this.styles[o]){r="this.styles[o];var" l,u,f="c-a;for(i=a;i<c;i++)delete" r[i];for(u="" in="" this.styles[o])(l="parseInt(u,10))">=c&&(r[l-f]=r[u],delete r[u])}},shiftLineStyles:function(e,i){var r=t(this.styles);for(var n in this.styles){var s=parseInt(n,10);s>e&&(this.styles[s+i]=r[s],r[s-i]||delete this.styles[s])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(e,i,r,n){var s,o={},a=!1;for(var h in r||(r=1),this.shiftLineStyles(e,r),this.styles[e]&&(s=this.styles[e][0===i?i:i-1]),this.styles[e]){var c=parseInt(h,10);c>=i&&(a=!0,o[c-i]=this.styles[e][h],delete this.styles[e][h])}for(a?this.styles[e+r]=o:delete this.styles[e+r];r>1;)r--,n&&n[r]?this.styles[e+r]={0:t(n[r])}:s?this.styles[e+r]={0:t(s)}:delete this.styles[e+r];this._forceClearCache=!0},insertCharStyleObject:function(e,i,r,n){this.styles||(this.styles={});var s=this.styles[e],o=s?t(s):{};for(var a in r||(r=1),o){var h=parseInt(a,10);h>=i&&(s[h+r]=o[h],o[h-r]||delete s[h])}if(this._forceClearCache=!0,n)for(;r--;)Object.keys(n[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][i+r]=t(n[r]));else if(s)for(var c=s[i?i-1:1];c&&r--;)this.styles[e][i+r]=t(c)},insertNewStyleBlock:function(t,e,i){for(var r=this.get2DCursorLocation(e,!0),n=[0],s=0,o=0;o<t.length;o++)"\n"===t[o]?n[++s]=0:n[s]++;n[0]>0&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,n[0],i),i=i&&i.slice(n[0]+1)),s&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+n[0],s);for(o=1;o<s;o++)n[o]>0?this.insertCharStyleObject(r.lineIndex+o,0,n[o],i):i&&(this.styles[r.lineIndex+o][0]=i[0]),i=i&&i.slice(n[o]+1);n[o]>0&&this.insertCharStyleObject(r.lineIndex+o,0,n[o],i)},setSelectionStartEndWithShift:function(t,e,i){i<=t?(e===t?this._selectiondirection="left":"right"===this._selectiondirection&&(this._selectiondirection="left",this.selectionend=t),this.selectionstart=i):i>t&&i<e?"right"===this._selectiondirection?this.selectionend=i:this.selectionstart=i:(e===t?this._selectiondirection="right":"left"===this._selectiondirection&&(this._selectiondirection="right",this.selectionstart=e),this.selectionend=i)},setselectioninboundaries:function(){var t="this.text.length;this.selectionStart">t?this.selectionStart=t:this.selectionStart<0&&(this.selectionstart=0),this.selectionend>t?this.selectionEnd=t:this.selectionEnd<0&&(this.selectionend=0)}})}(),s.util.object.extend(s.itext.prototype,{initdoubleclicksimulation:function(){this.__lastclicktime=+new date,this.__lastlastclicktime="+new" date,this.__lastpointer="{},this.on("mousedown",this.onMouseDown)},onMouseDown:function(t){if(this.canvas){this.__newClickTime=+new" date;var="" e="t.pointer;this.isTripleClick(e)&&(this.fire("tripleclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(t){return" this.__newclicktime-this.__lastclicktime<500&&this.__lastclicktime-this.__lastlastclicktime<500&&this.__lastpointer.x="==t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},initClicks:function(){this.on("mousedblclick",function(t){this.selectWord(this.getSelectionStartFromPointer(t.e))}),this.on("tripleclick",function(t){this.selectLine(this.getSelectionStartFromPointer(t.e))})},_mouseDownHandler:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.__isMousedown=!0,this.selected&&this.setCursorByClick(t.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||this===this.canvas._activeObject&&(this.selected=!0)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(t){if(this.__isMousedown=!1,!(!this.editable||this.group||t.transform&&t.transform.actionPerformed||t.e.button&&1!==t.e.button)){if(this.canvas){var">0&&(s+=this._textLines[a-1].length+this.missingNewlineOffset(a-1));r=this._getLineLeftOffset(o)*this.scaleX;for(var c=0,l=this._textLines[o].length;c<l&&(i=r,(r+=this.__charbounds[o][c].kernedwidth*this.scalex)<=e.x);c++)s++;return this._getnewselectionstartfromoffset(e,i,r,s,l)},_getnewselectionstartfromoffset:function(t,e,i,r,n){var="" s="t.x-e,o=i-t.x,a=r+(o">s||o<0?0:1);return this.flipx&&(a="n-a),a">this._text.length&&(a=this._text.length),a}}),s.util.object.extend(s.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=s.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+t.top+"; left: "+t.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingｰtop: "+t.fontSize+";",s.document.body.appendChild(this.hiddenTextarea),s.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),s.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),s.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),s.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),s.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),s.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),s.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),s.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),s.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(s.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing&&!this.inCompositionMode){if(t.keyCode in this.keysMap)this[this.keysMap[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown&&(t.ctrlKey||t.metaKey)))return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.clearcontexttop(),this.rendercursororselection()):this.canvas&&this.canvas.requestrenderall()}},onkeyup:function(t){!this.isediting||this._copydone||this.incompositionmode?this._copydone=!1:t.keycode in="" this.ctrlkeysmapup&&(t.ctrlkey||t.metakey)&&(this[this.ctrlkeysmapup[t.keycode]](t),t.stopimmediatepropagation(),t.preventdefault(),this.canvas&&this.canvas.requestrenderall())},oninput:function(t){var="" e="this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),this.isEditing){var" i,r,n="this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,o=this._text.length,a=n.length,h=a-o;if(""===this.hiddenTextarea.value)return" this.styles="{},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var" c="this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),l=this.selectionStart">c.selectionStart;this.selectionStart!==this.selectionEnd?(i=this._text.slice(this.selectionStart,this.selectionEnd),h+=this.selectionEnd-this.selectionStart):a<o&&(i=l?this._text.slice(this.selectionend+h,this.selectionend):this._text.slice(this.selectionstart,this.selectionstart-h)),r=n.slice(c.selectionend-h,c.selectionend),i&&i.length&&(this.selectionstart!==this.selectionend?this.removestylefromto(this.selectionstart,this.selectionend):l?this.removestylefromto(this.selectionend-i.length,this.selectionend):this.removestylefromto(this.selectionend,this.selectionend+i.length)),r.length&&(e&&r.join("")===s.copiedtext&&!s.disablestylecopypaste?this.insertnewstyleblock(r,this.selectionstart,s.copiedtextstyle):this.insertnewstyleblock(r,this.selectionstart)),this.updatefromtextarea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestrenderall())}},oncompositionstart:function(){this.incompositionmode=!0},oncompositionend:function(){this.incompositionmode=!1},oncompositionupdate:function(t){this.compositionstart=t.target.selectionstart,this.compositionend=t.target.selectionend,this.updatetextareaposition()},copy:function(){this.selectionstart!==this.selectionend&&(s.copiedtext=this.getselectedtext(),s.disablestylecopypaste?s.copiedtextstyle=null:s.copiedtextstyle=this.getselectionstyles(this.selectionstart,this.selectionend,!0),this._copydone=!0)},paste:function(){this.frompaste=!0},_getclipboarddata:function(t){return t&&t.clipboarddata||s.window.clipboarddata},_getwidthbeforecursor:function(t,e){var="" i,r="this._getLineLeftOffset(t);return" e="">0&&(r+=(i=this.__charBounds[t][e-1]).left+i.width),r},getDownCursorOffset:function(t,e){var i=this._getSelectionForOffset(t,e),r=this.get2DCursorLocation(i),n=r.lineIndex;if(n===this._textLines.length-1||t.metaKey||34===t.keyCode)return this._text.length-i;var s=r.charIndex,o=this._getWidthBeforeCursor(n,s),a=this._getIndexOnLine(n+1,o);return this._textLines[n].slice(s).length+a+1+this.missingNewlineOffset(n)},_getSelectionForOffset:function(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(t,e){var i=this._getSelectionForOffset(t,e),r=this.get2DCursorLocation(i),n=r.lineIndex;if(0===n||t.metaKey||33===t.keyCode)return-i;var s=r.charIndex,o=this._getWidthBeforeCursor(n,s),a=this._getIndexOnLine(n-1,o),h=this._textLines[n].slice(0,s),c=this.missingNewlineOffset(n-1);return-this._textLines[n-1].length+a-h.length+(1-c)},_getIndexOnLine:function(t,e){for(var i,r,n=this._textLines[t],s=this._getLineLeftOffset(t),o=0,a=0,h=n.length;a<h;a++)if((s+=i=this.__charbounds[t][a].width)>e){r=!0;var c=s-i,l=s,u=Math.abs(c-e);o=Math.abs(l-e)<u?a:a-1;break}return r||(o="n.length-1),o},moveCursorDown:function(t){this.selectionStart">=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)},moveCursorUp:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",t)},_moveCursorUpOrDown:function(t,e){var i=this["get"+t+"CursorOffset"](e,"right"===this._selectionDirection);e.shiftKey?this.moveCursorWithShift(i):this.moveCursorWithoutShift(i),0!==i&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(t){var e="left"===this._selectionDirection?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),0!==t},moveCursorWithoutShift:function(t){return t<0?(this.selectionstart+=t,this.selectionend=this.selectionstart):(this.selectionend+=t,this.selectionstart=this.selectionend),0!==t},movecursorleft:function(t){0===this.selectionstart&&0===this.selectionend||this._movecursorleftorright("left",t)},_move:function(t,e,i){var r;if(t.altkey)r="this["findWordBoundary"+i](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return" this[e]+="Left" =="=i?-1:1,!0;r=this["findLineBoundary"+i](this[e])}if(void" 0!="=n(r)&&this[e]!==r)return" this[e]="r,!0},_moveLeft:function(t,e){return" this._move(t,e,"left")},_moveright:function(t,e){return="" this._move(t,e,"right")},movecursorleftwithoutshift:function(t){var="" e="!0;return" this._selectiondirection="left" ,this.selectionend="==this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e},moveCursorLeftWithShift:function(t){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(t,"selectionStart")):void" 0},movecursorright:function(t){this.selectionstart="">=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)},_moveCursorLeftOrRight:function(t,e){var i="moveCursor"+t+"With";this._currentCursorOpacity=1,e.shiftKey?i+="Shift":i+="outShift",this[i](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(t){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(t,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(t){var e=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e},removeChars:function(t,e){void 0===e&&(e=t+1),this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(t,e,i,r){void 0===r&&(r=i),r>i&&this.removeStyleFromTo(i,r);var n=s.util.string.graphemeSplit(t);this.insertNewStyleBlock(n,i,e),this._text=[].concat(this._text.slice(0,i),n,this._text.slice(r)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var t=s.util.toFixed,e=/  +/g;s.util.object.extend(s.Text.prototype,{_toSVG:function(){var t=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(e)},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(t){var e=this.getSvgTextDecoration(this);return[t.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontfamily?'font-family="'+this.fontFamily.replace(/" g,"'")+'"="" ':"",this.fontsize?'font-size="'+this.fontSize+'" ':"",this.fontstyle?'font-style="'+this.fontStyle+'" ':"",this.fontweight?'font-weight="'+this.fontWeight+'" ':"",e?'text-decoration="'+e+'" ':"",'style="',this.getSvgStyles(!0),'" ',this.addpaintorder(),"="">",t.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(t,e){var i,r=[],n=[],s=t;this._setSVGBg(n);for(var o=0,a=this._textLines.length;o<a;o++)i=this._getlineleftoffset(o),(this.textbackgroundcolor||this.stylehas("textbackgroundcolor",o))&&this._setsvgtextlinebg(n,o,e+i,s),this._setsvgtextlinetext(r,o,e+i,s),s+=this.getheightofline(o);return{textspans:r,textbgrects:n}},_createtextcharspan:function(i,r,n,o){var a="i!==i.trim()||i.match(e),h=this.getSvgSpanStyles(r,a),c=h?'style="'+h+'"':"",l=r.deltaY,u="",f=s.Object.NUM_FRACTION_DIGITS;return" l&&(u=" dy="" +t(l,f)+'"="" '),['<tspan="" x="',t(n,f),'" y="',t(o,f),'" ',u,c,"="">",s.util.string.escapeXml(i),""].join("")},_setSVGTextLineText:function(t,e,i,r){var n,s,o,a,h,c=this.getHeightOfLine(e),l=-1!==this.textAlign.indexOf("justify"),u="",f=0,d=this._textLines[e];r+=c*(1-this._fontSizeFraction)/this.lineHeight;for(var g=0,p=d.length-1;g<=p;g++)h=g===p||this.charspacing,u+=d[g],o=this.__charbounds[e][g],0===f?(i+=o.kernedwidth-o.width,f+=o.width):f+=o.kernedwidth,l&&!h&&this._respaceandtab.test(d[g])&&(h=!0),h||(n=n||this.getcompletestyledeclaration(e,g),s=this.getcompletestyledeclaration(e,g+1),h=this._hasstylechangedforsvg(n,s)),h&&(a=this._getstyledeclaration(e,g)||{},t.push(this._createtextcharspan(u,a,i,r)),u="",n=s,i+=f,f=0)},_pushtextbgrect:function(e,i,r,n,o,a){var h="s.Object.NUM_FRACTION_DIGITS;e.push("\t\t<rect" ",this._getfillattributes(i),'="" x="',t(r,h),'" y="',t(n,h),'" width="',t(o,h),'" height="',t(a,h),'"/></a;o++)i=this._getlineleftoffset(o),(this.textbackgroundcolor||this.stylehas("textbackgroundcolor",o))&&this._setsvgtextlinebg(n,o,e+i,s),this._setsvgtextlinetext(r,o,e+i,s),s+=this.getheightofline(o);return{textspans:r,textbgrects:n}},_createtextcharspan:function(i,r,n,o){var></0?(this.selectionstart+=t,this.selectionend=this.selectionstart):(this.selectionend+=t,this.selectionstart=this.selectionend),0!==t},movecursorleft:function(t){0===this.selectionstart&&0===this.selectionend||this._movecursorleftorright("left",t)},_move:function(t,e,i){var></u?a:a-1;break}return></h;a++)if((s+=i=this.__charbounds[t][a].width)></o&&(i=l?this._text.slice(this.selectionend+h,this.selectionend):this._text.slice(this.selectionstart,this.selectionstart-h)),r=n.slice(c.selectionend-h,c.selectionend),i&&i.length&&(this.selectionstart!==this.selectionend?this.removestylefromto(this.selectionstart,this.selectionend):l?this.removestylefromto(this.selectionend-i.length,this.selectionend):this.removestylefromto(this.selectionend,this.selectionend+i.length)),r.length&&(e&&r.join("")===s.copiedtext&&!s.disablestylecopypaste?this.insertnewstyleblock(r,this.selectionstart,s.copiedtextstyle):this.insertnewstyleblock(r,this.selectionstart)),this.updatefromtextarea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestrenderall())}},oncompositionstart:function(){this.incompositionmode=!0},oncompositionend:function(){this.incompositionmode=!1},oncompositionupdate:function(t){this.compositionstart=t.target.selectionstart,this.compositionend=t.target.selectionend,this.updatetextareaposition()},copy:function(){this.selectionstart!==this.selectionend&&(s.copiedtext=this.getselectedtext(),s.disablestylecopypaste?s.copiedtextstyle=null:s.copiedtextstyle=this.getselectionstyles(this.selectionstart,this.selectionend,!0),this._copydone=!0)},paste:function(){this.frompaste=!0},_getclipboarddata:function(t){return></=40?(this.clearcontexttop(),this.rendercursororselection()):this.canvas&&this.canvas.requestrenderall()}},onkeyup:function(t){!this.isediting||this._copydone||this.incompositionmode?this._copydone=!1:t.keycode></0?0:1);return></l&&(i=r,(r+=this.__charbounds[o][c].kernedwidth*this.scalex)<=e.x);c++)s++;return></0&&(this.selectionend=0)}})}(),s.util.object.extend(s.itext.prototype,{initdoubleclicksimulation:function(){this.__lastclicktime=+new></0&&(this.selectionstart=0),this.selectionend></e?"right"===this._selectiondirection?this.selectionend=i:this.selectionstart=i:(e===t?this._selectiondirection="right":"left"===this._selectiondirection&&(this._selectiondirection="right",this.selectionstart=e),this.selectionend=i)},setselectioninboundaries:function(){var></=t?(e===t?this._selectiondirection="left":"right"===this._selectiondirection&&(this._selectiondirection="left",this.selectionend=t),this.selectionstart=i):i></s;o++)n[o]></t.length;o++)"\n"===t[o]?n[++s]=0:n[s]++;n[0]></this._unwrappedtextlines[o].length;i++)delete></0&&(c.y=0),c.y></0&&(c.x=0),c.x></this._text.length;)i+=e,r=this._text[i];return></this._text.length;)e++,i++;return></this._text.length;)e++,i++;return></h)v=n&&!this.isendofwrapping(u)?this.width:this.getlinewidth(u)||5;else></0?0:s.charindex,l=o.charindex<0?0:o.charindex,u=a;u<=h;u++){var></i;h++)s+=this.getheightofline(h);e=this._getlineleftoffset(i);var></i.length;o++)r[o]=e.util.string.graphemesplit(i[o]),s=s.concat(r[o],n);return></n;r++)i=math.max(this.getheightofchar(t,r),i);return></g;d++)if(e=this.getheightofline(d),this.textbackgroundcolor||this.stylehas("textbackgroundcolor",d)){r=this._textlines[d],i=this._getlineleftoffset(d),f=0,u=0,n=this.getvalueofpropertyat(d,0,"textbackgroundcolor");for(var></i;e++){var></1&&(e=this.aspectratio),t=e*this.blur*.12,this.horizontal?i[0]=t:i[1]=t,i}}),i.blur.fromobject=e.image.filters.basefilter.fromobject}("undefined"!=typeof></255&&(_=_*d[j+3]></-1||(_=2*a*a*a-3*a*a+1)></a?t(h):u}(0)},bilinearfiltering:function(t,e,i,n,s){var></=c.y+_;f++)f<0||f></1.5*i||a.height<n)&&(a.width=1.5*i,a.height=n),(h=a.getcontext("2d")).clearrect(0,0,1.5*i,n),h.putimagedata(c,0,0),s=r(s),o=r(o);!l||!u;)i=f,n=d,s<r(.5*f)?f=r(.5*f):(f=s,l=!0),o<r(.5*d)?d=r(.5*d):(d=o,u=!0),h.drawimage(a,p,v,i,n,m,y,f,d),p=m,v=y,y+=d;return></=-t)return></l;f+=4)switch(s=c[f],o=c[f+1],a=c[f+2],this.mode){case"multiply":c[f]=s*i></l[0]&&n<l[1]&&s<l[2]&&(o[i+3]=0)},getuniformlocations:function(t,e){return{ulow:t.getuniformlocation(e,"ulow"),uhigh:t.getuniformlocation(e,"uhigh")}},senduniformdata:function(t,i){var></n;e+=4)"average"===s?i=(r[e]+r[e+1]+r[e+2])></0||o></a;s+=4)e=o[s],i=o[s+1],r=o[s+2],c?(o[s]=e*h[0]+i*h[1]+r*h[2]+255*h[4],o[s+1]=e*h[5]+i*h[6]+r*h[7]+255*h[9],o[s+2]=e*h[10]+i*h[11]+r*h[12]+255*h[14]):(n=o[s+3],o[s]=e*h[0]+i*h[1]+r*h[2]+n*h[3]+255*h[4],o[s+1]=e*h[5]+i*h[6]+r*h[7]+n*h[8]+255*h[9],o[s+2]=e*h[10]+i*h[11]+r*h[12]+n*h[13]+255*h[14],o[s+3]=e*h[15]+i*h[16]+r*h[17]+n*h[18]+255*h[19])},getuniformlocations:function(t,e){return{ucolormatrix:t.getuniformlocation(e,"ucolormatrix"),uconstants:t.getuniformlocation(e,"uconstants")}},senduniformdata:function(t,e){var></3;a++)if(t(r,o[a])){s.webglprecision=o[a];break}}return></fabric.image:></rect>\n')},_setSVGTextLineBg:function(t,e,i,r){for(var n,s,o=this._textLines[e],a=this.getHeightOfLine(e)/this.lineHeight,h=0,c=0,l=this.getValueOfPropertyAt(e,0,"textBackgroundColor"),u=0,f=o.length;u<f;u++)n=this.__charbounds[e][u],(s=this.getvalueofpropertyat(e,u,"textbackgroundcolor"))!==l?(l&&this._pushtextbgrect(t,l,i+c,r,h,a),c=n.left,h=n.width,l=s):h+=n.kernedwidth;s&&this._pushtextbgrect(t,s,i+c,r,h,a)},_getfillattributes:function(t){var e="t&&"string"==typeof" t?new="" s.color(t):"";return="" e&&e.getsource()&&1!="=e.getAlpha()?'opacity="'+e.getAlpha()+'"" fill="'+e.setAlpha(1).toRgb()+'" ':'fill="'+t+'" '},_getsvglinetopoffset:function(t){for(var="" e,i="0,r=0;r<t;r++)i+=this.getHeightOfLine(r);return" s.object.prototype.getsvgstyles.call(this,t)+"="" white-space:="" pre;"}})}(),function(t){"use="" strict";var="" \t\r]="" ,splitbygrapheme:!1,initdimensions:function(){this.__skipdimension||(this.isediting&&this.initdelayedcursor(),this.clearcontexttop(),this._clearcache(),this.dynamicminwidth="0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth">this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(t){for(var e=0,i=0,r=0,n={},s=0;s<t.graphemelines.length;s++)"\n"===t.graphemetext[r]&&s>0?(i=0,r++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[r])&&s>0&&(i++,r++),n[s]={line:e,offset:i},r+=t.graphemeLines[s].length,i+=t.graphemeLines[s].length;return n},styleHas:function(t,i){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[i];r&&(i=r.line)}return e.Text.prototype.styleHas.call(this,t,i)},isEmptyStyles:function(t){var e,i,r=0,n=!1,s=this._styleMap[t],o=this._styleMap[t+1];for(var a in s&&(t=s.line,r=s.offset),o&&(n=o.line===t,e=o.offset),i=void 0===t?this.styles:{line:this.styles[t]})for(var h in i[a])if(h>=r&&(!n||h<e))for(var c="" in="" i[a][h])return!1;return!0},_getstyledeclaration:function(t,e){if(this._stylemap&&!this.iswrapping){var="" i="this._styleMap[t];if(!i)return" null;t="i.line,e=i.offset+e}return" this.callsuper("_getstyledeclaration",t,e)},_setstyledeclaration:function(t,e,i){var="" r="this._styleMap[t];t=r.line,e=r.offset+e,this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){var" this.styles[t][e]},_getlinestyle:function(t){var="" e="this._styleMap[t];return!!this.styles[e.line]},_setLineStyle:function(t){var" i,r="[];for(this.isWrapping=!0,i=0;i<t.length;i++)r=r.concat(this._wrapLine(t[i],i,e));return" this.iswrapping="!1,r},_measureWord:function(t,e,i){var" r,n="0;i=i||0;for(var" s="0,o=t.length;s<o;s++){n+=this._getGraphemeBox(t[s],e,s+i,r,!0).kernedWidth,r=t[s]}return" n},_wrapline:function(t,i,r,n){var="" ",d="0,g=0,p=0,v=!0,m=o?0:this._getWidthOfCharSpacing();n=n||0;0===c.length&&c.push([]),r-=n;for(var" y="0;y<c.length;y++)l=o?c[y]:e.util.string.graphemeSplit(c[y]),d=this._measureWord(l,i,u),u+=l.length,(s+=g+d-m)">=r&&!v?(a.push(h),h=[],s=d,v=!0):s+=m,v||o||h.push(f),h=h.concat(l),g=this._measureWord([f],i,u),u++,v=!1,d>p&&(p=d);return y&&a.push(h),p+n>this.dynamicMinWidth&&(this.dynamicMinWidth=p-m+n),a},isEndOfWrapping:function(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line},missingNewlineOffset:function(t){return this.splitByGrapheme?this.isEndOfWrapping(t)?1:0:1},_splitTextIntoLines:function(t){for(var i=e.Text.prototype._splitTextIntoLines.call(this,t),r=this._wrapText(i.lines,this.width),n=new Array(r.length),s=0;s<r.length;s++)n[s]=r[s].join("");return 0="==r&&(r={}),r.on=function(e,n){return" 1="==i.length?i[0]:i;return" i.lines="n,i.graphemeLines=r,i},getMinWidth:function(){return" math.max(this.minwidth,this.dynamicminwidth)},_removeextraneousstyles:function(){var="" t="{};for(var" e="" in="" this._stylemap)this._textlines[e]&&(t[this._stylemap[e].line]="1);for(var" this.styles)t[e]||delete="" this.styles[e]},toobject:function(t){return="" this.callsuper("toobject",["minwidth","splitbygrapheme"].concat(t))}}),e.textbox.fromobject="function(t,i){return" e.object._fromobject("textbox",t,i,"text")}}("undefined"!="typeof" exports?exports:this);="" },{"jsdom":"ebpe","jsdom="" lib="" jsdom="" living="" generated="" utils":"ebpe","jsdom="" utils":"ebpe","buffer":"dskh","process":"pbgv"}],"xdlx":[function(require,module,exports)="" {="" module.exports="function(r,e){return" array.prototype.slice.call(r,e)};="" },{}],"htwd":[function(require,module,exports)="" var="" e,t="function" =="typeof" setimmediate;e="t?function(e){setImmediate(e)}:function(e){setTimeout(e,0)},module.exports=e;" },{}],"15zk":[function(require,module,exports)="" "use="" strict";var="" },{"ticky":"htwd"}],"p7q2":[function(require,module,exports)="" o="t||{},i={};return" void="" i[e]?i[e].push(n):i[e]="[n],r},r.once=function(e,n){return" n._once="!0,r.on(e,n),r},r.off=function(e,n){var" i[e];else="" if(0="==t)i={};else{var" r;o.splice(o.indexof(n),1)}return="" r},r.emit="function(){var" n="e(arguments);return" r.emittersnapshot(n.shift()).apply(this,n)},r.emittersnapshot="function(t){var" u="(i[t]||[]).slice(0);return" function(){var="" i="e(arguments),f=this||r;if("error"===t&&!1!==o.throws&&!u.length)throw" u.foreach(function(e){o.async?n(e,i,f):e.apply(f,i),e._once&&r.off(t,e)}),r}},r};="" },{"atoa":"xdlx",".="" debounce":"15zk"}],"4evj":[function(require,module,exports)="" global="arguments[3];" n(){try{var="" t("cat",{detail:{foo:"bar"}});return"cat"="==e.type&&"bar"===e.detail.foo}catch(n){}return!1}module.exports=n()?t:"function"==typeof" document.createevent?function(e,t){var="" t?n.initcustomevent(e,t.bubbles,t.cancelable,t.detail):n.initcustomevent(e,!1,!1,void="" 0),n}:function(e,t){var="" n.type="e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void" 0),n};="" },{}],"2hh3":[function(require,module,exports)="" e)r.test(o)&&s.push(o.slice(2));module.exports="s;" },{}],"aq6w":[function(require,module,exports)="" c(e,t,n,r){return="" e.addeventlistener(t,n,r)}function="" o(e,t,n){return="" e.attachevent("on"+t,d(e,t,n))}function="" v(e,t,n,r){return="" e.removeeventlistener(t,n,r)}function="" f(e,t,n){var="" r="l(e,t,n);if(r)return" e.detachevent("on"+t,r)}function="" p(e,a,i){var="" t(a,{detail:i}):function(){var="" e;r.createevent?(e="r.createEvent("Event")).initEvent(a,!0,!0):r.createEventObject&&(e=r.createEventObject());return" e}();e.dispatchevent?e.dispatchevent(u):e.fireevent("on"+a,u)}function="" e(t,n,r){return="" function(n){var="" a="n||e.event;a.target=a.target||a.srcElement,a.preventDefault=a.preventDefault||function(){a.returnValue=!1},a.stopPropagation=a.stopPropagation||function(){a.cancelBubble=!0},a.which=a.which||a.keyCode,r.call(t,a)}}function" d(e,t,n){var="" u.push({wrapper:r,element:e,type:t,fn:n}),r}function="" l(e,t,n){var="" u.splice(r,1),a}}function="" s(e,t,n){var="" r,a;for(r="0;r<u.length;r++)if((a=u[r]).element===e&&a.type===t&&a.fn===n)return" r}e.addeventlistener||(a="o,i=f),module.exports={add:a,remove:i,fabricate:p};" },{"custom-event":"4evj",".="" eventmap":"2hh3"}],"c4+k":[function(require,module,exports)="" s="{},a="(?:^|\\s)",e="(?:\\s|$)";function" t(t){var="" c="s[t];return" c?c.lastindex="0:s[t]=c=new" regexp(a+t+e,"g"),c}function="" c(s,a){var="" "+a):s.classname="a}function" n(s,a){s.classname="s.className.replace(t(a),"" ").trim()}module.exports="{add:c,rm:n};" },{}],"foq9":[function(require,module,exports)="" u(e,u){var="" d,s,c,b,w,x,n,o,x,e,y;1="==arguments.length&&!1===Array.isArray(e)&&(u=e,e=[]);var" p,b="null,M=u||{};void" a(e){return-1!="=R.containers.indexOf(e)||M.isContainer(e)}function" d(e){var="" i(e){c(i,e?"remove":"add","mousemove",l)}function="" q(e){var="" f(e){p&&e.preventdefault()}function="" k(e){if(x="e.clientX,N=e.clientY,!(1!==a(e)||e.metaKey||e.ctrlKey)){var" l(e){if(p)if(0!="=a(e)){if(void" v="l(C);b=T("pageX",e)-v.left,w=T("pageY",e)-v.top,r.add(E||C,"gu-transit"),function(){if(d)return;var" j({})}function="" u(e){if(!(r.dragging&&d||a(e))){for(var="" k(e){var="" n,t;n="e.item,t=e.source,("boolean"==typeof" m.copy?m.copy:m.copy(n,t))&&(e="e.item.cloneNode(!0),R.emit("cloned",E,e.item,"copy")),S=e.source,C=e.item,O=X=y(e.item),R.dragging=!0,R.emit("drag",C,S)}function" z(){if(r.dragging){var="" h(){p="!1,I(!0),q(!0)}function" j(e){if(h(),r.dragging){var="" g(e,n){var="" j(){if(r.dragging){var="" q(e){if(r.dragging){var="">0?e:M.revertOnSpill,t=E||C,r=p(t),o=W(r);!1===o&&n&&(E?r&&r.removeChild(E):S.insertBefore(t,O)),o||n?R.emit("cancel",t,S,S):R.emit("drop",t,r,S,X),V()}}function V(){var e=E||C;H(),d&&(r.rm(M.mirrorContainer,"gu-unselectable"),c(i,"remove","mousemove",$),p(d).removeChild(d),d=null),e&&r.rm(e,"gu-transit"),Y&&clearTimeout(Y),R.dragging=!1,B&&R.emit("out",e,B,S),R.emit("dragend",e),S=C=E=O=X=Y=B=null}function W(e,n){var t;return t=void 0!==n?n:d?X:y(E||C),e===S&&t===O}function Z(e,n,t){for(var r=e;r&&!o();)r=p(r);return r;function o(){if(!1===A(r))return!1;var o=_(r,e),i=ee(r,o,n,t);return!!W(r,i)||M.accepts(C,r,S,i)}}function $(e){if(d){e.preventDefault();var n=T("clientX",e),t=T("clientY",e),r=n-b,o=t-w;d.style.left=r+"px",d.style.top=o+"px";var i=E||C,u=v(d,n,t),c=Z(u,n,t),a=null!==c&&c!==B;(a||null===c)&&(B&&s("out"),B=c,a&&s("over"));var l=p(i);if(c!==S||!E||M.copySortSource){var f,m=_(c,u);if(null!==m)f=ee(c,m,n,t);else{if(!0!==M.revertOnSpill||E)return void(E&&l&&l.removeChild(i));f=O,c=S}(null===f&&a||f!==i&&f!==y(i))&&(X=f,c.insertBefore(i,f),R.emit("shadow",i,c,S))}else l&&l.removeChild(i)}function s(e){R.emit(e,i,B,S)}}function _(e,n){for(var t=n;t!==e&&p(t)!==e;)t=p(t);return t===i?null:t}function ee(e,n,t,r){var o="horizontal"===M.direction;return n!==e?function(){var e=n.getBoundingClientRect();if(o)return i(t>e.left+s(e)/2);return i(r>e.top+g(e)/2)}():function(){var n,i,u,c=e.children.length;for(n=0;n<c;n++){if(i=e.children[n],u=i.getboundingclientrect(),o&&u.left+u.width 2="">t)return i;if(!o&&u.top+u.height/2>r)return i}return null}();function i(e){return e?y(n):n}}}function c(n,r,o,i){e.navigator.pointerEnabled?t[r](n,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[o],i):e.navigator.msPointerEnabled?t[r](n,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[o],i):(t[r](n,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[o],i),t[r](n,o,i))}function a(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var n=e.button;return void 0!==n?1&n?1:2&n?3:4&n?2:0:void 0}function l(e){var n=e.getBoundingClientRect();return{left:n.left+d("scrollLeft","pageXOffset"),top:n.top+d("scrollTop","pageYOffset")}}function d(n,t){return void 0!==e[t]?e[t]:i.clientHeight?i[n]:o.body[n]}function v(e,n,t){var r,i=e||{},u=i.className;return i.className+=" gu-hide",r=o.elementFromPoint(n,t),i.className=u,r}function f(){return!1}function m(){return!0}function s(e){return e.width||e.right-e.left}function g(e){return e.height||e.bottom-e.top}function p(e){return e.parentNode===o?null:e.parentNode}function h(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||S(e)}function S(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||S(p(e))))}function y(e){return e.nextElementSibling||function(){var n=e;do{n=n.nextSibling}while(n&&1!==n.nodeType);return n}()}function C(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function T(e,n){var t=C(n),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in t)&&r[e]in t&&(e=r[e]),t[e]}module.exports=u;
},{"contra/emitter":"p7q2","crossvent":"AQ6w","./classes":"c4+K"}],"juYr":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var define;
var e,t=arguments[3],n=require("process");!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(t,n){"use strict";var r=[],i=t.document,o=Object.getPrototypeOf,a=r.slice,s=r.concat,u=r.push,l=r.indexOf,c={},f=c.toString,p=c.hasOwnProperty,d=p.toString,h=d.call(Object),g={},v=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},y=function(e){return null!=e&&e===e.window},m={type:!0,src:!0,nonce:!0,noModule:!0};function x(e,t,n){var r,o,a=(n=n||i).createElement("script");if(a.text=e,t)for(r in m)(o=t[r]||t.getAttribute&&t.getAttribute(r))&&a.setAttribute(r,o);n.head.appendChild(a).parentNode.removeChild(a)}function b(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[f.call(e)]||"object":typeof e}var w=function(e,t){return new w.fn.init(e,t)},T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function C(e){var t=!!e&&"length"in e&&e.length,n=b(e);return!v(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}w.fn=w.prototype={jquery:"3.4.1",constructor:w,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushstack:function(e){var t="w.merge(this.constructor(),e);return" t.prevobject="this,t},each:function(e){return" w.each(this,e)},map:function(e){return="" this.pushstack(w.map(this,function(t,n){return="" e.call(t,n,t)}))},slice:function(){return="" this.pushstack(a.apply(this,arguments))},first:function(){return="" this.eq(0)},last:function(){return="" this.eq(-1)},eq:function(e){var="" this.pushstack(n="">=0&&n<t?[this[n]]:[])},end:function(){return this.prevobject||this.constructor()},push:u,sort:r.sort,splice:r.splice},w.extend="w.fn.extend=function(){var" e,t,n,r,i,o,a="arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof" a&&(l="a,a=arguments[s]||{},s++),"object"==typeof" a||v(a)||(a="{}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t" in="" e)r="e[t],"__proto__"!==t&&a!==r&&(l&&r&&(w.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||w.isPlainObject(n)?n:{},i=!1,a[t]=w.extend(l,o,r)):void" 0!="=r&&(a[t]=r));return" a},w.extend({expando:"jquery"+("3.4.1"+math.random()).replace(="" \d="" g,""),isready:!0,error:function(e){throw="" new="" error(e)},noop:function(){},isplainobject:function(e){var="" t,n;return!(!e||"[object="" object]"!="=f.call(e))&&(!(t=o(e))||"function"==typeof(n=p.call(t,"constructor")&&t.constructor)&&d.call(n)===h)},isEmptyObject:function(e){var" t;for(t="" e)return!1;return!0},globaleval:function(e,t){x(e,{nonce:t&&t.nonce})},each:function(e,t){var="" n,r="0;if(C(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else" for(r="" e)if(!1="==t.call(e[r],r,e[r]))break;return" e},trim:function(e){return="" null="=e?"":(e+"").replace(T,"")},makeArray:function(e,t){var" n="t||[];return" null!="e&&(C(Object(e))?w.merge(n,"string"==typeof" e?[e]:e):u.call(n,e)),n},inarray:function(e,t,n){return="" e.length="i,e},grep:function(e,t,n){for(var" r="[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return" r},map:function(e,t,n){var="" r,i,o="0,a=[];if(C(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else" for(o="" e)null!="(i=t(e[o],o,n))&&a.push(i);return" s.apply([],a)},guid:1,support:g}),"function"="=typeof" symbol&&(w.fn[symbol.iterator]="r[Symbol.iterator]),w.each("Boolean" number="" string="" function="" array="" date="" regexp="" object="" error="" symbol".split("="" "),function(e,t){c["[object="" "+t+"]"]="t.toLowerCase()});var" e="function(e){var" t,n,r,i,o,a,s,u,l,c,f,p,d,h,g,v,y,m,x,b="sizzle" +1*new="" date,w="e.document,T=0,C=0,E=ue(),k=ue(),S=ue(),N=ue(),A=function(e,t){return" n;return-1},r="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped" ,m="[\\x20\\t\\r\\n\\f]" ,i="(?:\\\\.|[\\w-]|[^\0-\\xa0])+" ,w="\\[" +m+"*("+i+")(?:"+m+"*([*^$|!~]?=")"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",$=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",F=new" regexp(m+"+","g"),b="new" regexp("^"+m+"+|((?:^|[^\\\\])(?:\\\\.)*)"+m+"+$","g"),_="new" regexp("^"+m+"*,"+m+"*"),z="new" regexp("^"+m+"*([="">+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp($),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ne=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?string.fromcharcode(r+65536):string.fromcharcode(r>>10|55296,1023&r|56320)},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){p()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(j=O.call(w.childNodes),w.childNodes),j[w.childNodes.length].nodeType}catch(ke){H={apply:j.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(e,t,r,i){var o,s,l,c,f,h,y,m=t&&t.ownerDocument,T=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==T&&9!==T&&11!==T)return r;if(!i&&((t?t.ownerDocument||t:w)!==d&&p(t),t=t||d,g)){if(11!==T&&(f=Z.exec(e)))if(o=f[1]){if(9===T){if(!(l=t.getElementById(o)))return r;if(l.id===o)return r.push(l),r}else if(m&&(l=m.getElementById(o))&&x(t,l)&&l.id===o)return r.push(l),r}else{if(f[2])return H.apply(r,t.getElementsByTagName(e)),r;if((o=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return H.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!N[e+" "]&&(!v||!v.test(e))&&(1!==T||"object"!==t.nodeName.toLowerCase())){if(y=e,m=t,1===T&&U.test(e)){for((c=t.getAttribute("id"))?c=c.replace(re,ie):t.setAttribute("id",c=b),s=(h=a(e)).length;s--;)h[s]="#"+c+" "+xe(h[s]);y=h.join(","),m=ee.test(e)&&ye(t.parentNode)||t}try{return H.apply(r,m.querySelectorAll(y)),r}catch(C){N(e,!0)}finally{c===b&&t.removeAttribute("id")}}}return u(e.replace(B,"$1"),t,r,i)}function ue(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function le(e){return e[b]=!0,e}function ce(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(ke){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ge(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ve(e){return le(function(t){return t=+t,le(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function ye(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},o=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},p=se.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!==d&&9===a.nodeType&&a.documentElement?(h=(d=a).documentElement,g=!o(d),w!==d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",oe,!1):i.attachEvent&&i.attachEvent("onunload",oe)),n.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ce(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=K.test(d.getElementsByClassName),n.getById=ce(function(e){return h.appendChild(e).id=b,!d.getElementsByName||!d.getElementsByName(b).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},y=[],v=[],(n.qsa=K.test(d.querySelectorAll))&&(ce(function(e){h.appendChild(e).innerHTML="<a id=""+b+""/><select id=""+b+"-\r\\" msallowcapture=""><option selected/></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+b+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||v.push(".#.+[+~]")}),ce(function(e){e.innerHTML="<a href="" disabled="disabled"/><select disabled="disabled"><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(n.matchesSelector=K.test(m=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ce(function(e){n.disconnectedMatch=m.call(e,"*"),m.call(e,"[s!='']:x"),y.push("!=",$)}),v=v.length&&new RegExp(v.join("|")),y=y.length&&new RegExp(y.join("|")),t=K.test(h.compareDocumentPosition),x=t||K.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===d||e.ownerDocument===w&&x(w,e)?-1:t===d||t.ownerDocument===w&&x(w,t)?1:c?P(c,e)-P(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===d?-1:t===d?1:i?-1:o?1:c?P(c,e)-P(c,t):0;if(i===o)return pe(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?pe(a[r],s[r]):a[r]===w?-1:s[r]===w?1:0},d):d},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&p(e),n.matchesSelector&&g&&!N[t+" "]&&(!y||!y.test(t))&&(!v||!v.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(ke){N(t,!0)}return se(t,d,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!==d&&p(e),x(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==d&&p(e);var i=r.attrHandle[t.toLowerCase()],o=i&&D.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],i=0,o=0;if(f=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(A),f){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return c=null,e},i=se.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&E(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=se.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(F," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==a?"nextSibling":"previousSibling",v=t.parentNode,y=s&&t.nodeName.toLowerCase(),m=!u&&!s,x=!1;if(v){if(o){for(;g;){for(p=t;p=p[g];)if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?v.firstChild:v.lastChild],a&&m){for(x=(d=(l=(c=(f=(p=v)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1])&&l[2],p=d&&v.childNodes[d];p=++d&&p&&p[g]||(x=d=0)||h.pop();)if(1===p.nodeType&&++x&&p===t){c[e]=[T,d,x];break}}else if(m&&(x=d=(l=(c=(f=(p=t)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1]),!1===x)for(;(p=++d&&p&&p[g]||(x=d=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++x||(m&&((c=(f=p[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]=[T,x]),p!==t)););return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,n){for(var r,o=i(e,t),a=o.length;a--;)e[r=P(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:le(function(e){var t=[],n=[],r=s(e.replace(B,"$1"));return r[b]?le(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:le(function(e){return function(t){return se(e,t).length>0}}),contains:le(function(e){return e=e.replace(te,ne),function(t){return(t.textContent||i(t)).indexOf(e)>-1}}),lang:le(function(e){return V.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return j.test(e.nodename)},input:function(e){return="" q.test(e.nodename)},button:function(e){var="" t="e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var" t;return"input"="==e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var" n="0;n<t;n+=2)e.push(n);return" e}),odd:ve(function(e,t){for(var="" e}),lt:ve(function(e,t,n){for(var="" r="n<0?n+t:n">t?t:n;--r>=0;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth="r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=de(t);for(t" in{submit:!0,reset:!0})r.pseudos[t]="he(t);function" me(){}function="" xe(e){for(var="" t="0,n=e.length,r="";t<n;t++)r+=e[t].value;return" r}function="" be(e,t,n){var="" r="t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=C++;return" t.first?function(t,n,i){for(;t="t[r];)if(1===t.nodeType||a)return" e(t,n,i);return!1}:function(t,n,u){var="" l,c,f,p="[T,s];if(u){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,u))return!0}else" for(;t="t[r];)if(1===t.nodeType||a)if(c=(f=t[b]||(t[b]={}))[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=c[o])&&l[0]===T&&l[1]===s)return" p[2]="l[2];if(c[o]=p,p[2]=e(t,n,u))return!0}return!1}}function" we(e){return="" e.length="">1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function="" ce(e,t,n,r,i,o){return="" r&&!r[b]&&(r="Ce(r)),i&&!i[b]&&(i=Ce(i,o)),le(function(o,a,s,u){var" l,c,f,p="[],d=[],h=a.length,g=o||function(e,t,n){for(var" r="0,i=t.length;r<i;r++)se(e,t[r],n);return" n}(t||"*",s.nodetype?[s]:s,[]),v="!e||!o&&t?g:Te(g,p,e,s,u),y=n?i||(o?e:h||r)?[]:a:v;if(n&&n(v,y,s,u),r)for(l=Te(y,d),r(l,[],s,u),c=l.length;c--;)(f=l[c])&&(y[d[c]]=!(v[d[c]]=f));if(o){if(i||e){if(i){for(l=[],c=y.length;c--;)(f=y[c])&&l.push(v[c]=f);i(null,y=[],l,u)}for(c=y.length;c--;)(f=y[c])&&(l=i?P(o,f):p[c])">-1&&(o[l]=!(a[l]=f))}}else y=Te(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):H.apply(a,y)})}function Ee(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,c=be(function(e){return e===t},s,!0),f=be(function(e){return P(t,e)>-1},s,!0),p=[function(e,n,r){var i=!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):f(e,n,r));return t=null,i}];u<o;u++)if(n=r.relative[e[u].type])p=[be(we(p),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[b]){for(i=++u;i<o&&!r.relative[e[i].type];i++);return ce(u="">1&&we(p),u>1&&xe(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(B,"$1"),n,u<i&&ee(e.slice(u,i)),i<o&&ee(e=e.slice(i)),i<o&&xe(e))}p.push(n)}return we(p)}return="" me.prototype="r.filters=r.pseudos,r.setFilters=new" me,a="se.tokenize=function(e,t){var" n,i,o,a,s,u,l,c="k[e+"" "];if(c)return="" t?0:c.slice(0);for(s="e,u=[],l=r.preFilter;s;){for(a" in="" n&&!(i="_.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=z.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(B,"" ")}),s="s.slice(n.length)),r.filter)!(i=G[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return" t?s.length:s?se.error(e):k(e,u).slice(0)},s="se.compile=function(e,t){var" n,i="[],o=[],s=S[e+"" "];if(!s){for(t||(t="a(e)),n=t.length;n--;)(s=Ee(t[n]))[b]?i.push(s):o.push(s);(s=S(e,function(e,t){var" n="t.length">0,i=e.length>0,o=function(o,a,s,u,c){var f,h,v,y=0,m="0",x=o&&[],b=[],w=l,C=o||i&&r.find.TAG("*",c),E=T+=null==w?1:Math.random()||.1,k=C.length;for(c&&(l=a===d||a||c);m!==k&&null!=(f=C[m]);m++){if(i&&f){for(h=0,a||f.ownerDocument===d||(p(f),s=!g);v=e[h++];)if(v(f,a||d,s)){u.push(f);break}c&&(T=E)}n&&((f=!v&&f)&&y--,o&&x.push(f))}if(y+=m,n&&m!==y){for(h=0;v=t[h++];)v(x,b,a,s);if(o){if(y>0)for(;m--;)x[m]||b[m]||(b[m]=q.call(u));b=Te(b)}H.apply(u,b),c&&!o&&b.length>0&&y+t.length>1&&se.uniqueSort(u)}return c&&(T=E,l=w),x};return n?le(o):o}(o,i))).selector=e}return s},u=se.select=function(e,t,n,i){var o,u,l,c,f,p="function"==typeof e&&e,d=!i&&a(e=p.selector||e);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===t.nodeType&&g&&r.relative[u[1].type]){if(!(t=(r.find.ID(l.matches[0].replace(te,ne),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(o=G.needsContext.test(e)?0:u.length;o--&&(l=u[o],!r.relative[c=l.type]);)if((f=r.find[c])&&(i=f(l.matches[0].replace(te,ne),ee.test(u[0].type)&&ye(t.parentNode)||t))){if(u.splice(o,1),!(e=i.length&&xe(u)))return H.apply(n,i),n;break}}return(p||s(e,d))(i,t,!g,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},n.sortStable=b.split("").sort(A).join("")===b,n.detectDuplicates=!!f,p(),n.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href="#"/>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(t);w.find=E,w.expr=E.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=E.uniqueSort,w.text=E.getText,w.isXMLDoc=E.isXML,w.contains=E.contains,w.escapeSelector=E.escape;var k=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&w(e).is(n))break;r.push(e)}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},N=w.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var D=/^<([a-z][^\ \0="">:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\ \1="">|)$/i;function j(e,t,n){return v(t)?w.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?w.grep(e,function(e){return e===t!==n}):"string"!=typeof t?w.grep(e,function(e){return l.call(t,e)>-1!==n}):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<r;t++)if(w.contains(i[t],this))return!0}));for(n=this.pushstack([]),t=0;t<r;t++)w.find(e,i[t],n);return r="">1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&N.test(e)?w(e):e||[],!1).length}});var q,L=/^(?:\s*(<[\w\w]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var r,o;if(!e)return this;if(n=n||q,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:L.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:i,!0)),D.test(r[1])&&w.isPlainObject(t))for(r in t)v(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(o=i.getElementById(r[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,q=w(i);var H=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function P(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var n,r="0,i=this.length,o=[],a="string"!=typeof" e&&w(e);if(!n.test(e))for(;r<i;r++)for(n="this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)">-1:1===n.nodeType&&w.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?w.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?l.call(w(e),this[0]):l.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,n){return k(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,n){return k(e,"nextSibling",n)},prevUntil:function(e,t,n){return k(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return void 0!==e.contentDocument?e.contentDocument:(A(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(O[e]||w.uniqueSort(i),H.test(e)&&i.reverse()),this.pushStack(i)}});var R=/[^\x20\t\r\n\f]+/g;function M(e){return e}function I(e){throw e}function W(e,t,n,r){var i;try{e&&v(i=e.promise)?i.call(e).done(t).fail(n):e&&v(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}w.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return w.each(e.match(R)||[],function(e,n){t[n]=!0}),t}(e):w.extend({},e);var t,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stoponfalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(s="o.length-1,a.push(n)),function" t(n){w.each(n,function(n,r){v(r)?e.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!="=b(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return" w.each(arguments,function(e,t){for(var="" n;(n="w.inArray(t,o,n))">-1;)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?w.inarray(e,o)="">-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},w.extend({Deferred:function(e){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(n,function(n,r){var i=v(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&v(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(e,r,i){var o=0;function a(e,n,r,i){return function(){var s=this,u=arguments,l=function(){var t,l;if(!(e<o)){if((t=r.apply(s,u))===n.promise())throw new="" typeerror("thenable="" self-resolution");l="t&&("object"==typeof" t||"function"="=typeof" t)&&t.then,v(l)?i?l.call(t,a(o,n,m,i),a(o,n,i,i)):(o++,l.call(t,a(o,n,m,i),a(o,n,i,i),a(o,n,m,n.notifywith))):(r!="=M&&(s=void" 0,u="[t]),(i||n.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(t){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(t,c.stackTrace),e+1">=o&&(r!==I&&(s=void 0,u=[t]),n.rejectWith(s,u))}};e?c():(w.Deferred.getStackHook&&(c.stackTrace=w.Deferred.getStackHook()),t.setTimeout(c))}}return w.Deferred(function(t){n[0][3].add(a(0,t,v(i)?i:M,t.notifyWith)),n[1][3].add(a(0,t,v(e)?e:M)),n[2][3].add(a(0,t,v(r)?r:I))}).promise()},promise:function(e){return null!=e?w.extend(e,i):i}},o={};return w.each(n,function(e,t){var a=t[2],s=t[5];i[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=a.call(arguments),o=w.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?a.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(w(e,o.done(s(n)).resolve,o.reject,!t),"pending"===o.state()||v(i[n]&&i[n].then)))return o.then();for(;n--;)w(i[n],s(n),o.reject);return="" o.promise()}});var="" $="/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&$.test(e.name)&&t.console.warn("jQuery.Deferred" exception:="" "+e.message,e.stack,n)},w.readyexception="function(e){t.setTimeout(function(){throw" e})};var="" f="w.Deferred();function" b(){i.removeeventlistener("domcontentloaded",b),t.removeeventlistener("load",b),w.ready()}w.fn.ready="function(e){return" f.then(e).catch(function(e){w.readyexception(e)}),this},w.extend({isready:!1,readywait:1,ready:function(e){(!0="==e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait">0||F.resolveWith(i,[w]))}}),w.ready.then=F.then,"complete"===i.readyState||"loading"!==i.readyState&&!i.documentElement.doScroll?t.setTimeout(w.ready):(i.addEventListener("DOMContentLoaded",B),t.addEventListener("load",B));var _=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===b(n))for(s in i=!0,n)_(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,v(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(w(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return 0="==t?this.cache(e):e[this.expando]&&e[this.expando][V(t)]},access:function(e,t,n){return" 1="==e.nodeType||9===e.nodeType||!+e.nodeType};function" i?e:l?t.call(e):u?t(e[0],n):o},z="/^-ms-/,U=/-([a-z])/g;function" x(e,t){return="" t.touppercase()}function="" v(e){return="" e.replace(z,"ms-").replace(u,x)}var="" g="function(e){return" y(){this.expando="w.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(e){var" t="e[this.expando];return" t||(t="{},G(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var" r,i="this.cache(e);if("string"==typeof" t)i[v(t)]="n;else" for(r="" in="" t)i[v(r)]="t[r];return" i},get:function(e,t){return="" void="" t&&void="" 0!="=n?n:t)},remove:function(e,t){var" n,r="e[this.expando];if(void" r?[t]:t.match(r)||[]).length;for(;n--;)delete="" r[t[n]]}(void="" 0:delete="" e[this.expando])}},hasdata:function(e){var="" q="new" y,j="new" y,k="/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function" ee(e,t,n){var="" r;if(void="" n="void" 0;return="" n}w.extend({hasdata:function(e){return="" j.hasdata(e)||q.hasdata(e)},data:function(e,t,n){return="" j.access(e,t,n)},removedata:function(e,t){j.remove(e,t)},_data:function(e,t,n){return="" q.access(e,t,n)},_removedata:function(e,t){q.remove(e,t)}}),w.fn.extend({data:function(e,t){var="" n,r,i,o="this[0],a=o&&o.attributes;if(void" i}return"object"="=typeof" e?this.each(function(){j.set(this,e)}):_(this,function(t){var="" n;if(o&&void="" 0;this.each(function(){j.set(this,e,t)})},null,t,arguments.length="">1,null,!0)},removeData:function(e){return this.each(function(){J.remove(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Q.get(e,t),n&&(!r||Array.isArray(n)?r=Q.access(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),o=w._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){w.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:w.Callbacks("once memory").add(function(){Q.remove(e,[t+"queue",n])})})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):void 0="==t?this:this.each(function(){var" n="w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)})},dequeue:function(e){return" this.each(function(){w.dequeue(this,e)})},clearqueue:function(e){return="" this.queue(e||"fx",[])},promise:function(e,t){var="" n,r="1,i=w.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof" e&&(t="e,e=void" 0),e="e||"fx";a--;)(n=Q.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return" s(),i.promise(t)}});var="" te="/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new" regexp("^(?:([+-])="|)("+te+")([a-z%]*)$","i"),re=["Top","Right","Bottom","Left"],ie=i.documentElement,oe=function(e){return" w.contains(e.ownerdocument,e)},ae="{composed:!0};ie.getRootNode&&(oe=function(e){return" w.contains(e.ownerdocument,e)||e.getrootnode(ae)="==e.ownerDocument});var" se="function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe(e)&&"none"===w.css(e,"display")},ue=function(e,t,n,r){var" i,o,a="{};for(o" in="" t)a[o]="e.style[o],e.style[o]=t[o];for(o" i="n.apply(e,r||[]),t)e.style[o]=a[o];return" i};function="" le(e,t,n,r){var="" r.cur()}:function(){return="" w.css(e,t,"")},u="s(),l=n&&n[3]||(w.cssNumber[t]?"":"px"),c=e.nodeType&&(w.cssNumber[t]||"px"!==l&&+u)&&ne.exec(w.css(e,t));if(c&&c[3]!==l){for(u/=2,l=l||c[3],c=+u||1;a--;)w.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,w.style(e,t,c+l),n=n||[]}return" n&&(c="+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var" ce="{};function" fe(e){var="" t,n="e.ownerDocument,r=e.nodeName,i=ce[r];return" i||(t="n.body.appendChild(n.createElement(r)),i=w.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),ce[r]=i,i)}function" pe(e,t){for(var="" n,r,i="[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=Q.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&se(r)&&(i[o]=fe(r))):"none"!==n&&(i[o]="none",Q.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return" e}w.fn.extend({show:function(){return="" pe(this,!0)},hide:function(){return="" pe(this)},toggle:function(e){return"boolean"="=typeof" e?e?this.show():this.hide():this.each(function(){se(this)?w(this).show():w(this).hide()})}});var="" de="/^(?:checkbox|radio)$/i,he=/<([a-z][^\/\0">\x20\t\r\n\f]*)/i,ge=/^$|^module$|\/(?:java|ecma)script/i,ve={option:[1,"<select multiple="multiple">","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ye(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?w.merge([e],n):n}function me(e,t){for(var n=0,r=e.length;n<r;n++)q.set(e[n],"globaleval",!t||q.get(t[n],"globaleval"))}ve.optgroup=ve.option,ve.tbody=ve.tfoot=ve.colgroup=ve.caption=ve.thead,ve.th=ve.td;var xe,be,we="/<|&#?\w+;/;function" te(e,t,n,r,i){for(var="" o,a,s,u,l,c,f="t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===b(o))w.merge(p,o.nodeType?[o]:o);else" if(we.test(o)){for(a="a||f.appendChild(t.createElement("div")),s=(he.exec(o)||["",""])[1].toLowerCase(),u=ve[s]||ve._default,a.innerHTML=u[1]+w.htmlPrefilter(o)+u[2],c=u[0];c--;)a=a.lastChild;w.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else" p.push(t.createtextnode(o));for(f.textcontent="" ,d="0;o=p[d++];)if(r&&w.inArray(o,r)">-1)i&&i.push(o);else if(l=oe(o),a=ye(f.appendChild(o),"script"),l&&me(a),n)for(c=0;o=a[c++];)ge.test(o.type||"")&&n.push(o);return f}xe=i.createDocumentFragment().appendChild(i.createElement("div")),(be=i.createElement("input")).setAttribute("type","radio"),be.setAttribute("checked","checked"),be.setAttribute("name","t"),xe.appendChild(be),g.checkClone=xe.cloneNode(!0).cloneNode(!0).lastChild.checked,xe.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!xe.cloneNode(!0).lastChild.defaultValue;var Ce=/^key/,Ee=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ke=/^([^.]*)(?:\.(.+)|)/;function Se(){return!0}function Ne(){return!1}function Ae(e,t){return e===function(){try{return i.activeElement}catch(e){}}()==("focus"===t)}function De(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)De(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ne;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return w().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=w.guid++)),e.each(function(){w.event.add(this,t,i,r,n)})}function je(e,t,n){n?(Q.set(e,t,!1),w.event.add(e,t,{namespace:!1,handler:function(e){var r,i,o=Q.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(w.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=a.call(arguments),Q.set(this,t,o),r=n(this,t),this[t](),o!==(i=Q.get(this,t))||r?Q.set(this,t,!1):i={},o!==i)return e.stopImmediatePropagation(),e.preventDefault(),i.value}else o.length&&(Q.set(this,t,{value:w.event.trigger(w.extend(o[0],w.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,t)&&w.event.add(e,t,Se)}w.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Q.get(e);if(v)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&w.find.matchesSelector(ie,i),n.guid||(n.guid=w.guid++),(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(t){return void 0!==w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(R)||[""]).length;l--;)d=g=(s=ke.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=w.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=w.event.special[d]||{},c=w.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(d,a)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),w.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Q.hasData(e)&&Q.get(e);if(v&&(u=v.events)){for(l=(t=(t||"").match(R)||[""]).length;l--;)if(d=g=(s=ke.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){for(f=w.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||w.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)w.event.remove(e,d+t[l],n,r,!0);w.isEmptyObject(u)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=w.event.fix(e),u=new Array(arguments.length),l=(Q.get(this,"events")||{})[s.type]||[],c=w.event.special[s.type]||{};for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t];if(s.delegatetarget=this,!c.predispatch||!1!==c.predispatch.call(this,s)){for(a=w.event.handlers.call(this,s,l),t=0;(i=a[t++])&&!s.ispropagationstopped();)for(s.currenttarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isimmediatepropagationstopped();)s.rnamespace&&!1!==o.namespace&&!s.rnamespace.test(o.namespace)||(s.handleobj=o,s.data=o.data,void 0!="=(r=((w.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return" c.postdispatch&&c.postdispatch.call(this,s),s.result}},handlers:function(e,t){var="" n,r,i,o,a,s="[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&e.button">=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0="==a[i=(r=t[n]).selector+"" "]&&(a[i]="r.needsContext?w(i,this).index(l)">-1:w.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addprop:function(e,t){object.defineproperty(w.event.prototype,e,{enumerable:!0,configurable:!0,get:v(t)?function(){if(this.originalevent)return 0="==e.defaultPrevented&&!1===e.returnValue?Se:Ne,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:Ne,isPropagationStopped:Ne,isImmediatePropagationStopped:Ne,isSimulated:!1,preventDefault:function(){var" t(this.originalevent)}:function(){if(this.originalevent)return="" this.originalevent[e]},set:function(t){object.defineproperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return="" e[w.expando]?e:new="" w.event(e)},special:{load:{nobubble:!0},click:{setup:function(e){var="" t="this||e;return" de.test(t.type)&&t.click&&a(t,"input")&&je(t,"click",se),!1},trigger:function(e){var="" de.test(t.type)&&t.click&&a(t,"input")&&je(t,"click"),!0},_default:function(e){var="" de.test(t.type)&&t.click&&a(t,"input")&&q.get(t,"click")||a(t,"a")}},beforeunload:{postdispatch:function(e){void="" 0!="=e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this" instanceof="" w.event))return="" new="" w.event(e,t);e&&e.type?(this.originalevent="e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void" e="this.originalEvent;this.isDefaultPrevented=Se,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var" null="=e.which&&Ce.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void" je(this,e,ae),!1},trigger:function(){return="" je(this,e),!0},delegatetype:t}}),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]="{delegateType:t,bindType:t,handle:function(e){var" n,r="e.relatedTarget,i=e.handleObj;return" r&&(r="==this||w.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),w.fn.extend({on:function(e,t,n,r){return" de(this,e,t,n,r)},one:function(e,t,n,r){return="" de(this,e,t,n,r,1)},off:function(e,t,n){var="" r,i;if(e&&e.preventdefault&&e.handleobj)return="" r="e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof" e){for(i="" in="" e)this.off(i,t,e[i]);return="" this}return!1!="=t&&"function"!=typeof" t||(n="t,t=void" 0),!1="==n&&(n=Ne),this.each(function(){w.event.remove(this,e,n,t)})}});var" qe="/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0">\x20\t\r\n\f]*)[^>]*)\/>/gi,Le=/<script|<style|<link i,he="/checked\s*(?:[^=]|=\s*.checked.)/i,Oe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)">\s*$/g;function Pe(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&w(e).children("tbody")[0]||e}function Re(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Me(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ie(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(Q.hasData(e)&&(o=Q.access(e),a=Q.set(t,o),l=o.events))for(i in delete a.handle,a.events={},l)for(n=0,r=l[i].length;n<r;n++)w.event.add(t,i,l[i][n]);j.hasdata(e)&&(s=j.access(e),u=w.extend({},s),j.set(t,u))}}function we(e,t,n,r){t="s.apply([],t);var" i,o,a,u,l,c,f="0,p=e.length,d=p-1,h=t[0],y=v(h);if(y||p">1&&"string"==typeof h&&!g.checkClone&&He.test(h))return e.each(function(i){var o=e.eq(i);y&&(t[0]=h.call(this,i,o.html())),We(o,t,n,r)});if(p&&(o=(i=Te(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(u=(a=w.map(ye(i,"script"),Re)).length;f<p;f++)l=i,f!==d&&(l=w.clone(l,!0,!0),u&&w.merge(a,ye(l,"script"))),n.call(e[f],l,f);if(u)for(c=a[a.length-1].ownerdocument,w.map(a,me),f=0;f<u;f++)l=a[f],ge.test(l.type||"")&&!q.access(l,"globaleval")&&w.contains(c,l)&&(l.src&&"module"!==(l.type||"").tolowercase()?w._evalurl&&!l.nomodule&&w._evalurl(l.src,{nonce:l.nonce||l.getattribute("nonce")}):x(l.textcontent.replace(oe,""),l,c))}return e}function="" $e(e,t,n){for(var="" r,i="t?w.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||w.cleanData(ye(r)),r.parentNode&&(n&&oe(r)&&me(ye(r,"script")),r.parentNode.removeChild(r));return" e}w.extend({htmlprefilter:function(e){return="" e.replace(qe,"<$1="">")},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=oe(e);if(!(g.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(a=ye(c),r=0,i=(o=ye(e)).length;r<i;r++)s=o[r],u=a[r],l=void 0,"input"="==(l=u.nodeName.toLowerCase())&&de.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ye(e),a=a||ye(c),r=0,i=o.length;r<i;r++)Ie(o[r],a[r]);else" ie(e,c);return(a="ye(c,"script")).length">0&&me(a,!f&&ye(e,"script")),c},cleanData:function(e){for(var t,n,r,i=w.event.special,o=0;void 0!==(n=e[o]);o++)if(G(n)){if(t=n[Q.expando]){if(t.events)for(r in t.events)i[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle);n[Q.expando]=void 0}n[J.expando]&&(n[J.expando]=void 0)}}}),w.fn.extend({detach:function(e){return $e(this,e,!0)},remove:function(e){return $e(this,e)},text:function(e){return _(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return We(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pe(this,e).appendChild(e)})},prepend:function(){return We(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Pe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return We(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return We(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(ye(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return _(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Le.test(e)&&!ve[(he.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodetype&&(w.cleandata(ye(t,!1)),t.innerhtml=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replacewith:function(){var e="[];return" we(this,arguments,function(t){var="" n="this.parentNode;w.inArray(this,e)<0&&(w.cleanData(ye(this)),n&&n.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var" n,r="[],i=w(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),w(i[a])[t](n),u.apply(r,n.get());return" this.pushstack(r)}});var="" fe="new" regexp("^("+te+")(?!px)[a-z%]+$","i"),be="function(e){var" n&&n.opener||(n="t),n.getComputedStyle(e)},_e=new" regexp(re.join("|"),"i");function="" ze(e,t,n){var="" r,i,o,a,s="e.style;return(n=n||Be(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||oe(e)||(a=w.style(e,t)),!g.pixelBoxStyles()&&Fe.test(a)&&_e.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void" 0!="=a?a+"":a}function" ue(e,t){return{get:function(){if(!e())return(this.get="t).apply(this,arguments);delete" this.get}}}!function(){function="" e(){if(c){l.style.csstext="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0" ,c.style.csstext="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%" ,ie.appendchild(l).appendchild(c);var="" n(e){return="" math.round(parsefloat(e))}var="" r,o,a,s,u,l="i.createElement("div"),c=i.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===c.style.backgroundClip,w.extend(g,{boxSizingReliable:function(){return" e(),o},pixelboxstyles:function(){return="" e(),s},pixelposition:function(){return="" e(),r},reliablemarginleft:function(){return="" e(),u},scrollboxsize:function(){return="" e(),a}}))}();var="" xe="["Webkit","Moz","ms"],Ve=i.createElement("div").style,Ge={};function" ye(e){var="" t="w.cssProps[e]||Ge[e];return" t||(e="" in="" ve?e:ge[e]="function(e){for(var" ve)return="" e}(e)||e)}var="" qe="/^(none|table(?!-c[ea]).+)/,Je=/^--/,Ke={position:"absolute",visibility:"hidden",display:"block"},Ze={letterSpacing:"0",fontWeight:"400"};function" et(e,t,n){var="" r="ne.exec(t);return" r?math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function="" tt(e,t,n,r,i,o){var="" a="width" =="=t?1:0,s=0,u=0;if(n===(r?"border":"content"))return" 0;for(;a<4;a+="2)"margin"===n&&(u+=w.css(e,n+re[a],!0,i)),r?("content"===n&&(u-=w.css(e,"padding"+re[a],!0,i)),"margin"!==n&&(u-=w.css(e,"border"+re[a]+"Width",!0,i))):(u+=w.css(e,"padding"+re[a],!0,i),"padding"!==n?u+=w.css(e,"border"+re[a]+"Width",!0,i):s+=w.css(e,"border"+re[a]+"Width",!0,i));return!r&&o">=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function nt(e,t,n){var r=Be(e),i=(!g.boxSizingReliable()||n)&&"border-box"===w.css(e,"boxSizing",!1,r),o=i,a=ze(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Fe.test(a)){if(!n)return a;a="auto"}return(!g.boxSizingReliable()&&i||"auto"===a||!parseFloat(a)&&"inline"===w.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===w.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+tt(e,t,n||(i?"border":"content"),o,r,a)+"px"}function rt(e,t,n,r,i){return new rt.prototype.init(e,t,n,r,i)}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=ze(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=V(t),u=Je.test(t),l=e.style;if(u||(t=Ye(s)),a=w.cssHooks[t]||w.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=ne.exec(n))&&i[1]&&(n=le(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(w.cssNumber[s]?"":"px")),g.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=V(t);return Je.test(t)||(t=Ye(s)),(a=w.cssHooks[t]||w.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=ze(e,t,r)),"normal"===i&&t in Ze&&(i=Ze[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return!Qe.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?nt(e,t,r):ue(e,Ke,function(){return nt(e,t,r)})},set:function(e,n,r){var i,o=Be(e),a=!g.scrollboxSize()&&"absolute"===o.position,s=(a||r)&&"border-box"===w.css(e,"boxSizing",!1,o),u=r?tt(e,t,r,s,o):0;return s&&a&&(u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-tt(e,t,"border",!1,o)-.5)),u&&(i=ne.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),et(0,n,u)}}}),w.cssHooks.marginLeft=Ue(g.reliableMarginLeft,function(e,t){if(t)return(parseFloat(ze(e,"marginLeft"))||e.getBoundingClientRect().left-ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+re[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!="=e&&(w.cssHooks[e+t].set=et)}),w.fn.extend({css:function(e,t){return" _(this,function(e,t,n){var="" r,i,o="{},a=0;if(Array.isArray(t)){for(r=Be(e),i=t.length;a<i;a++)o[t[a]]=w.css(e,t[a],!1,r);return" o}return="" void="" 0!="=n?w.style(e,t,n):w.css(e,t)},e,t,arguments.length">1)}}),w.Tween=rt,rt.prototype={constructor:rt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(w.cssNumber[n]?"":"px")},cur:function(){var e=rt.propHooks[this.prop];return e&&e.get?e.get(this):rt.propHooks._default.get(this)},run:function(e){var t,n=rt.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rt.propHooks._default.set(this),this}},rt.prototype.init.prototype=rt.prototype,rt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||!w.cssHooks[e.prop]&&null==e.elem.style[Ye(e.prop)]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},rt.propHooks.scrollTop=rt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=rt.prototype.init,w.fx.step={};var it,ot,at=/^(?:toggle|show|hide)$/,st=/queueHooks$/;function ut(){ot&&(!1===i.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(ut):t.setTimeout(ut,w.fx.interval),w.fx.tick())}function lt(){return t.setTimeout(function(){it=void 0}),it=Date.now()}function ct(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=re[r])]=i["padding"+n]=e;return 0="==v[r])continue;g=!0}d[r]=v&&v[r]||w.style(e,r)}if((u=!w.isEmptyObject(t))||!w.isEmptyObject(d))for(r" t&&(i.opacity="i.width=e),i}function" ft(e,t,n){for(var="" r,i="(pt.tweeners[t]||[]).concat(pt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return" r}function="" pt(e,t,n){var="" r,i,o="0,a=pt.prefilters.length,s=w.Deferred().always(function(){delete" u.elem}),u="function(){if(i)return!1;for(var" t="it||lt(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return" s.notifywith(e,[l,r,n]),r<1&&a?n:(a||s.notifywith(e,[l,1,0]),s.resolvewith(e,[l]),!1)},l="s.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:it||lt(),duration:n.duration,tweens:[],createTween:function(t,n){var" r="w.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return" l.tweens.push(r),r},stop:function(t){var="" n="0,r=t?l.tweens.length:0;if(i)return" this;for(i="!0;n<r;n++)l.tweens[n].run(1);return" t?(s.notifywith(e,[l,1,0]),s.resolvewith(e,[l,t])):s.rejectwith(e,[l,t]),this}}),c="l.props;for(!function(e,t){var" n,r,i,o,a;for(n="" in="" e)if(i="t[r=V(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete" e[n]),(a="w.cssHooks[r])&&"expand"in" a)for(n="" o="a.expand(o),delete" e[r],o)n="" e||(e[n]="o[n],t[n]=i);else" t[r]="i}(c,l.opts.specialEasing);o<a;o++)if(r=pt.prefilters[o].call(l,e,c,l.opts))return" v(r.stop)&&(w._queuehooks(l.elem,l.opts.queue).stop="r.stop.bind(r)),r;return" w.map(c,ft,l),v(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),w.fx.timer(w.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}w.animation="w.extend(pt,{tweeners:{"*":[function(e,t){var" le(n.elem,e,ne.exec(t),n),n}]},tweener:function(e,t){v(e)?(t="e,e=["*"]):e=e.match(R);for(var" n,r="0,i=e.length;r<i;r++)n=e[r],pt.tweeners[n]=pt.tweeners[n]||[],pt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var" r,i,o,a,s,u,l,c,f="width" t||"height"in="" t,p="this,d={},h=e.style,g=e.nodeType&&se(e),v=Q.get(e,"fxshow");for(r" n.queue||(null="=(a=w._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,w.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],at.test(i)){if(delete" t[r],o="o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void" f&&1="==e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Q.get(e,"display")),"none"===(c=w.css(e,"display"))&&(l?c=l:(pe([e],!0),l=e.style.display||l,c=w.css(e,"display"),pe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===w.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in" v&&(g="v.hidden):v=Q.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&pe([e],!0),p.done(function(){for(r" g||pe([e]),q.remove(e,"fxshow"),d)w.style(e,r,d[r])})),u="ft(g?v[r]:0,r,p),r" v||(v[r]="u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?pt.prefilters.unshift(e):pt.prefilters.push(e)}}),w.speed=function(e,t,n){var" e?w.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t};return="" w.fx.off?r.duration="0:"number"!=typeof" r.duration&&(r.duration="" w.fx.speeds?r.duration="w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){v(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return" this.filter(se).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var="" i="w.isEmptyObject(e),o=w.speed(t,n,r),a=function(){var" a.finish="a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var" e.stop,t(n)};return"string"!="typeof" e&&(n="t,t=e,e=void" 0),t&&!1!="=e&&this.queue(e||"fx",[]),this.each(function(){var" for(i="" a)a[i]&&a[i].stop&&st.test(i)&&r(a[i]);for(i="o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var" t,n="Q.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=w.timers,a=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete" n.finish})}}),w.each(["toggle","show","hide"],function(e,t){var="" null="=e||"boolean"==typeof" e?n.apply(this,arguments):this.animate(ct(t,!0),e,r,i)}}),w.each({slidedown:ct("show"),slideup:ct("hide"),slidetoggle:ct("toggle"),fadein:{opacity:"show"},fadeout:{opacity:"hide"},fadetoggle:{opacity:"toggle"}},function(e,t){w.fn[e]="function(e,n,r){return" this.animate(t,e,n,r)}}),w.timers="[],w.fx.tick=function(){var" e,t="0,n=w.timers;for(it=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),it=void" 0},w.fx.timer="function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){ot||(ot=!0,ut())},w.fx.stop=function(){ot=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(e,n){return" e="w.fx&&w.fx.speeds[e]||e,n=n||"fx",this.queue(n,function(n,r){var" dt,ht="w.expr.attrHandle;w.fn.extend({attr:function(e,t){return" _(this,w.attr,e,t,arguments.length="">1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?w.prop(e,t,n):(1===o&&w.isXMLDoc(e)||(i=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?dt:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=w.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(R);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),dt={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ht[t]||w.find.attr;ht[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=ht[a],ht[a]=i,i=null!=n(e,t,r)?a:null,ht[a]=o),i}});var gt=/^(?:input|select|textarea|button)$/i,vt=/^(?:a|area)$/i;function yt(e){return(e.match(R)||[]).join(" ")}function mt(e){return e.getAttribute&&e.getAttribute("class")||""}function xt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(R)||[]}w.fn.extend({prop:function(e,t){return _(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&w.isXMLDoc(e)||(t=w.propFix[t]||t,i=w.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):gt.test(e.nodeName)||vt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(v(e))return this.each(function(t){w(this).addClass(e.call(this,t,mt(this)))});if((t=xt(e)).length)for(;n=this[u++];)if(i=mt(n),r=1===n.nodeType&&" "+yt(i)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!="=(s=yt(r))&&n.setAttribute("class",s)}return" this},removeclass:function(e){var="" t,n,r,i,o,a,s,u="0;if(v(e))return" this.each(function(t){w(this).removeclass(e.call(this,t,mt(this)))});if(!arguments.length)return="" this.attr("class","");if((t="xt(e)).length)for(;n=this[u++];)if(i=mt(n),r=1===n.nodeType&&"" "+yt(i)+"="" "){for(a="0;o=t[a++];)for(;r.indexOf("" "+o+"="" ")="">-1;)r=r.replace(" "+o+" "," ");i!==(s=yt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):v(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,mt(this),t),t)}):this.each(function(){var t,i,o,a;if(r)for(i=0,o=w(this),a=xt(e);t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=mt(this))&&Q.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Q.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+yt(mt(n))+" ").indexOf(t)>-1)return!0;return!1}});var bt=/\r/g;w.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=v(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,w(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,function(e){return null==e?"":e+""})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(bt,""):null==n?"":n:void 0}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:yt(w.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentnode.disabled||!a(n.parentnode,"optgroup"))){if(t=w(n).val(),a)return t;s.push(t)}return="" s},set:function(e,t){for(var="" n,r,i="e.options,o=w.makeArray(t),a=i.length;a--;)((r=i[a]).selected=w.inArray(w.valHooks.option.get(r),o)">-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},g.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),g.focusin="onfocusin"in t;var wt=/^(?:focusinfocus|focusoutblur)$/,Tt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(e,n,r,o){var a,s,u,l,c,f,d,h,g=[r||i],m=p.call(e,"type")?e.type:e,x=p.call(e,"namespace")?e.namespace.split("."):[];if(s=h=u=r=r||i,3!==r.nodeType&&8!==r.nodeType&&!wt.test(m+w.event.triggered)&&(m.indexOf(".")>-1&&(x=m.split("."),m=x.shift(),x.sort()),c=m.indexOf(":")<0&&"on"+m,(e=e[w.expando]?e:new w.event(m,"object"="=typeof" e&&e)).istrigger="o?2:3,e.namespace=x.join("."),e.rnamespace=e.namespace?new" regexp("(^|\\.)"+x.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result="void" 0,e.target||(e.target="r),n=null==n?[e]:w.makeArray(n,[e]),d=w.event.special[m]||{},o||!d.trigger||!1!==d.trigger.apply(r,n))){if(!o&&!d.noBubble&&!y(r)){for(l=d.delegateType||m,wt.test(l+m)||(s=s.parentNode);s;s=s.parentNode)g.push(s),u=s;u===(r.ownerDocument||i)&&g.push(u.defaultView||u.parentWindow||t)}for(a=0;(s=g[a++])&&!e.isPropagationStopped();)h=s,e.type=a">1?l:d.bindType||m,(f=(Q.get(s,"events")||{})[e.type]&&Q.get(s,"handle"))&&f.apply(s,n),(f=c&&s[c])&&f.apply&&G(s)&&(e.result=f.apply(s,n),!1===e.result&&e.preventDefault());return e.type=m,o||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(g.pop(),n)||!G(r)||c&&v(r[m])&&!y(r)&&((u=r[c])&&(r[c]=null),w.event.triggered=m,e.isPropagationStopped()&&h.addEventListener(m,Tt),r[m](),e.isPropagationStopped()&&h.removeEventListener(m,Tt),w.event.triggered=void 0,u&&(r[c]=u)),e.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}}),g.focusin||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=Q.access(r,t);i||r.addEventListener(e,n,!0),Q.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=Q.access(r,t)-1;i?Q.access(r,t,i):(r.removeEventListener(e,n,!0),Q.remove(r,t))}}});var Ct=t.location,Et=Date.now(),kt=/\?/;w.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(r){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+e),n};var St=/\[\]$/,Nt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Dt=/^(?:input|select|textarea|keygen)/i;function jt(e,t,n,r){var i;if(Array.isArray(t))w.each(t,function(t,i){n||St.test(e)?r(e,i):jt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==b(t))r(e,t);else for(i in t)jt(e+"["+i+"]",t[i],n,r)}w.param=function(e,t){var n,r=[],i=function(e,t){var n=v(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){i(this.name,this.value)});else for(n in e)jt(n,e[n],t,i);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&Dt.test(this.nodeName)&&!At.test(e)&&(this.checked||!de.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(Nt,"\r\n")}}):{name:t.name,value:n.replace(Nt,"\r\n")}}).get()}});var qt=/%20/g,Lt=/#.*$/,Ht=/([?&])_=[^&]*/,Ot=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:GET|HEAD)$/,Rt=/^\/\//,Mt={},It={},Wt="*/".concat("*"),$t=i.createElement("a");function Ft(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(R)||[];if(v(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Bt(e,t,n,r){var i={},o=e===It;function a(s){var u;return i[s]=!0,w.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function _t(e,t){var n,r,i=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&w.extend(!0,e,r),e}$t.href=Ct.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?_t(_t(e,w.ajaxSettings),t):_t(w.ajaxSettings,e)},ajaxPrefilter:Ft(Mt),ajaxTransport:Ft(It),ajax:function(e,n){"object"==typeof e&&(n=e,e=void 0),n=n||{};var r,o,a,s,u,l,c,f,p,d,h=w.ajaxSetup({},n),g=h.context||h,v=h.context&&(g.nodeType||g.jquery)?w(g):w.event,y=w.Deferred(),m=w.Callbacks("once memory"),x=h.statusCode||{},b={},T={},C="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=Ot.exec(a);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=T[e.toLowerCase()]=T[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)E.always(e[E.status]);else for(t in e)x[t]=[x[t],e[t]];return this},abort:function(e){var t=e||C;return r&&r.abort(t),k(0,t),this}};if(y.promise(E),h.url=((e||h.url||Ct.href)+"").replace(Rt,Ct.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(R)||[""],null==h.crossDomain){l=i.createElement("a");try{l.href=h.url,l.href=l.href,h.crossDomain=$t.protocol+"//"+$t.host!=l.protocol+"//"+l.host}catch(S){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=w.param(h.data,h.traditional)),Bt(Mt,h,n,E),c)return E;for(p in(f=w.event&&h.global)&&0==w.active++&&w.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Pt.test(h.type),o=h.url.replace(Lt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(qt,"+")):(d=h.url.slice(o.length),h.data&&(h.processData||"string"==typeof h.data)&&(o+=(kt.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(o=o.replace(Ht,"$1"),d=(kt.test(o)?"&":"?")+"_="+Et+++d),h.url=o+d),h.ifModified&&(w.lastModified[o]&&E.setRequestHeader("If-Modified-Since",w.lastModified[o]),w.etag[o]&&E.setRequestHeader("If-None-Match",w.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&E.setRequestHeader("Content-Type",h.contentType),E.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Wt+"; q=0.01":""):h.accepts["*"]),h.headers)E.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(!1===h.beforeSend.call(g,E,h)||c))return E.abort();if(C="abort",m.add(h.complete),E.done(h.success),E.fail(h.error),r=Bt(It,h,n,E)){if(E.readyState=1,f&&v.trigger("ajaxSend",[E,h]),c)return E;h.async&&h.timeout>0&&(u=t.setTimeout(function(){E.abort("timeout")},h.timeout));try{c=!1,r.send(b,k)}catch(S){if(c)throw S;k(-1,S)}}else k(-1,"No Transport");function k(e,n,i,s){var l,p,d,b,T,C=n;c||(c=!0,u&&t.clearTimeout(u),r=void 0,a=s||"",E.readyState=e>0?4:0,l=e>=200&&e<300||304===e,i&&(b=function(e,t,n){for(var 0="==r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i" r,i,o,a,s="e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void" in="" s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in="" n)o="u[0];else{for(i" n){if(!u[0]||e.converters[i+"="" "+u[0]]){o="i;break}a||(a=i)}o=o||a}if(o)return" o!="=u[0]&&u.unshift(o),n[o]}(h,E,i)),b=function(e,t,n,r){var" i,o,a,s,u,l="{},c=e.dataTypes.slice();if(c[1])for(a" e.converters)l[a.tolowercase()]="e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else" if("*"!="=u&&u!==o){if(!(a=l[u+"" "+o]||l["*="" "+o]))for(i="" l)if((s="i.split("" "))[1]="==o&&(a=l[u+"" "+s[0]]||l["*="" "+s[0]])){!0="==a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else" try{t="a(t)}catch(S){return{state:"parsererror",error:a?S:"No" conversion="" from="" "+u+"="" to="" "+o}}}return{state:"success",data:t}}(h,b,e,l),l?(h.ifmodified&&((t="E.getResponseHeader("Last-Modified"))&&(w.lastModified[o]=T),(T=E.getResponseHeader("etag"))&&(w.etag[o]=T)),204===e||"HEAD"===h.type?C="nocontent":304===e?C="notmodified":(C=b.state,p=b.data,l=!(d=b.error))):(d=C,!e&&C||(C="error",e<0&&(e=0))),E.status=e,E.statusText=(n||C)+"",l?y.resolveWith(g,[p,C,E]):y.rejectWith(g,[E,C,d]),E.statusCode(x),x=void" 0,f&&v.trigger(l?"ajaxsuccess":"ajaxerror",[e,h,l?p:d]),m.firewith(g,[e,c]),f&&(v.trigger("ajaxcomplete",[e,h]),--w.active||w.event.trigger("ajaxstop")))}return="" e},getjson:function(e,t,n){return="" w.get(e,t,n,"json")},getscript:function(e,t){return="" w.get(e,void="" 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]="function(e,n,r,i){return" v(n)&&(i="i||r,r=n,n=void" 0),w.ajax(w.extend({url:e,type:t,datatype:i,data:n,success:r},w.isplainobject(e)&&e))}}),w._evalurl="function(e,t){return" w.ajax({url:e,type:"get",datatype:"script",cache:!0,async:!1,global:!1,converters:{"text="" script":function(){}},datafilter:function(e){w.globaleval(e,t)}})},w.fn.extend({wrapall:function(e){var="" t;return="" this[0]&&(v(e)&&(e="e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var" e="this;e.firstElementChild;)e=e.firstElementChild;return" e}).append(this)),this},wrapinner:function(e){return="" v(e)?this.each(function(t){w(this).wrapinner(e.call(this,t))}):this.each(function(){var="" t="w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var" this.each(function(n){w(this).wrapall(t?e.call(this,n):e)})},unwrap:function(e){return="" this.parent(e).not("body").each(function(){w(this).replacewith(this.childnodes)}),this}}),w.expr.pseudos.hidden="function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return" new="" t.xmlhttprequest}catch(e){}};var="" zt="{0:200,1223:204},Ut=w.ajaxSettings.xhr();g.cors=!!Ut&&"withCredentials"in" ut,g.ajax="Ut=!!Ut,w.ajaxTransport(function(e){var" n,r;if(g.cors||ut&&!e.crossdomain)return{send:function(i,o){var="" a,s="e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a" e.xhrfields)s[a]="e.xhrFields[a];for(a" e.mimetype&&s.overridemimetype&&s.overridemimetype(e.mimetype),e.crossdomain||i["x-requested-with"]||(i["x-requested-with"]="XMLHttpRequest" ),i)s.setrequestheader(a,i[a]);n="function(e){return" function(){n&&(n="r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof" s.status?o(0,"error"):o(s.status,s.statustext):o(zt[s.status]||s.status,s.statustext,"text"!="=(s.responseType||"text")||"string"!=typeof" s.responsetext?{binary:s.response}:{text:s.responsetext},s.getallresponseheaders()))}},s.onload="n(),r=s.onerror=s.ontimeout=n("error"),void" 0!="=s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&t.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(n)throw" u}},abort:function(){n&&n()}}}),w.ajaxprefilter(function(e){e.crossdomain&&(e.contents.script="!1)}),w.ajaxSetup({accepts:{script:"text/javascript," application="" javascript,="" ecmascript,="" x-ecmascript"},contents:{script:="" \b(?:java|ecma)script\b="" },converters:{"text="" script":function(e){return="" w.globaleval(e),e}}}),w.ajaxprefilter("script",function(e){void="" t,n;if(e.crossdomain||e.scriptattrs)return{send:function(r,o){t="w("<script">").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),i.head.appendChild(t[0])},abort:function(){n&&n()}}});var Xt,Vt=[],Gt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Vt.pop()||w.expando+"_"+Et++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(e,n,r){var i,o,a,s=!1!==e.jsonp&&(Gt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Gt,"$1"+i):!1!==e.jsonp&&(e.url+=(kt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||w.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){a=arguments},r.always(function(){void 0===o?w(t).removeProp(i):t[i]=o,e[i]&&(e.jsonpCallback=n.jsonpCallback,Vt.push(i)),a&&v(o)&&o(a[0]),a=o=void 0}),"script"}),g.createHTMLDocument=((Xt=i.implementation.createHTMLDocument("").body).innerHTML="<form/><form/>",2===Xt.childNodes.length),w.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(g.createHTMLDocument?((r=(t=i.implementation.createHTMLDocument("")).createElement("base")).href=i.location.href,t.head.appendChild(r)):t=i),a=!n&&[],(o=D.exec(e))?[t.createElement(o[1])]:(o=Te([e],t,a),a&&a.length&&w(a).remove(),w.merge([],o.childNodes)));var r,o,a},w.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=yt(e.slice(s)),e=e.slice(0,s)),v(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&w.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=w.css(e,"position"),c=w(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=w.css(e,"top"),u=w.css(e,"left"),("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),v(t)&&(t=t.call(e,n,w.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===w.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),i.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-w.css(r,"marginTop",!0),left:t.left-i.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===w.css(e,"position");)e=e.offsetParent;return e||ie})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;w.fn[e]=function(r){return _(this,function(e,r,i){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=Ue(g.pixelPosition,function(e,n){if(n)return n=ze(e,t),Fe.test(n)?w(e).position()[t]+"px":n})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){w.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return _(this,function(t,n,i){var o;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?w.css(t,n,s):w.style(t,n,i,s)},t,a?i:void 0,a)}})}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),w.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),v(e))return r=a.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(a.call(arguments)))}).guid=e.guid=e.guid||w.guid++,i},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=A,w.isFunction=v,w.isWindow=y,w.camelCase=V,w.type=b,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof e&&e.amd&&e("jquery",[],function(){return w});var Yt=t.jQuery,Qt=t.$;return w.noConflict=function(e){return t.$===w&&(t.$=Qt),e&&t.jQuery===w&&(t.jQuery=Yt),w},n||(t.jQuery=t.$=w),w});
},{"process":"pBGv"}],"jgzl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var t=e(require("jquery"));function e(t){return t&&t.__esModule?t:{default:t}}function o(e,o){var n=null;function c(){n&&(n.remove(),n=null)}function r(e,c){var r=e-10,u=c-10;n=n||(0,t.default)('<div class="deleteBtn" style="top:'+u+" px;left:"+r+'px;"=""/>'),o.append(n)}function u(t,e){n||r(t,e);var o=t-10,c=e-10;n.css("top",c),n.css("left",o)}e.on({"object:selected":function(t){r(t.target.oCoords.tr.x,t.target.oCoords.tr.y)},"selection:updated":function(t){u(t.target.oCoords.tr.x,t.target.oCoords.tr.y)},"mouse:down":function(t){e.getActiveObject()||c()},"object:modified":function(t){u(t.target.oCoords.tr.x,t.target.oCoords.tr.y)},"object:scaling":function(t){c()},"object:moving":function(t){c()},"object:rotating":function(t){c()}}),o.on("touchstart click",".deleteBtn",function(){var t=e.getActiveObject();t&&(e.remove(t),c())}),(0,t.default)(document).on("click",function(t){c()})}
},{"jquery":"juYr"}],"+37g":[function(require,module,exports) {
module.exports="脸-36.485bd053.png";
},{}],"DMsn":[function(require,module,exports) {
module.exports="脸-37.4587b16e.png";
},{}],"OLrF":[function(require,module,exports) {
module.exports="脸-38.0950f21c.png";
},{}],"M5hK":[function(require,module,exports) {
module.exports="脸-40.c7188cb9.png";
},{}],"i7Kh":[function(require,module,exports) {
module.exports="脸-41.9ce945cd.png";
},{}],"pxTG":[function(require,module,exports) {
module.exports="脸-42.c5fd9788.png";
},{}],"140N":[function(require,module,exports) {
module.exports="脸-43.3f786c99.png";
},{}],"p40N":[function(require,module,exports) {
module.exports="脸-44.f45f6310.png";
},{}],"ntwe":[function(require,module,exports) {
module.exports="脸-45.726c0061.png";
},{}],"fiIy":[function(require,module,exports) {
module.exports="脸-48.84624b46.png";
},{}],"75SO":[function(require,module,exports) {
module.exports="眼睛-01.466a3879.png";
},{}],"+gQx":[function(require,module,exports) {
module.exports="眼睛-03.2ad341fe.png";
},{}],"42+4":[function(require,module,exports) {
module.exports="眼睛-04.91ef1c51.png";
},{}],"39KG":[function(require,module,exports) {
module.exports="眼睛-05.a68b6aec.png";
},{}],"x8On":[function(require,module,exports) {
module.exports="眼睛-06.3127b45d.png";
},{}],"GIsE":[function(require,module,exports) {
module.exports="眼睛-07.ffb9849b.png";
},{}],"yLjZ":[function(require,module,exports) {
module.exports="眼睛-08.f3369ecd.png";
},{}],"j4D+":[function(require,module,exports) {
module.exports="眼睛-09.a86b15fc.png";
},{}],"DXwM":[function(require,module,exports) {
module.exports="眼睛-11.5f418685.png";
},{}],"gQPP":[function(require,module,exports) {
module.exports="眼睛-12.942f5288.png";
},{}],"egAM":[function(require,module,exports) {
module.exports="发型-49.93d37c9f.png";
},{}],"ivuI":[function(require,module,exports) {
module.exports="发型-50.fb354652.png";
},{}],"nm66":[function(require,module,exports) {
module.exports="发型-51.42c5ed14.png";
},{}],"doKy":[function(require,module,exports) {
module.exports="发型-52.3ee096ef.png";
},{}],"Vn9f":[function(require,module,exports) {
module.exports="发型-53.13110df0.png";
},{}],"6zNN":[function(require,module,exports) {
module.exports="发型-54.cc13eb68.png";
},{}],"QHiJ":[function(require,module,exports) {
module.exports="发型-55.d489f00d.png";
},{}],"0/px":[function(require,module,exports) {
module.exports="发型-57.928a0c04.png";
},{}],"xGpG":[function(require,module,exports) {
module.exports="发型-58.b878bc23.png";
},{}],"1pgC":[function(require,module,exports) {
module.exports="发型-59.05acd185.png";
},{}],"8XDE":[function(require,module,exports) {
module.exports="嘴巴-22.9daa0af6.png";
},{}],"vFje":[function(require,module,exports) {
module.exports="嘴巴-24.2d2b5c2b.png";
},{}],"n83a":[function(require,module,exports) {
module.exports="嘴巴-25.5ca6d9e4.png";
},{}],"4tWQ":[function(require,module,exports) {
module.exports="嘴巴-28.2f3b2415.png";
},{}],"h76c":[function(require,module,exports) {
module.exports="嘴巴-29.db30fd79.png";
},{}],"7xRY":[function(require,module,exports) {
module.exports="嘴巴-31.b5583f57.png";
},{}],"cNBE":[function(require,module,exports) {
module.exports="嘴巴-33.a30d4abc.png";
},{}],"U1XT":[function(require,module,exports) {
module.exports="嘴巴-34.1613695e.png";
},{}],"u8Ya":[function(require,module,exports) {
module.exports="嘴巴-35.cc814e27.png";
},{}],"fFR+":[function(require,module,exports) {
module.exports="嘴巴-36.95f62957.png";
},{}],"eLWa":[function(require,module,exports) {
module.exports="鼻子-15.e45b1eea.png";
},{}],"rCsw":[function(require,module,exports) {
module.exports="鼻子-16.b64b3be2.png";
},{}],"JED6":[function(require,module,exports) {
module.exports="鼻子-17.4c5661ca.png";
},{}],"TnUg":[function(require,module,exports) {
module.exports="鼻子-18.db3b0d6c.png";
},{}],"wWL7":[function(require,module,exports) {
module.exports="鼻子-20.f33cecbf.png";
},{}],"4itQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.elements=exports.bg_colors=exports.CornersOptions=exports.HideControls=void 0;var r={tl:!0,tr:!0,bl:!0,br:!0,ml:!1,mt:!1,mr:!1,mb:!1,mtr:!0};exports.HideControls=r;var e={transparentCorners:!1,cornerStrokeColor:"rgba(255,0,0,0.6)",borderColor:"rgba(255,0,0,0.6)",cornerColor:"rgba(255,255,255,0.4)",cornerSize:20,padding:5,cornerStyle:"circle",borderDashArray:[3,4]};exports.CornersOptions=e;var i=["#f6c5b5","#b7dcc7","#c4be6b","#bf9f66","#b990b9","#1894da","#46929c","#8e5446"];exports.bg_colors=i;var g={lian:[require("./img/脸型/脸-36.png"),require("./img/脸型/脸-37.png"),require("./img/脸型/脸-38.png"),require("./img/脸型/脸-40.png"),require("./img/脸型/脸-41.png"),require("./img/脸型/脸-42.png"),require("./img/脸型/脸-43.png"),require("./img/脸型/脸-44.png"),require("./img/脸型/脸-45.png"),require("./img/脸型/脸-48.png")],yan:[require("./img/眼睛/眼睛-01.png"),require("./img/眼睛/眼睛-03.png"),require("./img/眼睛/眼睛-04.png"),require("./img/眼睛/眼睛-05.png"),require("./img/眼睛/眼睛-06.png"),require("./img/眼睛/眼睛-07.png"),require("./img/眼睛/眼睛-08.png"),require("./img/眼睛/眼睛-09.png"),require("./img/眼睛/眼睛-11.png"),require("./img/眼睛/眼睛-12.png")],fa:[require("./img/发型/发型-49.png"),require("./img/发型/发型-50.png"),require("./img/发型/发型-51.png"),require("./img/发型/发型-52.png"),require("./img/发型/发型-53.png"),require("./img/发型/发型-54.png"),require("./img/发型/发型-55.png"),require("./img/发型/发型-57.png"),require("./img/发型/发型-58.png"),require("./img/发型/发型-59.png")],kou:[require("./img/嘴巴/嘴巴-22.png"),require("./img/嘴巴/嘴巴-24.png"),require("./img/嘴巴/嘴巴-25.png"),require("./img/嘴巴/嘴巴-28.png"),require("./img/嘴巴/嘴巴-29.png"),require("./img/嘴巴/嘴巴-31.png"),require("./img/嘴巴/嘴巴-33.png"),require("./img/嘴巴/嘴巴-34.png"),require("./img/嘴巴/嘴巴-35.png"),require("./img/嘴巴/嘴巴-36.png")],bi:[require("./img/鼻子/鼻子-15.png"),require("./img/鼻子/鼻子-16.png"),require("./img/鼻子/鼻子-17.png"),require("./img/鼻子/鼻子-18.png"),require("./img/鼻子/鼻子-20.png")]};exports.elements=g;
},{"./img/脸型/脸-36.png":"+37g","./img/脸型/脸-37.png":"DMsn","./img/脸型/脸-38.png":"OLrF","./img/脸型/脸-40.png":"M5hK","./img/脸型/脸-41.png":"i7Kh","./img/脸型/脸-42.png":"pxTG","./img/脸型/脸-43.png":"140N","./img/脸型/脸-44.png":"p40N","./img/脸型/脸-45.png":"ntwe","./img/脸型/脸-48.png":"fiIy","./img/眼睛/眼睛-01.png":"75SO","./img/眼睛/眼睛-03.png":"+gQx","./img/眼睛/眼睛-04.png":"42+4","./img/眼睛/眼睛-05.png":"39KG","./img/眼睛/眼睛-06.png":"x8On","./img/眼睛/眼睛-07.png":"GIsE","./img/眼睛/眼睛-08.png":"yLjZ","./img/眼睛/眼睛-09.png":"j4D+","./img/眼睛/眼睛-11.png":"DXwM","./img/眼睛/眼睛-12.png":"gQPP","./img/发型/发型-49.png":"egAM","./img/发型/发型-50.png":"ivuI","./img/发型/发型-51.png":"nm66","./img/发型/发型-52.png":"doKy","./img/发型/发型-53.png":"Vn9f","./img/发型/发型-54.png":"6zNN","./img/发型/发型-55.png":"QHiJ","./img/发型/发型-57.png":"0/px","./img/发型/发型-58.png":"xGpG","./img/发型/发型-59.png":"1pgC","./img/嘴巴/嘴巴-22.png":"8XDE","./img/嘴巴/嘴巴-24.png":"vFje","./img/嘴巴/嘴巴-25.png":"n83a","./img/嘴巴/嘴巴-28.png":"4tWQ","./img/嘴巴/嘴巴-29.png":"h76c","./img/嘴巴/嘴巴-31.png":"7xRY","./img/嘴巴/嘴巴-33.png":"cNBE","./img/嘴巴/嘴巴-34.png":"U1XT","./img/嘴巴/嘴巴-35.png":"u8Ya","./img/嘴巴/嘴巴-36.png":"fFR+","./img/鼻子/鼻子-15.png":"eLWa","./img/鼻子/鼻子-16.png":"rCsw","./img/鼻子/鼻子-17.png":"JED6","./img/鼻子/鼻子-18.png":"TnUg","./img/鼻子/鼻子-20.png":"wWL7"}],"czIy":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var r,n=void 0===e?window.location.href:e,a=n.substring(n.indexOf(this.m)+1,n.length).replace(/\#.*/,"").split("&"),i={},o=0;r=a[o];o++)i[r.substring(0,r.indexOf(this.v)).toLowerCase()]=r.substring(r.indexOf(this.v)+1,r.length);var s=i[t.toLowerCase()];return void 0===s?"":decodeURIComponent(s)}function r(){var e=function(t,e,r){var n,a=void 0===r?window.location.href:r,i="";"?"==this.m&&-1!=a.indexOf("#")&&(i=a.substring(a.indexOf("#"),a.length),a=a.replace(/\#.*$/,"")),a.indexOf(this.m)<=-1&&(a+=this.m),n=a.substring(0,a.indexof(this.m));var 0="==arguments[1]?window.location.href:arguments[1];for(aaa" o="a.substring(a.indexOf(this.m)+1,a.length);e=null==e?"":e;if(""==(t=t||""))return" a.replace(="" \?*\s*$="" ,"");var="" s="new" regexp("\\b"+t+"="[^&]*","");return" s.test(o)&&""!="=e?o=o.replace(s,t+this.v+e):s.test(o)&&""==e?o=o.replace(s,""):""!==e&&(o+="&"+t+this.v+e),n+(""==(o=o.replace(/(^&*|&*$|&*(?=&))/g,""))&&"#"!==this.m?"":this.m+o)+(i||"")};if("string"==typeof" arguments[0])return="" e.apply(this,[arguments[0],arguments[1],arguments[2]]);if("object"="=t(arguments[0])){var" r="arguments[0],n=void" in="" r)n="e.apply(this,[aaa,r[aaa],n]);return" n}return="" location.href}object.defineproperty(exports,"__esmodule",{value:!0}),exports.default="void" 0;var="" n="{data_hash:{m:"#",v:"="},data_search:{m:"?",v:"="}},a={getSearch:function(){return" e.apply(n.data_search,arguments)},setsearch:function(){return="" r.apply(n.data_search,arguments)},gethash:function(){return="" e.apply(n.data_hash,arguments)},sethash:function(){return="" r.apply(n.data_hash,arguments)},getmy:function(t,r){var="" n.geturl="e,n.getURL},setmy:function(t,e){var" n.seturl="r,n.setURL}};exports.default=a;" },{}],"mlml":[function(require,module,exports)="" {="" module.exports="outImage_button.95bd2d8e.png" ;="" },{}],"focm":[function(require,module,exports)="" "use="" strict";require(".="" res="" reset.min.css"),require(".="" css.less"),require("dragula="" dist="" dragula.css"),require("..="" lib="" fabric.js="" fabric");var="" t="a(require("dragula")),e=a(require("jquery")),n=a(require("./delBtn")),i=require("./config"),r=a(require("./URL"));function" a(t){return="" t&&t.__esmodule?t:{default:t}}function="" o(t,e){return="" s(t)||l(t,e)||c()}function="" c(){throw="" new="" typeerror("invalid="" attempt="" to="" destructure="" non-iterable="" instance")}function="" l(t,e){var="" 0;try{for(var="" o,c="t[Symbol.iterator]();!(i=(o=c.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(l){r=!0,a=l}finally{try{i||null==c.return||c.return()}finally{if(r)throw" a}}return="" n}function="" s(t){if(array.isarray(t))return="" t}var="" u="window.__config,d=u.isDev,f=u.apis,g=r.default.getSearch("openId");function" h(t,n){function="" i(t){return(0,e.default)(t).hasclass("active")}var="" .bt_out").addclass("active"),s="(0,e.default)(".btns" .bt_back"),u="(0,e.default)(".btns" .bt_save"),d="(0,e.default)(".btns" .bt_share");function="" f(t){var="" e="active" ,n="hide" ;t?(l.removeclass(e),r.removeclass(n),s.addclass(e),u.addclass(e),d.addclass(e),a.addclass(n),o.addclass(n),c.addclass(n)):(l.addclass(e),r.addclass(n),s.removeclass(e),u.removeclass(e),d.removeclass(e),a.removeclass(n),o.removeclass(n),c.removeclass(n))}l.click(function(){i(this)&&(l.removeclass("active"),y(t,n).then(function(t){r.find("img").attr("src",t),u.find("img").attr("src",t),f(!0)}))}),s.click(function(){i(this)&&f(!1)}),d.click(function(){i(this)&&alert('请点击右上角图标="" "分享到朋友圈"')})}function="" m(){var="" v(){return="" d?"00001":new="" promise(function(t,n){var="" i="window.location.href.split("#")[0];e.default.post(f.getTicket,{url:i}).then(function(e){C(i,e),t(e.rank)})})}function" p(){var="" fabric.canvas("c",{selection:!1,width:t,height:1*t});return="" n.backgroundcolor="rgba(255,255,255,1)" ,n.renderall(),window.canvas="n,(0,e.default)(document).on("click",function(t){n._activeObject=null,n.renderAll()}),n}function" b(t){var="" style="background:'.concat(t,'" data-color="').concat(t,'">')}),n.find("ul").html(r).on("click","li",function(){t.setBackgroundColor((0,e.default)(this).data("color")),t.renderAll()})}function w(n,i){var r=I(n),a=(0,t.default)({isContainer:function(t){return"canvas"===t.id||"selectImgBox"===t.id},moves:function(t,e,n,i){return t.classList.contains("item")},accepts:function(t,e,n,i){return!0},invalid:function(t,e){return!1},direction:"vertical",copy:!0,copySortSource:!1,revertOnSpill:!1,removeOnSpill:!1,mirrorContainer:document.body,ignoreInputTextSelection:!0});a.on("drag",function(t,e){setTimeout(function(){i.trigger("hide")},100)}),a.on("drop",function(t,n,i,a){var o=(0,e.default)(".gu-mirror img")[0].getBoundingClientRect(),c=(0,e.default)("#c")[0].getBoundingClientRect(),l=(0,e.default)(".gu-mirror img").attr("src"),s=(0,e.default)(".gu-mirror").hasClass("lian");n&&r(l,{left:o.left-c.left,top:o.top-c.top,width:o.width,height:o.height},s)})}function C(t,e){var n=e.timestamp,i=e.noncestr,r=e.signature,a=window.__config,o=a.appId,c=a.debug,l=a.icon;wx.config({debug:c,appId:o,timestamp:n,nonceStr:i,signature:r,jsApiList:["onMenuShareTimeline"]}),wx.ready(function(){wx.checkJsApi({jsApiList:["onMenuShareTimeline"]}),wx.onMenuShareTimeline({title:"自然梦想家 2019",desc:"自然梦想家 2019",link:t,imgUrl:l,success:function(){c&&alert("分享成功")},cancel:function(){c&&alert("取消分享")}})})}function y(t,e){var n=t.width,i=t.height;return Promise.all([S(t),k(t,e)]).then(function(e){var r=o(e,2),a=r[0],c=r[1];return new Promise(function(e,r){var o=a.height*a.scaleY,l=c.height,s=new fabric.StaticCanvas;s.set({width:n,height:i+o}),s.loadFromDatalessJSON(t.toDatalessJSON(),function(t){if(t)r(t);else{var u=new fabric.Rect({left:0,top:i,fill:"#FFF",width:n,height:o+l});a.set({left:0,top:i}),c.set({left:-1,top:i+o/3}),s.add(u,a,c);var d=s.toDataURL({format:"png",enableRetinaScaling:!0});e(d)}})})})}function S(t){return new Promise(function(e,n){fabric.Image.fromURL(require("./img/outImage_button.png"),function(n){var i=t.width/n.width;return n.set({scaleX:i,scaleY:i}),e(n)})})}function k(t,e){var n=new fabric.Rect({width:t.width,height:.18*t.width,originX:"center",originY:"center",fill:"rgba(255,255,255,0)"}),i=new fabric.Text("我是第 ".concat(e," 位 #自然梦想家#"),{fontSize:.062*t.width,fontFamily:"-apple-system,'SF UI Text',Arial,'PingFang SC','Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif",fill:"#333",originX:"center",originY:"center"}),r=new fabric.Group([n,i]);return Promise.resolve(r)}function x(t){var n=(0,e.default)("#selectImgBox"),r=function(){n.trigger("hide")},a={};return n.on("show",function(){(0,e.default)(this).removeClass("hide"),(0,e.default)(document).on("click",r)}).on("hide",function(){(0,e.default)(this).addClass("hide"),(0,e.default)(document).off("click",r)}).on("click",function(){return!1}),(0,e.default)("#imgbox").on("click touchstart","[data-type]",function(){var t=(0,e.default)(this).data("type"),r=a[t];if(!r){var o=i.elements[t],c="";o&&o.forEach(function(e){c+='<div class="item '.concat(t,'"><img class="loading" src="').concat(e,'"/></div>')}),(r=a[t]=(0,e.default)(c)).find("img").on("load",function(){(0,e.default)(this).removeClass("loading")})}return n.html("").append(r).trigger("show").find("img"),!1}),t.on("mouse:down",function(){n.trigger("hide")}),n}function I(t){return function(e,n,r){fabric.Image.fromURL(e,function(e){e.set({left:n.left,top:n.top,scaleX:n.width/e.width,scaleY:n.height/e.height}),e.setControlsVisibility(i.HideControls),e.set(i.CornersOptions),e.on("after:scaling",function(){}),t.add(e),r?t.moveTo(e,0):t.setActiveObject(e),t.renderAll()})}}(0,e.default)(function(){m(),Promise.all([p(),v()]).then(function(t){var i=o(t,2),r=i[0],a=i[1];(0,e.default)("#rank").text(a);var c=x(r);b(r),(0,n.default)(r,(0,e.default)("#canvas")),w(r,c),h(r,a)})});
},{"./res/reset.min.css":"EbPE","./css.less":"KTMo","dragula/dist/dragula.css":"EbPE","../lib/fabric.js/dist/fabric":"9k6g","dragula":"FoQ9","jquery":"juYr","./delBtn":"jgzl","./config":"4itQ","./URL":"czIy","./img/outImage_button.png":"MLml"}]},{},["Focm"], null)
//# sourceMappingURL=src.b8eb8a3e.js.map</=-1&&(a+=this.m),n=a.substring(0,a.indexof(this.m));var></div></300||304===e,i&&(b=function(e,t,n){for(var></0&&"on"+m,(e=e[w.expando]?e:new></0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentnode.disabled||!a(n.parentnode,"optgroup"))){if(t=w(n).val(),a)return></0&&(r+=o+"></4;r+=2-t)i["margin"+(n=re[r])]=i["padding"+n]=e;return></4;r++)i[e+re[r]+t]=o[r]||o[r-2]||o[0];return></r;n++)1===(t=this[n]||{}).nodetype&&(w.cleandata(ye(t,!1)),t.innerhtml=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replacewith:function(){var></i;r++)s=o[r],u=a[r],l=void></p;f++)l=i,f!==d&&(l=w.clone(l,!0,!0),u&&w.merge(a,ye(l,"script"))),n.call(e[f],l,f);if(u)for(c=a[a.length-1].ownerdocument,w.map(a,me),f=0;f<u;f++)l=a[f],ge.test(l.type||"")&&!q.access(l,"globaleval")&&w.contains(c,l)&&(l.src&&"module"!==(l.type||"").tolowercase()?w._evalurl&&!l.nomodule&&w._evalurl(l.src,{nonce:l.nonce||l.getattribute("nonce")}):x(l.textcontent.replace(oe,""),l,c))}return></r;n++)w.event.add(t,i,l[i][n]);j.hasdata(e)&&(s=j.access(e),u=w.extend({},s),j.set(t,u))}}function></script|<style|<link></t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addprop:function(e,t){object.defineproperty(w.event.prototype,e,{enumerable:!0,configurable:!0,get:v(t)?function(){if(this.originalevent)return></u;n++)void></arguments.length;t++)u[t]=arguments[t];if(s.delegatetarget=this,!c.predispatch||!1!==c.predispatch.call(this,s)){for(a=w.event.handlers.call(this,s,l),t=0;(i=a[t++])&&!s.ispropagationstopped();)for(s.currenttarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isimmediatepropagationstopped();)s.rnamespace&&!1!==o.namespace&&!s.rnamespace.test(o.namespace)||(s.handleobj=o,s.data=o.data,void></r;n++)q.set(e[n],"globaleval",!t||q.get(t[n],"globaleval"))}ve.optgroup=ve.option,ve.tbody=ve.tfoot=ve.colgroup=ve.caption=ve.thead,ve.th=ve.td;var></n?w.queue(this[0],e):void></u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return></=1&&(w(e,o.done(s(n)).resolve,o.reject,!t),"pending"===o.state()||v(i[n]&&i[n].then)))return></o)){if((t=r.apply(s,u))===n.promise())throw></=s&&s--}),this},has:function(e){return></o.length;)!1===o[s].apply(n[0],n[1])&&e.stoponfalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},l={add:function(){return></n;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var></"===e[0]&&"></[\w\w]+></r;t++)if(w.contains(i[t],this))return!0}));for(n=this.pushstack([]),t=0;t<r;t++)w.find(e,i[t],n);return></\></([a-z][^\></i&&ee(e.slice(u,i)),i<o&&ee(e=e.slice(i)),i<o&&xe(e))}p.push(n)}return></o;u++)if(n=r.relative[e[u].type])p=[be(we(p),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[b]){for(i=++u;i<o&&!r.relative[e[i].type];i++);return></u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return></0?n+t:n;++r<t;)e.push(r);return></6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return></0?string.fromcharcode(r+65536):string.fromcharcode(r></t?[this[n]]:[])},end:function(){return></0?this[e+this.length]:this[e]},pushstack:function(e){var></c;n++){if(i=e.children[n],u=i.getboundingclientrect(),o&&u.left+u.width></r.length;s++)n[s]=r[s].join("");return></e))for(var></t.graphemelines.length;s++)"\n"===t.graphemetext[r]&&s></f;u++)n=this.__charbounds[e][u],(s=this.getvalueofpropertyat(e,u,"textbackgroundcolor"))!==l?(l&&this._pushtextbgrect(t,l,i+c,r,h,a),c=n.left,h=n.width,l=s):h+=n.kernedwidth;s&&this._pushtextbgrect(t,s,i+c,r,h,a)},_getfillattributes:function(t){var></rect></n;r++)this._objects[r]._rendercontrols(t,i);t.restore()}}),e.activeselection.fromobject=function(t,i){e.util.enlivenobjects(t.objects,function(r){delete></r;i++)e.push("\t",this._objects[i].toclippathsvg(t));return></r;i++)e.push("\t\t",this._objects[i].tosvg(t));return></r;i++)if(this._objects[i].willdrawshadow())return></y;m+=p)s.push([g].concat(n.slice(m,m+p))),g=v;else></u;l++){for(r=(t=this.path[l]).slice(1).trim(),o.length=0;i=a.exec(r);)o.push(i[0]);n=[t.charat(0)];for(var></path></i;s++)e=this.points[s],t.lineto(e.x-r,e.y-n);return!0},_render:function(t){this.commonrender(t)&&this._renderpaintinorder(t)},_renderdashedstroke:function(t){var></a;o++)t.push(s(this.points[o].x-i,n),",",s(this.points[o].y-r,n),"></rect></ellipse></polygon></path></circle></this[t].length||!function></this.minscalelimit?t<0?-this.minscalelimit:this.minscalelimit:0===t?1e-4:t},scale:function(t){return></t.y&&n.d.y<t.y||n.o.y></=r.y&&e.y></=e.y},containspoint:function(t,e,i,r){e=e||this._getimagelines(r?this.calccoords(i):i?this.acoords:this.ocoords);var></=e.x&&n.top></4;n++)if(!t.containspoint(r[n],s))return!1;return!0},iscontainedwithinrect:function(t,e,i,r){var></0?(this.flipx=!this.flipx,i*=-1):"scaley"===t&&i<0?(this.flipy=!this.flipy,i*=-1):"shadow"!==t||!i||i></fabric."+o(this.type)+"></.9*_||l<.9*x)&&_></=s&&n<=s&&r*n<=i)return></r.length;s++)r[s].fire(t,n);return></f?c=g:math.abs(c-d)<f&&(c=d)}return></0?t.y+=s:t.y-=s:t.y=0},_rotateobject:function(t,e){var></0?t.x+=s:t.x-=s:t.x=0,n(t.y)></=0&&f<h.scalex&&(c=!0,t.x=0),o&&d<=0&&d<h.scaley&&(l=!0,t.y=0),"equally"!==n||i||r?n?"x"!==n||h.get("lockuniscaling")?"y"!==n||h.get("lockuniscaling")||l||r||h.set("scaley",d)&&(u=p):c||i||h.set("scalex",f)&&(u=g):(c||i||h.set("scalex",f)&&(u=u||g),l||r||h.set("scaley",d)&&(u=u||p)):u=this._scaleobjectequally(t,h,e,a),c||l||this._flipobject(e,n),u},_scaleobjectequally:function(t,e,i,r){var></=2?n=0:(n=v*math.atan(f></s;n++)t=this._objects[n],-1===r.indexof(t)?e.push(t):i.push(t);r.length></e;t++)this.dot(i,r[t]);i.restore()},onmousemove:function(t){this.needsfullrender()?(this.canvas.clearcontext(this.canvas.contexttop),this.addpoint(t),this._render()):this.drawdot(t)},onmouseup:function(){var></=2)return></o.x?-1:t[2].x===o.x?0:1,c=t[2].y<o.y?-1:t[2].y===o.y?0:1),i.push("m></e;t++)this._drawsegment(i,r,n),r=this._points[t],n=this._points[t+1];i.lineto(r.x,r.y),i.stroke(),i.restore()},convertpointstosvgpath:function(t){var></1||!!this.shadow},_resetshadow:function(){var></this._objects.length-1-c&&(o=s+1,i(this._objects,n),this._objects.splice(o,0,n)),c++;else(s=this._objects.indexof(t))!==this._objects.length-1&&(o=this._findnewupperindex(t,s,e),i(this._objects,t),this._objects.splice(o,0,t));return></n.length;e++)r=n[e],i(this._objects,r),this._objects.push(r);else></n;r++)(i=s[r]).excludefromexport||this._setsvgobject(t,i,e)},_setsvgobject:function(t,e,i){t.push(e.tosvg(i))},_setsvgbgoverlayimage:function(t,e,i){this[e]&&!this[e].excludefromexport&&this[e].tosvg&&t.push(this[e].tosvg(i))},_setsvgbgoverlaycolor:function(t,e){var></h;a++)if(e=(t=f[a]).fontfamily,-1!==t.type.indexof("text")&&!l[e]&&u[e]&&(l[e]=!0,t.styles))for(n></svg></r;i++)(e=this._objects[i]).group||e.setcoords(!1,!0);return></r;i++){var></r?6:0);break;case></1></0&&(i+=1),i></s;r++){var></=l&&l<=1&&0<=u&&u<=1?(o=new></o.length;a++)e=o[a],this.findtag(e).fromelement(e,this.createclippathcallback(t,r),this.options);o=1===r.length?r[0]:new></e.length;){var></s;n++)i=e[n],r=t.getelementsbytagname(i),o=o.concat(array.prototype.slice.call(r));return></c?i="stroke":-1===c&&l></math.abs(e)?(t=e,r=i></c;h++)r(a,s[h],i);return></e.length;r++)!1!==(i=t(e,r))&&n.push(i);return></=i&&i<=56319){if(t.length<=e+1)throw"high></a;o++)e[o]=t({},i[o],r)}else></1e-12){if(c(f)<1e-12)continue;0<(g=-d></2;++t)if(t></0&&(j+=2*f);for(var></a&&!1!==(s=o.data[n]<=0);n+=4);return></0&&(t=-t),t></n;r++)i[r]&&i[r].call(this,e||{});return></=0?h.cancel(t):0===i&&this.wheeldelta></=o&&e.maxfingers></r.height&&p<=e.driftdeviance))return></r.width&&f></s;o++){var></=t&&e.maxfingers></200?(f.value=g,f.count++,3===f.count&&(t.listener(s,e),i=a,f.value=0,f.count=0)):(f.value=g,f.count=1)}}else></r.minfingers&&(n.fingers=r.fingers,n.state="end",r.listener(e,n))};var></l.height&&math.abs(o.pagex-s.pagex)<=25&&math.abs(o.pagey-s.pagey)<=25||(h.remove(e.target,"mousemove",e.onpointermove),cleartimeout(n),i=r=0)},e.onpointerup=function(s){if(t.pointerend(s,a,e)&&(h.remove(e.target,"mousemove",e.onpointermove),h.remove(e.target,"mouseup",e.onpointerup)),i&&r){if(r<=700){for(var></l.width&&f></s.x2&&a<s.y2&&s.scrolltop===o.scrolltop){for(var></s;a++){o[(h=n[a].identifier)||1></f;a++)(m=i(o[a],a,u,e(p),v))&&(j[a]=m);return></_.length;o++)b[c]=h.add(o,_[o],u,w,v)}return></arguments.length;n++)e[n-1]=arguments[n];s.push(new></e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function></n&&!(i+e></t.length;++e)r.push(255&t.charcodeat(e));return></1114112))throw></65536){if((r-=3)<0)break;o.push(e></128){if((r-=1)<0)break;o.push(e)}else></10|e-56320)}else></56320){(r-=3)></57344){if(!i){if(e></e;++o)this[o]=t;else{var></1e3||!f.typed_array_support)for(i=0;i<o;++i)t[i+r]=this[i+e];else></n-e&&(n=t.length-r+e);var></0)throw></e&&(n=e),n===e)return></0&&(t=4294967295+t+1),f.typed_array_support?(this[r]=t></0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeint16le=function(t,r,e){return></0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t></e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t></8;return></8},f.prototype.readuint16be=function(t,r){return></t&&(r=t),f.typed_array_support)(e=this.subarray(t,r)).__proto__=f.prototype;else{var></0?(r+=n)<0&&(r=0):r></0)throw></0&&(r=4294967295+r+1);for(var></0&&(r=65535+r+1);for(var></o)throw></e;++o)i+=z(t[o]);return></=i)return></0||r<0)||r></s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return></0||i></0||e></buffer></o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return></1114112&&(a=s)}null===a?(a=65533,c=1):a></18|(63&o)<<12|(63&u)<<6|63&f)></55296||s></12|(63&o)<<6|63&u)></=e)switch(c){case></n;++u){var></s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return></0){if(!i)return-1;e=0}if("string"==typeof></-2147483648&&(e=-2147483648),e=+e,isnan(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e></=(r></=0)return"";if((e></0)&&(r=0),r></r)throw></h|w,e+=h;e></0||0===o&&1></e)-1,n=i></-i)-1,m></-i)-1,s></2&63]+"=")),a.join("")}t["-".charcodeat(0)]=62,t["_".charcodeat(0)]=63;></4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e></e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return></10|t[r.charcodeat(d+1)]<<4|t[r.charcodeat(d+2)]></2|t[r.charcodeat(d+1)]></a;d+=4)n=t[r.charcodeat(d)]<<18|t[r.charcodeat(d+1)]<<12|t[r.charcodeat(d+2)]<<6|t[r.charcodeat(d+3)],i[f++]=n></t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var>